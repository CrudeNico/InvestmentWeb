var DI=Object.defineProperty;var RI=(t,e,n)=>e in t?DI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>(RI(t,typeof e!="symbol"?e+"":e,n),n);function MI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function OI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var aC={exports:{}},wf={},lC={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),FI=Symbol.for("react.portal"),BI=Symbol.for("react.fragment"),LI=Symbol.for("react.strict_mode"),VI=Symbol.for("react.profiler"),UI=Symbol.for("react.provider"),zI=Symbol.for("react.context"),$I=Symbol.for("react.forward_ref"),HI=Symbol.for("react.suspense"),WI=Symbol.for("react.memo"),qI=Symbol.for("react.lazy"),U1=Symbol.iterator;function GI(t){return t===null||typeof t!="object"?null:(t=U1&&t[U1]||t["@@iterator"],typeof t=="function"?t:null)}var cC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uC=Object.assign,dC={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=dC,this.updater=n||cC}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hC(){}hC.prototype=Ua.prototype;function xg(t,e,n){this.props=t,this.context=e,this.refs=dC,this.updater=n||cC}var gg=xg.prototype=new hC;gg.constructor=xg;uC(gg,Ua.prototype);gg.isPureReactComponent=!0;var z1=Array.isArray,fC=Object.prototype.hasOwnProperty,yg={current:null},mC={key:!0,ref:!0,__self:!0,__source:!0};function pC(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fC.call(e,r)&&!mC.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:tu,type:t,key:i,ref:o,props:s,_owner:yg.current}}function KI(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vg(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function YI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $1=/\/+/g;function L0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YI(""+t.key):e.toString(36)}function Od(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tu:case FI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+L0(o,0):r,z1(s)?(n="",t!=null&&(n=t.replace($1,"$&/")+"/"),Od(s,e,n,"",function(u){return u})):s!=null&&(vg(s)&&(s=KI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",z1(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+L0(i,a);o+=Od(i,e,n,c,s)}else if(c=GI(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+L0(i,a++),o+=Od(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qu(t,e,n){if(t==null)return t;var r=[],s=0;return Od(t,r,"","",function(i){return e.call(n,i,s++)}),r}function QI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},Fd={transition:null},XI={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Fd,ReactCurrentOwner:yg};function xC(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Qu,forEach:function(t,e,n){Qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!vg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Ua;ve.Fragment=BI;ve.Profiler=VI;ve.PureComponent=xg;ve.StrictMode=LI;ve.Suspense=HI;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XI;ve.act=xC;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uC({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)fC.call(e,c)&&!mC.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:tu,type:t.type,key:s,ref:i,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:zI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UI,_context:t},t.Consumer=t};ve.createElement=pC;ve.createFactory=function(t){var e=pC.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:$I,render:t}};ve.isValidElement=vg;ve.lazy=function(t){return{$$typeof:qI,_payload:{_status:-1,_result:t},_init:QI}};ve.memo=function(t,e){return{$$typeof:WI,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Fd.transition;Fd.transition={};try{t()}finally{Fd.transition=e}};ve.unstable_act=xC;ve.useCallback=function(t,e){return ln.current.useCallback(t,e)};ve.useContext=function(t){return ln.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};ve.useEffect=function(t,e){return ln.current.useEffect(t,e)};ve.useId=function(){return ln.current.useId()};ve.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return ln.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};ve.useRef=function(t){return ln.current.useRef(t)};ve.useState=function(t){return ln.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return ln.current.useTransition()};ve.version="18.3.1";lC.exports=ve;var O=lC.exports;const nu=pg(O),JI=MI({__proto__:null,default:nu},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI=O,ej=Symbol.for("react.element"),tj=Symbol.for("react.fragment"),nj=Object.prototype.hasOwnProperty,rj=ZI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sj={key:!0,ref:!0,__self:!0,__source:!0};function gC(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nj.call(e,r)&&!sj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ej,type:t,key:i,ref:o,props:s,_owner:rj.current}}wf.Fragment=tj;wf.jsx=gC;wf.jsxs=gC;aC.exports=wf;var l=aC.exports,Sp={},yC={exports:{}},Pn={},vC={exports:{}},wC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Q){var J=H.length;H.push(Q);e:for(;0<J;){var V=J-1>>>1,F=H[V];if(0<s(F,Q))H[V]=Q,H[J]=F,J=V;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Q=H[0],J=H.pop();if(J!==Q){H[0]=J;e:for(var V=0,F=H.length,L=F>>>1;V<L;){var W=2*(V+1)-1,oe=H[W],le=W+1,Le=H[le];if(0>s(oe,J))le<F&&0>s(Le,oe)?(H[V]=Le,H[le]=J,V=le):(H[V]=oe,H[W]=J,V=W);else if(le<F&&0>s(Le,J))H[V]=Le,H[le]=J,V=le;else break e}}return Q}function s(H,Q){var J=H.sortIndex-Q.sortIndex;return J!==0?J:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,m=3,p=!1,x=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=H)r(u),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(u)}}function E(H){if(_=!1,b(H),!x)if(n(c)!==null)x=!0,G(T);else{var Q=n(u);Q!==null&&X(E,Q.startTime-H)}}function T(H,Q){x=!1,_&&(_=!1,S(g),g=-1),p=!0;var J=m;try{for(b(Q),f=n(c);f!==null&&(!(f.expirationTime>Q)||H&&!j());){var V=f.callback;if(typeof V=="function"){f.callback=null,m=f.priorityLevel;var F=V(f.expirationTime<=Q);Q=t.unstable_now(),typeof F=="function"?f.callback=F:f===n(c)&&r(c),b(Q)}else r(c);f=n(c)}if(f!==null)var L=!0;else{var W=n(u);W!==null&&X(E,W.startTime-Q),L=!1}return L}finally{f=null,m=J,p=!1}}var k=!1,w=null,g=-1,A=5,N=-1;function j(){return!(t.unstable_now()-N<A)}function D(){if(w!==null){var H=t.unstable_now();N=H;var Q=!0;try{Q=w(!0,H)}finally{Q?P():(k=!1,w=null)}}else k=!1}var P;if(typeof y=="function")P=function(){y(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=D,P=function(){$.postMessage(null)}}else P=function(){v(D,0)};function G(H){w=H,k||(k=!0,P())}function X(H,Q){g=v(function(){H(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,G(T))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var J=m;m=Q;try{return H()}finally{m=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=m;m=H;try{return Q()}finally{m=J}},t.unstable_scheduleCallback=function(H,Q,J){var V=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?V+J:V):J=V,H){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=J+F,H={id:d++,callback:Q,priorityLevel:H,startTime:J,expirationTime:F,sortIndex:-1},J>V?(H.sortIndex=J,e(u,H),n(c)===null&&H===n(u)&&(_?(S(g),g=-1):_=!0,X(E,J-V))):(H.sortIndex=F,e(c,H),x||p||(x=!0,G(T))),H},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(H){var Q=m;return function(){var J=m;m=Q;try{return H.apply(this,arguments)}finally{m=J}}}})(wC);vC.exports=wC;var ij=vC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj=O,jn=ij;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bC=new Set,fc={};function go(t,e){va(t,e),va(t+"Capture",e)}function va(t,e){for(fc[t]=e,t=0;t<e.length;t++)bC.add(e[t])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Np=Object.prototype.hasOwnProperty,aj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H1={},W1={};function lj(t){return Np.call(W1,t)?!0:Np.call(H1,t)?!1:aj.test(t)?W1[t]=!0:(H1[t]=!0,!1)}function cj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uj(t,e,n,r){if(e===null||typeof e>"u"||cj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var wg=/[\-:]([a-z])/g;function bg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wg,bg);Mt[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wg,bg);Mt[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wg,bg);Mt[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function _g(t,e,n,r){var s=Mt.hasOwnProperty(e)?Mt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uj(e,n,s,r)&&(n=null),r||s===null?lj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var as=oj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),Eg=Symbol.for("react.strict_mode"),Ap=Symbol.for("react.profiler"),_C=Symbol.for("react.provider"),EC=Symbol.for("react.context"),Cg=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),kp=Symbol.for("react.suspense_list"),Sg=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),CC=Symbol.for("react.offscreen"),q1=Symbol.iterator;function yl(t){return t===null||typeof t!="object"?null:(t=q1&&t[q1]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,V0;function Ol(t){if(V0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);V0=e&&e[1]||""}return`
`+V0+t}var U0=!1;function z0(t,e){if(!t||U0)return"";U0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{U0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ol(t):""}function dj(t){switch(t.tag){case 5:return Ol(t.type);case 16:return Ol("Lazy");case 13:return Ol("Suspense");case 19:return Ol("SuspenseList");case 0:case 2:case 15:return t=z0(t.type,!1),t;case 11:return t=z0(t.type.render,!1),t;case 1:return t=z0(t.type,!0),t;default:return""}}function Ip(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qo:return"Fragment";case Wo:return"Portal";case Ap:return"Profiler";case Eg:return"StrictMode";case Tp:return"Suspense";case kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EC:return(t.displayName||"Context")+".Consumer";case _C:return(t._context.displayName||"Context")+".Provider";case Cg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sg:return e=t.displayName||null,e!==null?e:Ip(t.type)||"Memo";case Ns:e=t._payload,t=t._init;try{return Ip(t(e))}catch{}}return null}function hj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ip(e);case 8:return e===Eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fj(t){var e=SC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ju(t){t._valueTracker||(t._valueTracker=fj(t))}function NC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=SC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jp(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function G1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AC(t,e){e=e.checked,e!=null&&_g(t,"checked",e,!1)}function Pp(t,e){AC(t,e);var n=ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dp(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function K1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dp(t,e,n){(e!=="number"||hh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fl=Array.isArray;function ia(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ri(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Fl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ri(n)}}function TC(t,e){var n=ri(e.value),r=ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Q1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,IC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mj=["Webkit","ms","Moz","O"];Object.keys(Gl).forEach(function(t){mj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gl[e]=Gl[t]})});function jC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gl.hasOwnProperty(t)&&Gl[t]?(""+e).trim():e+"px"}function PC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pj=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Op(t,e){if(e){if(pj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Fp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bp=null;function Ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lp=null,oa=null,aa=null;function X1(t){if(t=iu(t)){if(typeof Lp!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Sf(e),Lp(t.stateNode,t.type,e))}}function DC(t){oa?aa?aa.push(t):aa=[t]:oa=t}function RC(){if(oa){var t=oa,e=aa;if(aa=oa=null,X1(t),e)for(t=0;t<e.length;t++)X1(e[t])}}function MC(t,e){return t(e)}function OC(){}var $0=!1;function FC(t,e,n){if($0)return t(e,n);$0=!0;try{return MC(t,e,n)}finally{$0=!1,(oa!==null||aa!==null)&&(OC(),RC())}}function pc(t,e){var n=t.stateNode;if(n===null)return null;var r=Sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Vp=!1;if(Yr)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){Vp=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{Vp=!1}function xj(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Kl=!1,fh=null,mh=!1,Up=null,gj={onError:function(t){Kl=!0,fh=t}};function yj(t,e,n,r,s,i,o,a,c){Kl=!1,fh=null,xj.apply(gj,arguments)}function vj(t,e,n,r,s,i,o,a,c){if(yj.apply(this,arguments),Kl){if(Kl){var u=fh;Kl=!1,fh=null}else throw Error(Y(198));mh||(mh=!0,Up=u)}}function yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function J1(t){if(yo(t)!==t)throw Error(Y(188))}function wj(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return J1(s),t;if(i===r)return J1(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function LC(t){return t=wj(t),t!==null?VC(t):null}function VC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VC(t);if(e!==null)return e;t=t.sibling}return null}var UC=jn.unstable_scheduleCallback,Z1=jn.unstable_cancelCallback,bj=jn.unstable_shouldYield,_j=jn.unstable_requestPaint,st=jn.unstable_now,Ej=jn.unstable_getCurrentPriorityLevel,Ag=jn.unstable_ImmediatePriority,zC=jn.unstable_UserBlockingPriority,ph=jn.unstable_NormalPriority,Cj=jn.unstable_LowPriority,$C=jn.unstable_IdlePriority,bf=null,gr=null;function Sj(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:Tj,Nj=Math.log,Aj=Math.LN2;function Tj(t){return t>>>=0,t===0?32:31-(Nj(t)/Aj|0)|0}var ed=64,td=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Bl(a):(i&=o,i!==0&&(r=Bl(i)))}else o=n&~s,o!==0?r=Bl(o):i!==0&&(r=Bl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),s=1<<n,r|=t[n],e&=~s;return r}function kj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ij(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zn(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=kj(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function zp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HC(){var t=ed;return ed<<=1,!(ed&4194240)&&(ed=64),t}function H0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function jj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var De=0;function WC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qC,kg,GC,KC,YC,$p=!1,nd=[],$s=null,Hs=null,Ws=null,xc=new Map,gc=new Map,Ts=[],Pj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ew(t,e){switch(t){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":xc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(e.pointerId)}}function wl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=iu(e),e!==null&&kg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Dj(t,e,n,r,s){switch(e){case"focusin":return $s=wl($s,t,e,n,r,s),!0;case"dragenter":return Hs=wl(Hs,t,e,n,r,s),!0;case"mouseover":return Ws=wl(Ws,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xc.set(i,wl(xc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gc.set(i,wl(gc.get(i)||null,t,e,n,r,s)),!0}return!1}function QC(t){var e=Ui(t.target);if(e!==null){var n=yo(e);if(n!==null){if(e=n.tag,e===13){if(e=BC(n),e!==null){t.blockedOn=e,YC(t.priority,function(){GC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bp=r,n.target.dispatchEvent(r),Bp=null}else return e=iu(n),e!==null&&kg(e),t.blockedOn=n,!1;e.shift()}return!0}function tw(t,e,n){Bd(t)&&n.delete(e)}function Rj(){$p=!1,$s!==null&&Bd($s)&&($s=null),Hs!==null&&Bd(Hs)&&(Hs=null),Ws!==null&&Bd(Ws)&&(Ws=null),xc.forEach(tw),gc.forEach(tw)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,$p||($p=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,Rj)))}function yc(t){function e(s){return bl(s,t)}if(0<nd.length){bl(nd[0],t);for(var n=1;n<nd.length;n++){var r=nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for($s!==null&&bl($s,t),Hs!==null&&bl(Hs,t),Ws!==null&&bl(Ws,t),xc.forEach(e),gc.forEach(e),n=0;n<Ts.length;n++)r=Ts[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ts.length&&(n=Ts[0],n.blockedOn===null);)QC(n),n.blockedOn===null&&Ts.shift()}var la=as.ReactCurrentBatchConfig,gh=!0;function Mj(t,e,n,r){var s=De,i=la.transition;la.transition=null;try{De=1,Ig(t,e,n,r)}finally{De=s,la.transition=i}}function Oj(t,e,n,r){var s=De,i=la.transition;la.transition=null;try{De=4,Ig(t,e,n,r)}finally{De=s,la.transition=i}}function Ig(t,e,n,r){if(gh){var s=Hp(t,e,n,r);if(s===null)em(t,e,r,yh,n),ew(t,r);else if(Dj(s,t,e,n,r))r.stopPropagation();else if(ew(t,r),e&4&&-1<Pj.indexOf(t)){for(;s!==null;){var i=iu(s);if(i!==null&&qC(i),i=Hp(t,e,n,r),i===null&&em(t,e,r,yh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else em(t,e,r,null,n)}}var yh=null;function Hp(t,e,n,r){if(yh=null,t=Ng(r),t=Ui(t),t!==null)if(e=yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yh=t,null}function XC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ej()){case Ag:return 1;case zC:return 4;case ph:case Cj:return 16;case $C:return 536870912;default:return 16}default:return 16}}var Rs=null,jg=null,Ld=null;function JC(){if(Ld)return Ld;var t,e=jg,n=e.length,r,s="value"in Rs?Rs.value:Rs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ld=s.slice(t,1<r?1-r:void 0)}function Vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function nw(){return!1}function Dn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rd:nw,this.isPropagationStopped=nw,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pg=Dn(za),su=Qe({},za,{view:0,detail:0}),Fj=Dn(su),W0,q0,_l,_f=Qe({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_l&&(_l&&t.type==="mousemove"?(W0=t.screenX-_l.screenX,q0=t.screenY-_l.screenY):q0=W0=0,_l=t),W0)},movementY:function(t){return"movementY"in t?t.movementY:q0}}),rw=Dn(_f),Bj=Qe({},_f,{dataTransfer:0}),Lj=Dn(Bj),Vj=Qe({},su,{relatedTarget:0}),G0=Dn(Vj),Uj=Qe({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),zj=Dn(Uj),$j=Qe({},za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hj=Dn($j),Wj=Qe({},za,{data:0}),sw=Dn(Wj),qj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kj[t])?!!e[t]:!1}function Dg(){return Yj}var Qj=Qe({},su,{key:function(t){if(t.key){var e=qj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dg,charCode:function(t){return t.type==="keypress"?Vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xj=Dn(Qj),Jj=Qe({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iw=Dn(Jj),Zj=Qe({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dg}),e5=Dn(Zj),t5=Qe({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),n5=Dn(t5),r5=Qe({},_f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s5=Dn(r5),i5=[9,13,27,32],Rg=Yr&&"CompositionEvent"in window,Yl=null;Yr&&"documentMode"in document&&(Yl=document.documentMode);var o5=Yr&&"TextEvent"in window&&!Yl,ZC=Yr&&(!Rg||Yl&&8<Yl&&11>=Yl),ow=String.fromCharCode(32),aw=!1;function e4(t,e){switch(t){case"keyup":return i5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Go=!1;function a5(t,e){switch(t){case"compositionend":return t4(e);case"keypress":return e.which!==32?null:(aw=!0,ow);case"textInput":return t=e.data,t===ow&&aw?null:t;default:return null}}function l5(t,e){if(Go)return t==="compositionend"||!Rg&&e4(t,e)?(t=JC(),Ld=jg=Rs=null,Go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZC&&e.locale!=="ko"?null:e.data;default:return null}}var c5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c5[t.type]:e==="textarea"}function n4(t,e,n,r){DC(r),e=vh(e,"onChange"),0<e.length&&(n=new Pg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ql=null,vc=null;function u5(t){f4(t,0)}function Ef(t){var e=Qo(t);if(NC(e))return t}function d5(t,e){if(t==="change")return e}var r4=!1;if(Yr){var K0;if(Yr){var Y0="oninput"in document;if(!Y0){var cw=document.createElement("div");cw.setAttribute("oninput","return;"),Y0=typeof cw.oninput=="function"}K0=Y0}else K0=!1;r4=K0&&(!document.documentMode||9<document.documentMode)}function uw(){Ql&&(Ql.detachEvent("onpropertychange",s4),vc=Ql=null)}function s4(t){if(t.propertyName==="value"&&Ef(vc)){var e=[];n4(e,vc,t,Ng(t)),FC(u5,e)}}function h5(t,e,n){t==="focusin"?(uw(),Ql=e,vc=n,Ql.attachEvent("onpropertychange",s4)):t==="focusout"&&uw()}function f5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(vc)}function m5(t,e){if(t==="click")return Ef(e)}function p5(t,e){if(t==="input"||t==="change")return Ef(e)}function x5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:x5;function wc(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Np.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function dw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hw(t,e){var n=dw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dw(n)}}function i4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?i4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o4(){for(var t=window,e=hh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hh(t.document)}return e}function Mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function g5(t){var e=o4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&i4(n.ownerDocument.documentElement,n)){if(r!==null&&Mg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hw(n,i);var o=hw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var y5=Yr&&"documentMode"in document&&11>=document.documentMode,Ko=null,Wp=null,Xl=null,qp=!1;function fw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qp||Ko==null||Ko!==hh(r)||(r=Ko,"selectionStart"in r&&Mg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xl&&wc(Xl,r)||(Xl=r,r=vh(Wp,"onSelect"),0<r.length&&(e=new Pg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ko)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},Q0={},a4={};Yr&&(a4=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Cf(t){if(Q0[t])return Q0[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a4)return Q0[t]=e[n];return t}var l4=Cf("animationend"),c4=Cf("animationiteration"),u4=Cf("animationstart"),d4=Cf("transitionend"),h4=new Map,mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){h4.set(t,e),go(e,[t])}for(var X0=0;X0<mw.length;X0++){var J0=mw[X0],v5=J0.toLowerCase(),w5=J0[0].toUpperCase()+J0.slice(1);hi(v5,"on"+w5)}hi(l4,"onAnimationEnd");hi(c4,"onAnimationIteration");hi(u4,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(d4,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function pw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vj(r,e,void 0,t),t.currentTarget=null}function f4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;pw(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;pw(s,a,u),i=c}}}if(mh)throw t=Up,mh=!1,Up=null,t}function Ue(t,e){var n=e[Xp];n===void 0&&(n=e[Xp]=new Set);var r=t+"__bubble";n.has(r)||(m4(e,t,2,!1),n.add(r))}function Z0(t,e,n){var r=0;e&&(r|=4),m4(n,t,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[id]){t[id]=!0,bC.forEach(function(n){n!=="selectionchange"&&(b5.has(n)||Z0(n,!1,t),Z0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,Z0("selectionchange",!1,e))}}function m4(t,e,n,r){switch(XC(e)){case 1:var s=Mj;break;case 4:s=Oj;break;default:s=Ig}n=s.bind(null,e,n,t),s=void 0,!Vp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function em(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ui(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}FC(function(){var u=i,d=Ng(n),f=[];e:{var m=h4.get(t);if(m!==void 0){var p=Pg,x=t;switch(t){case"keypress":if(Vd(n)===0)break e;case"keydown":case"keyup":p=Xj;break;case"focusin":x="focus",p=G0;break;case"focusout":x="blur",p=G0;break;case"beforeblur":case"afterblur":p=G0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Lj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=e5;break;case l4:case c4:case u4:p=zj;break;case d4:p=n5;break;case"scroll":p=Fj;break;case"wheel":p=s5;break;case"copy":case"cut":case"paste":p=Hj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=iw}var _=(e&4)!==0,v=!_&&t==="scroll",S=_?m!==null?m+"Capture":null:m;_=[];for(var y=u,b;y!==null;){b=y;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,S!==null&&(E=pc(y,S),E!=null&&_.push(_c(y,E,b)))),v)break;y=y.return}0<_.length&&(m=new p(m,x,null,n,d),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Bp&&(x=n.relatedTarget||n.fromElement)&&(Ui(x)||x[Qr]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=u,x=x?Ui(x):null,x!==null&&(v=yo(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(_=rw,E="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=iw,E="onPointerLeave",S="onPointerEnter",y="pointer"),v=p==null?m:Qo(p),b=x==null?m:Qo(x),m=new _(E,y+"leave",p,n,d),m.target=v,m.relatedTarget=b,E=null,Ui(d)===u&&(_=new _(S,y+"enter",x,n,d),_.target=b,_.relatedTarget=v,E=_),v=E,p&&x)t:{for(_=p,S=x,y=0,b=_;b;b=Mo(b))y++;for(b=0,E=S;E;E=Mo(E))b++;for(;0<y-b;)_=Mo(_),y--;for(;0<b-y;)S=Mo(S),b--;for(;y--;){if(_===S||S!==null&&_===S.alternate)break t;_=Mo(_),S=Mo(S)}_=null}else _=null;p!==null&&xw(f,m,p,_,!1),x!==null&&v!==null&&xw(f,v,x,_,!0)}}e:{if(m=u?Qo(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var T=d5;else if(lw(m))if(r4)T=p5;else{T=f5;var k=h5}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=m5);if(T&&(T=T(t,u))){n4(f,T,n,d);break e}k&&k(t,m,u),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Dp(m,"number",m.value)}switch(k=u?Qo(u):window,t){case"focusin":(lw(k)||k.contentEditable==="true")&&(Ko=k,Wp=u,Xl=null);break;case"focusout":Xl=Wp=Ko=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,fw(f,n,d);break;case"selectionchange":if(y5)break;case"keydown":case"keyup":fw(f,n,d)}var w;if(Rg)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Go?e4(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(ZC&&n.locale!=="ko"&&(Go||g!=="onCompositionStart"?g==="onCompositionEnd"&&Go&&(w=JC()):(Rs=d,jg="value"in Rs?Rs.value:Rs.textContent,Go=!0)),k=vh(u,g),0<k.length&&(g=new sw(g,t,null,n,d),f.push({event:g,listeners:k}),w?g.data=w:(w=t4(n),w!==null&&(g.data=w)))),(w=o5?a5(t,n):l5(t,n))&&(u=vh(u,"onBeforeInput"),0<u.length&&(d=new sw("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=w))}f4(f,e)})}function _c(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pc(t,n),i!=null&&r.unshift(_c(t,i,s)),i=pc(t,e),i!=null&&r.push(_c(t,i,s))),t=t.return}return r}function Mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=pc(n,i),c!=null&&o.unshift(_c(n,c,a))):s||(c=pc(n,i),c!=null&&o.push(_c(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _5=/\r\n?/g,E5=/\u0000|\uFFFD/g;function gw(t){return(typeof t=="string"?t:""+t).replace(_5,`
`).replace(E5,"")}function od(t,e,n){if(e=gw(e),gw(t)!==e&&n)throw Error(Y(425))}function wh(){}var Gp=null,Kp=null;function Yp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qp=typeof setTimeout=="function"?setTimeout:void 0,C5=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,S5=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(t){return yw.resolve(null).then(t).catch(N5)}:Qp;function N5(t){setTimeout(function(){throw t})}function tm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yc(e)}function qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $a=Math.random().toString(36).slice(2),pr="__reactFiber$"+$a,Ec="__reactProps$"+$a,Qr="__reactContainer$"+$a,Xp="__reactEvents$"+$a,A5="__reactListeners$"+$a,T5="__reactHandles$"+$a;function Ui(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vw(t);t!==null;){if(n=t[pr])return n;t=vw(t)}return e}t=n,n=t.parentNode}return null}function iu(t){return t=t[pr]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Sf(t){return t[Ec]||null}var Jp=[],Xo=-1;function fi(t){return{current:t}}function We(t){0>Xo||(t.current=Jp[Xo],Jp[Xo]=null,Xo--)}function Be(t,e){Xo++,Jp[Xo]=t.current,t.current=e}var si={},Yt=fi(si),xn=fi(!1),eo=si;function wa(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gn(t){return t=t.childContextTypes,t!=null}function bh(){We(xn),We(Yt)}function ww(t,e,n){if(Yt.current!==si)throw Error(Y(168));Be(Yt,e),Be(xn,n)}function p4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,hj(t)||"Unknown",s));return Qe({},n,r)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,eo=Yt.current,Be(Yt,t),Be(xn,xn.current),!0}function bw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=p4(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,We(xn),We(Yt),Be(Yt,t)):We(xn),Be(xn,n)}var Or=null,Nf=!1,nm=!1;function x4(t){Or===null?Or=[t]:Or.push(t)}function k5(t){Nf=!0,x4(t)}function mi(){if(!nm&&Or!==null){nm=!0;var t=0,e=De;try{var n=Or;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Or=null,Nf=!1}catch(s){throw Or!==null&&(Or=Or.slice(t+1)),UC(Ag,mi),s}finally{De=e,nm=!1}}return null}var Jo=[],Zo=0,Eh=null,Ch=0,On=[],Fn=0,to=null,Lr=1,Vr="";function Mi(t,e){Jo[Zo++]=Ch,Jo[Zo++]=Eh,Eh=t,Ch=e}function g4(t,e,n){On[Fn++]=Lr,On[Fn++]=Vr,On[Fn++]=to,to=t;var r=Lr;t=Vr;var s=32-Zn(r)-1;r&=~(1<<s),n+=1;var i=32-Zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lr=1<<32-Zn(e)+s|n<<s|r,Vr=i+t}else Lr=1<<i|n<<s|r,Vr=t}function Og(t){t.return!==null&&(Mi(t,1),g4(t,1,0))}function Fg(t){for(;t===Eh;)Eh=Jo[--Zo],Jo[Zo]=null,Ch=Jo[--Zo],Jo[Zo]=null;for(;t===to;)to=On[--Fn],On[Fn]=null,Vr=On[--Fn],On[Fn]=null,Lr=On[--Fn],On[Fn]=null}var Tn=null,Sn=null,qe=!1,Xn=null;function y4(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _w(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,Sn=qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:Lr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,Sn=null,!0):!1;default:return!1}}function Zp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ex(t){if(qe){var e=Sn;if(e){var n=e;if(!_w(t,e)){if(Zp(t))throw Error(Y(418));e=qs(n.nextSibling);var r=Tn;e&&_w(t,e)?y4(r,n):(t.flags=t.flags&-4097|2,qe=!1,Tn=t)}}else{if(Zp(t))throw Error(Y(418));t.flags=t.flags&-4097|2,qe=!1,Tn=t}}}function Ew(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function ad(t){if(t!==Tn)return!1;if(!qe)return Ew(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yp(t.type,t.memoizedProps)),e&&(e=Sn)){if(Zp(t))throw v4(),Error(Y(418));for(;e;)y4(t,e),e=qs(e.nextSibling)}if(Ew(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=qs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=Tn?qs(t.stateNode.nextSibling):null;return!0}function v4(){for(var t=Sn;t;)t=qs(t.nextSibling)}function ba(){Sn=Tn=null,qe=!1}function Bg(t){Xn===null?Xn=[t]:Xn.push(t)}var I5=as.ReactCurrentBatchConfig;function El(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function ld(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cw(t){var e=t._init;return e(t._payload)}function w4(t){function e(S,y){if(t){var b=S.deletions;b===null?(S.deletions=[y],S.flags|=16):b.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function r(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function s(S,y){return S=Qs(S,y),S.index=0,S.sibling=null,S}function i(S,y,b){return S.index=b,t?(b=S.alternate,b!==null?(b=b.index,b<y?(S.flags|=2,y):b):(S.flags|=2,y)):(S.flags|=1048576,y)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,y,b,E){return y===null||y.tag!==6?(y=cm(b,S.mode,E),y.return=S,y):(y=s(y,b),y.return=S,y)}function c(S,y,b,E){var T=b.type;return T===qo?d(S,y,b.props.children,E,b.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ns&&Cw(T)===y.type)?(E=s(y,b.props),E.ref=El(S,y,b),E.return=S,E):(E=Gd(b.type,b.key,b.props,null,S.mode,E),E.ref=El(S,y,b),E.return=S,E)}function u(S,y,b,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=um(b,S.mode,E),y.return=S,y):(y=s(y,b.children||[]),y.return=S,y)}function d(S,y,b,E,T){return y===null||y.tag!==7?(y=Yi(b,S.mode,E,T),y.return=S,y):(y=s(y,b),y.return=S,y)}function f(S,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=cm(""+y,S.mode,b),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xu:return b=Gd(y.type,y.key,y.props,null,S.mode,b),b.ref=El(S,null,y),b.return=S,b;case Wo:return y=um(y,S.mode,b),y.return=S,y;case Ns:var E=y._init;return f(S,E(y._payload),b)}if(Fl(y)||yl(y))return y=Yi(y,S.mode,b,null),y.return=S,y;ld(S,y)}return null}function m(S,y,b,E){var T=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:a(S,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xu:return b.key===T?c(S,y,b,E):null;case Wo:return b.key===T?u(S,y,b,E):null;case Ns:return T=b._init,m(S,y,T(b._payload),E)}if(Fl(b)||yl(b))return T!==null?null:d(S,y,b,E,null);ld(S,b)}return null}function p(S,y,b,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return S=S.get(b)||null,a(y,S,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Xu:return S=S.get(E.key===null?b:E.key)||null,c(y,S,E,T);case Wo:return S=S.get(E.key===null?b:E.key)||null,u(y,S,E,T);case Ns:var k=E._init;return p(S,y,b,k(E._payload),T)}if(Fl(E)||yl(E))return S=S.get(b)||null,d(y,S,E,T,null);ld(y,E)}return null}function x(S,y,b,E){for(var T=null,k=null,w=y,g=y=0,A=null;w!==null&&g<b.length;g++){w.index>g?(A=w,w=null):A=w.sibling;var N=m(S,w,b[g],E);if(N===null){w===null&&(w=A);break}t&&w&&N.alternate===null&&e(S,w),y=i(N,y,g),k===null?T=N:k.sibling=N,k=N,w=A}if(g===b.length)return n(S,w),qe&&Mi(S,g),T;if(w===null){for(;g<b.length;g++)w=f(S,b[g],E),w!==null&&(y=i(w,y,g),k===null?T=w:k.sibling=w,k=w);return qe&&Mi(S,g),T}for(w=r(S,w);g<b.length;g++)A=p(w,S,g,b[g],E),A!==null&&(t&&A.alternate!==null&&w.delete(A.key===null?g:A.key),y=i(A,y,g),k===null?T=A:k.sibling=A,k=A);return t&&w.forEach(function(j){return e(S,j)}),qe&&Mi(S,g),T}function _(S,y,b,E){var T=yl(b);if(typeof T!="function")throw Error(Y(150));if(b=T.call(b),b==null)throw Error(Y(151));for(var k=T=null,w=y,g=y=0,A=null,N=b.next();w!==null&&!N.done;g++,N=b.next()){w.index>g?(A=w,w=null):A=w.sibling;var j=m(S,w,N.value,E);if(j===null){w===null&&(w=A);break}t&&w&&j.alternate===null&&e(S,w),y=i(j,y,g),k===null?T=j:k.sibling=j,k=j,w=A}if(N.done)return n(S,w),qe&&Mi(S,g),T;if(w===null){for(;!N.done;g++,N=b.next())N=f(S,N.value,E),N!==null&&(y=i(N,y,g),k===null?T=N:k.sibling=N,k=N);return qe&&Mi(S,g),T}for(w=r(S,w);!N.done;g++,N=b.next())N=p(w,S,g,N.value,E),N!==null&&(t&&N.alternate!==null&&w.delete(N.key===null?g:N.key),y=i(N,y,g),k===null?T=N:k.sibling=N,k=N);return t&&w.forEach(function(D){return e(S,D)}),qe&&Mi(S,g),T}function v(S,y,b,E){if(typeof b=="object"&&b!==null&&b.type===qo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Xu:e:{for(var T=b.key,k=y;k!==null;){if(k.key===T){if(T=b.type,T===qo){if(k.tag===7){n(S,k.sibling),y=s(k,b.props.children),y.return=S,S=y;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ns&&Cw(T)===k.type){n(S,k.sibling),y=s(k,b.props),y.ref=El(S,k,b),y.return=S,S=y;break e}n(S,k);break}else e(S,k);k=k.sibling}b.type===qo?(y=Yi(b.props.children,S.mode,E,b.key),y.return=S,S=y):(E=Gd(b.type,b.key,b.props,null,S.mode,E),E.ref=El(S,y,b),E.return=S,S=E)}return o(S);case Wo:e:{for(k=b.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(S,y.sibling),y=s(y,b.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=um(b,S.mode,E),y.return=S,S=y}return o(S);case Ns:return k=b._init,v(S,y,k(b._payload),E)}if(Fl(b))return x(S,y,b,E);if(yl(b))return _(S,y,b,E);ld(S,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(S,y.sibling),y=s(y,b),y.return=S,S=y):(n(S,y),y=cm(b,S.mode,E),y.return=S,S=y),o(S)):n(S,y)}return v}var _a=w4(!0),b4=w4(!1),Sh=fi(null),Nh=null,ea=null,Lg=null;function Vg(){Lg=ea=Nh=null}function Ug(t){var e=Sh.current;We(Sh),t._currentValue=e}function tx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Nh=t,Lg=ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Lg!==t)if(t={context:t,memoizedValue:e,next:null},ea===null){if(Nh===null)throw Error(Y(308));ea=t,Nh.dependencies={lanes:0,firstContext:t}}else ea=ea.next=t;return e}var zi=null;function zg(t){zi===null?zi=[t]:zi.push(t)}function _4(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,zg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xr(t,r)}function Xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var As=!1;function $g(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xr(t,n)}return s=r.interleaved,s===null?(e.next=e,zg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xr(t,n)}function Ud(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tg(t,n)}}function Sw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ah(t,e,n,r){var s=t.updateQueue;As=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,_=a;switch(m=e,p=n,_.tag){case 1:if(x=_.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=_.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=Qe({},f,m);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ro|=o,t.lanes=o,t.memoizedState=f}}function Nw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var ou={},yr=fi(ou),Cc=fi(ou),Sc=fi(ou);function $i(t){if(t===ou)throw Error(Y(174));return t}function Hg(t,e){switch(Be(Sc,e),Be(Cc,t),Be(yr,ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mp(e,t)}We(yr),Be(yr,e)}function Ea(){We(yr),We(Cc),We(Sc)}function C4(t){$i(Sc.current);var e=$i(yr.current),n=Mp(e,t.type);e!==n&&(Be(Cc,t),Be(yr,n))}function Wg(t){Cc.current===t&&(We(yr),We(Cc))}var Ke=fi(0);function Th(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function qg(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var zd=as.ReactCurrentDispatcher,sm=as.ReactCurrentBatchConfig,no=0,Ye=null,mt=null,_t=null,kh=!1,Jl=!1,Nc=0,j5=0;function Vt(){throw Error(Y(321))}function Gg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function Kg(t,e,n,r,s,i){if(no=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?M5:O5,t=n(r,s),Jl){i=0;do{if(Jl=!1,Nc=0,25<=i)throw Error(Y(301));i+=1,_t=mt=null,e.updateQueue=null,zd.current=F5,t=n(r,s)}while(Jl)}if(zd.current=Ih,e=mt!==null&&mt.next!==null,no=0,_t=mt=Ye=null,kh=!1,e)throw Error(Y(300));return t}function Yg(){var t=Nc!==0;return Nc=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ye.memoizedState=_t=t:_t=_t.next=t,_t}function Hn(){if(mt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=_t===null?Ye.memoizedState:_t.next;if(e!==null)_t=e,mt=t;else{if(t===null)throw Error(Y(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?Ye.memoizedState=_t=t:_t=_t.next=t}return _t}function Ac(t,e){return typeof e=="function"?e(t):e}function im(t){var e=Hn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((no&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Ye.lanes|=d,ro|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,rr(r,e.memoizedState)||(pn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,ro|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function om(t){var e=Hn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rr(i,e.memoizedState)||(pn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function S4(){}function N4(t,e){var n=Ye,r=Hn(),s=e(),i=!rr(r.memoizedState,s);if(i&&(r.memoizedState=s,pn=!0),r=r.queue,Qg(k4.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Tc(9,T4.bind(null,n,r,s,e),void 0,null),Et===null)throw Error(Y(349));no&30||A4(n,e,s)}return s}function A4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function T4(t,e,n,r){e.value=n,e.getSnapshot=r,I4(e)&&j4(t)}function k4(t,e,n){return n(function(){I4(e)&&j4(t)})}function I4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function j4(t){var e=Xr(t,1);e!==null&&er(e,t,1,-1)}function Aw(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ac,lastRenderedState:t},e.queue=t,t=t.dispatch=R5.bind(null,Ye,t),[e.memoizedState,t]}function Tc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P4(){return Hn().memoizedState}function $d(t,e,n,r){var s=fr();Ye.flags|=t,s.memoizedState=Tc(1|e,n,void 0,r===void 0?null:r)}function Af(t,e,n,r){var s=Hn();r=r===void 0?null:r;var i=void 0;if(mt!==null){var o=mt.memoizedState;if(i=o.destroy,r!==null&&Gg(r,o.deps)){s.memoizedState=Tc(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=Tc(1|e,n,i,r)}function Tw(t,e){return $d(8390656,8,t,e)}function Qg(t,e){return Af(2048,8,t,e)}function D4(t,e){return Af(4,2,t,e)}function R4(t,e){return Af(4,4,t,e)}function M4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O4(t,e,n){return n=n!=null?n.concat([t]):null,Af(4,4,M4.bind(null,e,t),n)}function Xg(){}function F4(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B4(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L4(t,e,n){return no&21?(rr(n,e)||(n=HC(),Ye.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pn=!0),t.memoizedState=n)}function P5(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=sm.transition;sm.transition={};try{t(!1),e()}finally{De=n,sm.transition=r}}function V4(){return Hn().memoizedState}function D5(t,e,n){var r=Ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U4(t))z4(e,n);else if(n=_4(t,e,n,r),n!==null){var s=sn();er(n,t,r,s),$4(n,e,r)}}function R5(t,e,n){var r=Ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U4(t))z4(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,rr(a,o)){var c=e.interleaved;c===null?(s.next=s,zg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=_4(t,e,s,r),n!==null&&(s=sn(),er(n,t,r,s),$4(n,e,r))}}function U4(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function z4(t,e){Jl=kh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tg(t,n)}}var Ih={readContext:$n,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},M5={readContext:$n,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:Tw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$d(4194308,4,M4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $d(4194308,4,t,e)},useInsertionEffect:function(t,e){return $d(4,2,t,e)},useMemo:function(t,e){var n=fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=D5.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:Aw,useDebugValue:Xg,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=Aw(!1),e=t[0];return t=P5.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=fr();if(qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Et===null)throw Error(Y(349));no&30||A4(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Tw(k4.bind(null,r,i,t),[t]),r.flags|=2048,Tc(9,T4.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fr(),e=Et.identifierPrefix;if(qe){var n=Vr,r=Lr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O5={readContext:$n,useCallback:F4,useContext:$n,useEffect:Qg,useImperativeHandle:O4,useInsertionEffect:D4,useLayoutEffect:R4,useMemo:B4,useReducer:im,useRef:P4,useState:function(){return im(Ac)},useDebugValue:Xg,useDeferredValue:function(t){var e=Hn();return L4(e,mt.memoizedState,t)},useTransition:function(){var t=im(Ac)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:S4,useSyncExternalStore:N4,useId:V4,unstable_isNewReconciler:!1},F5={readContext:$n,useCallback:F4,useContext:$n,useEffect:Qg,useImperativeHandle:O4,useInsertionEffect:D4,useLayoutEffect:R4,useMemo:B4,useReducer:om,useRef:P4,useState:function(){return om(Ac)},useDebugValue:Xg,useDeferredValue:function(t){var e=Hn();return mt===null?e.memoizedState=t:L4(e,mt.memoizedState,t)},useTransition:function(){var t=om(Ac)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:S4,useSyncExternalStore:N4,useId:V4,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tf={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),s=Ys(t),i=qr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gs(t,i,s),e!==null&&(er(e,t,s,r),Ud(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),s=Ys(t),i=qr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gs(t,i,s),e!==null&&(er(e,t,s,r),Ud(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=Ys(t),s=qr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gs(t,s,r),e!==null&&(er(e,t,r,n),Ud(e,t,r))}};function kw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wc(n,r)||!wc(s,i):!0}function H4(t,e,n){var r=!1,s=si,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=gn(e)?eo:Yt.current,r=e.contextTypes,i=(r=r!=null)?wa(t,s):si),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Iw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tf.enqueueReplaceState(e,e.state,null)}function rx(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$g(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=gn(e)?eo:Yt.current,s.context=wa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nx(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tf.enqueueReplaceState(s,s.state,null),Ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ca(t,e){try{var n="",r=e;do n+=dj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function am(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var B5=typeof WeakMap=="function"?WeakMap:Map;function W4(t,e,n){n=qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ph||(Ph=!0,mx=r),sx(t,e)},n}function q4(t,e,n){n=qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sx(t,e),typeof r!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new B5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=J5.bind(null,t,e,n),e.then(t,t))}function Pw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qr(-1,1),e.tag=2,Gs(n,e,1))),n.lanes|=1),t)}var L5=as.ReactCurrentOwner,pn=!1;function tn(t,e,n,r){e.child=t===null?b4(e,null,n,r):_a(e,t.child,n,r)}function Rw(t,e,n,r,s){n=n.render;var i=e.ref;return ca(e,s),r=Kg(t,e,n,r,i,s),n=Yg(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jr(t,e,s)):(qe&&n&&Og(e),e.flags|=1,tn(t,e,r,s),e.child)}function Mw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!iy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,G4(t,e,i,r,s)):(t=Gd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wc,n(o,r)&&t.ref===e.ref)return Jr(t,e,s)}return e.flags|=1,t=Qs(i,r),t.ref=e.ref,t.return=e,e.child=t}function G4(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wc(i,r)&&t.ref===e.ref)if(pn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,Jr(t,e,s)}return ix(t,e,n,r,s)}function K4(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(na,En),En|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(na,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Be(na,En),En|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Be(na,En),En|=r;return tn(t,e,s,n),e.child}function Y4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ix(t,e,n,r,s){var i=gn(n)?eo:Yt.current;return i=wa(e,i),ca(e,s),n=Kg(t,e,n,r,i,s),r=Yg(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jr(t,e,s)):(qe&&r&&Og(e),e.flags|=1,tn(t,e,n,s),e.child)}function Ow(t,e,n,r,s){if(gn(n)){var i=!0;_h(e)}else i=!1;if(ca(e,s),e.stateNode===null)Hd(t,e),H4(e,n,r),rx(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=gn(n)?eo:Yt.current,u=wa(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Iw(e,o,r,u),As=!1;var m=e.memoizedState;o.state=m,Ah(e,r,o,s),c=e.memoizedState,a!==r||m!==c||xn.current||As?(typeof d=="function"&&(nx(e,n,d,r),c=e.memoizedState),(a=As||kw(e,n,a,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,E4(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Yn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=$n(c):(c=gn(n)?eo:Yt.current,c=wa(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==c)&&Iw(e,o,r,c),As=!1,m=e.memoizedState,o.state=m,Ah(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||xn.current||As?(typeof p=="function"&&(nx(e,n,p,r),x=e.memoizedState),(u=As||kw(e,n,u,r,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ox(t,e,n,r,i,s)}function ox(t,e,n,r,s,i){Y4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&bw(e,n,!1),Jr(t,e,i);r=e.stateNode,L5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_a(e,t.child,null,i),e.child=_a(e,null,a,i)):tn(t,e,a,i),e.memoizedState=r.state,s&&bw(e,n,!0),e.child}function Q4(t){var e=t.stateNode;e.pendingContext?ww(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ww(t,e.context,!1),Hg(t,e.containerInfo)}function Fw(t,e,n,r,s){return ba(),Bg(s),e.flags|=256,tn(t,e,n,r),e.child}var ax={dehydrated:null,treeContext:null,retryLane:0};function lx(t){return{baseLanes:t,cachePool:null,transitions:null}}function X4(t,e,n){var r=e.pendingProps,s=Ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Ke,s&1),t===null)return ex(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jf(o,r,0,null),t=Yi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lx(n),e.memoizedState=ax,t):Jg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return V5(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Qs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Qs(a,i):(i=Yi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ax,r}return i=t.child,t=i.sibling,r=Qs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jg(t,e){return e=jf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cd(t,e,n,r){return r!==null&&Bg(r),_a(e,t.child,null,n),t=Jg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function V5(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=am(Error(Y(422))),cd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jf({mode:"visible",children:r.children},s,0,null),i=Yi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_a(e,t.child,null,o),e.child.memoizedState=lx(o),e.memoizedState=ax,i);if(!(e.mode&1))return cd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=am(i,r,void 0),cd(t,e,o,r)}if(a=(o&t.childLanes)!==0,pn||a){if(r=Et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xr(t,s),er(r,t,s,-1))}return sy(),r=am(Error(Y(421))),cd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Z5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Sn=qs(s.nextSibling),Tn=e,qe=!0,Xn=null,t!==null&&(On[Fn++]=Lr,On[Fn++]=Vr,On[Fn++]=to,Lr=t.id,Vr=t.overflow,to=e),e=Jg(e,r.children),e.flags|=4096,e)}function Bw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tx(t.return,e,n)}function lm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function J4(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tn(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bw(t,n,e);else if(t.tag===19)Bw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Th(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Th(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lm(e,!0,n,null,i);break;case"together":lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Qs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U5(t,e,n){switch(e.tag){case 3:Q4(e),ba();break;case 5:C4(e);break;case 1:gn(e.type)&&_h(e);break;case 4:Hg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Be(Sh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?X4(t,e,n):(Be(Ke,Ke.current&1),t=Jr(t,e,n),t!==null?t.sibling:null);Be(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return J4(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,K4(t,e,n)}return Jr(t,e,n)}var Z4,cx,eS,tS;Z4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cx=function(){};eS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$i(yr.current);var i=null;switch(n){case"input":s=jp(t,s),r=jp(t,r),i=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),i=[];break;case"textarea":s=Rp(t,s),r=Rp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wh)}Op(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};tS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cl(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function z5(t,e,n){var r=e.pendingProps;switch(Fg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return gn(e.type)&&bh(),Ut(e),null;case 3:return r=e.stateNode,Ea(),We(xn),We(Yt),qg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ad(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(gx(Xn),Xn=null))),cx(t,e),Ut(e),null;case 5:Wg(e);var s=$i(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)eS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ut(e),null}if(t=$i(yr.current),ad(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pr]=e,r[Ec]=i,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<Ll.length;s++)Ue(Ll[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":G1(r,i),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",r);break;case"textarea":Y1(r,i),Ue("invalid",r)}Op(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&od(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&od(r.textContent,a,t),s=["children",""+a]):fc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Ju(r),K1(r,i,!0);break;case"textarea":Ju(r),Q1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pr]=e,t[Ec]=r,Z4(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fp(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),s=r;break;case"iframe":case"object":case"embed":Ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ll.length;s++)Ue(Ll[s],t);s=r;break;case"source":Ue("error",t),s=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=r;break;case"details":Ue("toggle",t),s=r;break;case"input":G1(t,r),s=jp(t,r),Ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Y1(t,r),s=Rp(t,r),Ue("invalid",t);break;default:s=r}Op(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?PC(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&IC(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mc(t,c):typeof c=="number"&&mc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ue("scroll",t):c!=null&&_g(t,i,c,o))}switch(n){case"input":Ju(t),K1(t,r,!1);break;case"textarea":Ju(t),Q1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ri(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ia(t,!!r.multiple,i,!1):r.defaultValue!=null&&ia(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)tS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=$i(Sc.current),$i(yr.current),ad(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(i=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:od(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&od(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return Ut(e),null;case 13:if(We(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Sn!==null&&e.mode&1&&!(e.flags&128))v4(),ba(),e.flags|=98560,i=!1;else if(i=ad(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[pr]=e}else ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),i=!1}else Xn!==null&&(gx(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?xt===0&&(xt=3):sy())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Ea(),cx(t,e),t===null&&bc(e.stateNode.containerInfo),Ut(e),null;case 10:return Ug(e.type._context),Ut(e),null;case 17:return gn(e.type)&&bh(),Ut(e),null;case 19:if(We(Ke),i=e.memoizedState,i===null)return Ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Cl(i,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Th(t),o!==null){for(e.flags|=128,Cl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Ke,Ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>Sa&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Th(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return Ut(e),null}else 2*st()-i.renderingStartTime>Sa&&n!==1073741824&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=Ke.current,Be(Ke,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return ry(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function $5(t,e){switch(Fg(e),e.tag){case 1:return gn(e.type)&&bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(),We(xn),We(Yt),qg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wg(e),null;case 13:if(We(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ke),null;case 4:return Ea(),null;case 10:return Ug(e.type._context),null;case 22:case 23:return ry(),null;case 24:return null;default:return null}}var ud=!1,Wt=!1,H5=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function ux(t,e,n){try{n()}catch(r){et(t,e,r)}}var Lw=!1;function W5(t,e){if(Gp=gh,t=o4(),Mg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++d===r&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kp={focusedElem:t,selectionRange:n},gh=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,v=x.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?_:Yn(e.type,_),v);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(E){et(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return x=Lw,Lw=!1,x}function Zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ux(e,n,i)}s=s.next}while(s!==r)}}function kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nS(t){var e=t.alternate;e!==null&&(t.alternate=null,nS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[Ec],delete e[Xp],delete e[A5],delete e[T5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rS(t){return t.tag===5||t.tag===3||t.tag===4}function Vw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wh));else if(r!==4&&(t=t.child,t!==null))for(hx(t,e,n),t=t.sibling;t!==null;)hx(t,e,n),t=t.sibling}function fx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fx(t,e,n),t=t.sibling;t!==null;)fx(t,e,n),t=t.sibling}var It=null,Qn=!1;function ws(t,e,n){for(n=n.child;n!==null;)sS(t,e,n),n=n.sibling}function sS(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Wt||ta(n,e);case 6:var r=It,s=Qn;It=null,ws(t,e,n),It=r,Qn=s,It!==null&&(Qn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Qn?(t=It,n=n.stateNode,t.nodeType===8?tm(t.parentNode,n):t.nodeType===1&&tm(t,n),yc(t)):tm(It,n.stateNode));break;case 4:r=It,s=Qn,It=n.stateNode.containerInfo,Qn=!0,ws(t,e,n),It=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ux(n,e,o),s=s.next}while(s!==r)}ws(t,e,n);break;case 1:if(!Wt&&(ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}ws(t,e,n);break;case 21:ws(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,ws(t,e,n),Wt=r):ws(t,e,n);break;default:ws(t,e,n)}}function Uw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H5),e.forEach(function(r){var s=e6.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:It=a.stateNode,Qn=!1;break e;case 3:It=a.stateNode.containerInfo,Qn=!0;break e;case 4:It=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(It===null)throw Error(Y(160));sS(i,o,s),It=null,Qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){et(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iS(e,t),e=e.sibling}function iS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),ur(t),r&4){try{Zl(3,t,t.return),kf(3,t)}catch(_){et(t,t.return,_)}try{Zl(5,t,t.return)}catch(_){et(t,t.return,_)}}break;case 1:Kn(e,t),ur(t),r&512&&n!==null&&ta(n,n.return);break;case 5:if(Kn(e,t),ur(t),r&512&&n!==null&&ta(n,n.return),t.flags&32){var s=t.stateNode;try{mc(s,"")}catch(_){et(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&AC(s,i),Fp(a,o);var u=Fp(a,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?PC(s,f):d==="dangerouslySetInnerHTML"?IC(s,f):d==="children"?mc(s,f):_g(s,d,f,u)}switch(a){case"input":Pp(s,i);break;case"textarea":TC(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ia(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ia(s,!!i.multiple,i.defaultValue,!0):ia(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ec]=i}catch(_){et(t,t.return,_)}}break;case 6:if(Kn(e,t),ur(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){et(t,t.return,_)}}break;case 3:if(Kn(e,t),ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yc(e.containerInfo)}catch(_){et(t,t.return,_)}break;case 4:Kn(e,t),ur(t);break;case 13:Kn(e,t),ur(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ty=st())),r&4&&Uw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(u=Wt)||d,Kn(e,t),Wt=u):Kn(e,t),ur(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ne=t,d=t.child;d!==null;){for(f=ne=d;ne!==null;){switch(m=ne,p=m.child,m.tag){case 0:case 11:case 14:case 15:Zl(4,m,m.return);break;case 1:ta(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(_){et(r,n,_)}}break;case 5:ta(m,m.return);break;case 22:if(m.memoizedState!==null){$w(f);continue}}p!==null?(p.return=m,ne=p):$w(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=jC("display",o))}catch(_){et(t,t.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){et(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Kn(e,t),ur(t),r&4&&Uw(t);break;case 21:break;default:Kn(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rS(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(mc(s,""),r.flags&=-33);var i=Vw(t);fx(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Vw(t);hx(t,a,o);break;default:throw Error(Y(161))}}catch(c){et(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q5(t,e,n){ne=t,oS(t)}function oS(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ud;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Wt;a=ud;var u=Wt;if(ud=o,(Wt=c)&&!u)for(ne=s;ne!==null;)o=ne,c=o.child,o.tag===22&&o.memoizedState!==null?Hw(s):c!==null?(c.return=o,ne=c):Hw(s);for(;i!==null;)ne=i,oS(i),i=i.sibling;ne=s,ud=a,Wt=u}zw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):zw(t)}}function zw(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Nw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&yc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Wt||e.flags&512&&dx(e)}catch(m){et(e,e.return,m)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function $w(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Hw(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kf(4,e)}catch(c){et(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){et(e,s,c)}}var i=e.return;try{dx(e)}catch(c){et(e,i,c)}break;case 5:var o=e.return;try{dx(e)}catch(c){et(e,o,c)}}}catch(c){et(e,e.return,c)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var G5=Math.ceil,jh=as.ReactCurrentDispatcher,Zg=as.ReactCurrentOwner,Un=as.ReactCurrentBatchConfig,Ae=0,Et=null,ct=null,Dt=0,En=0,na=fi(0),xt=0,kc=null,ro=0,If=0,ey=0,ec=null,hn=null,ty=0,Sa=1/0,Mr=null,Ph=!1,mx=null,Ks=null,dd=!1,Ms=null,Dh=0,tc=0,px=null,Wd=-1,qd=0;function sn(){return Ae&6?st():Wd!==-1?Wd:Wd=st()}function Ys(t){return t.mode&1?Ae&2&&Dt!==0?Dt&-Dt:I5.transition!==null?(qd===0&&(qd=HC()),qd):(t=De,t!==0||(t=window.event,t=t===void 0?16:XC(t.type)),t):1}function er(t,e,n,r){if(50<tc)throw tc=0,px=null,Error(Y(185));ru(t,n,r),(!(Ae&2)||t!==Et)&&(t===Et&&(!(Ae&2)&&(If|=n),xt===4&&ks(t,Dt)),yn(t,r),n===1&&Ae===0&&!(e.mode&1)&&(Sa=st()+500,Nf&&mi()))}function yn(t,e){var n=t.callbackNode;Ij(t,e);var r=xh(t,t===Et?Dt:0);if(r===0)n!==null&&Z1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Z1(n),e===1)t.tag===0?k5(Ww.bind(null,t)):x4(Ww.bind(null,t)),S5(function(){!(Ae&6)&&mi()}),n=null;else{switch(WC(r)){case 1:n=Ag;break;case 4:n=zC;break;case 16:n=ph;break;case 536870912:n=$C;break;default:n=ph}n=mS(n,aS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aS(t,e){if(Wd=-1,qd=0,Ae&6)throw Error(Y(327));var n=t.callbackNode;if(ua()&&t.callbackNode!==n)return null;var r=xh(t,t===Et?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rh(t,r);else{e=r;var s=Ae;Ae|=2;var i=cS();(Et!==t||Dt!==e)&&(Mr=null,Sa=st()+500,Ki(t,e));do try{Q5();break}catch(a){lS(t,a)}while(1);Vg(),jh.current=i,Ae=s,ct!==null?e=0:(Et=null,Dt=0,e=xt)}if(e!==0){if(e===2&&(s=zp(t),s!==0&&(r=s,e=xx(t,s))),e===1)throw n=kc,Ki(t,0),ks(t,r),yn(t,st()),n;if(e===6)ks(t,r);else{if(s=t.current.alternate,!(r&30)&&!K5(s)&&(e=Rh(t,r),e===2&&(i=zp(t),i!==0&&(r=i,e=xx(t,i))),e===1))throw n=kc,Ki(t,0),ks(t,r),yn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Oi(t,hn,Mr);break;case 3:if(ks(t,r),(r&130023424)===r&&(e=ty+500-st(),10<e)){if(xh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qp(Oi.bind(null,t,hn,Mr),e);break}Oi(t,hn,Mr);break;case 4:if(ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G5(r/1960))-r,10<r){t.timeoutHandle=Qp(Oi.bind(null,t,hn,Mr),r);break}Oi(t,hn,Mr);break;case 5:Oi(t,hn,Mr);break;default:throw Error(Y(329))}}}return yn(t,st()),t.callbackNode===n?aS.bind(null,t):null}function xx(t,e){var n=ec;return t.current.memoizedState.isDehydrated&&(Ki(t,e).flags|=256),t=Rh(t,e),t!==2&&(e=hn,hn=n,e!==null&&gx(e)),t}function gx(t){hn===null?hn=t:hn.push.apply(hn,t)}function K5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ks(t,e){for(e&=~ey,e&=~If,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Ww(t){if(Ae&6)throw Error(Y(327));ua();var e=xh(t,0);if(!(e&1))return yn(t,st()),null;var n=Rh(t,e);if(t.tag!==0&&n===2){var r=zp(t);r!==0&&(e=r,n=xx(t,r))}if(n===1)throw n=kc,Ki(t,0),ks(t,e),yn(t,st()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oi(t,hn,Mr),yn(t,st()),null}function ny(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Sa=st()+500,Nf&&mi())}}function so(t){Ms!==null&&Ms.tag===0&&!(Ae&6)&&ua();var e=Ae;Ae|=1;var n=Un.transition,r=De;try{if(Un.transition=null,De=1,t)return t()}finally{De=r,Un.transition=n,Ae=e,!(Ae&6)&&mi()}}function ry(){En=na.current,We(na)}function Ki(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,C5(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(Fg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:Ea(),We(xn),We(Yt),qg();break;case 5:Wg(r);break;case 4:Ea();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:Ug(r.type._context);break;case 22:case 23:ry()}n=n.return}if(Et=t,ct=t=Qs(t.current,null),Dt=En=e,xt=0,kc=null,ey=If=ro=0,hn=ec=null,zi!==null){for(e=0;e<zi.length;e++)if(n=zi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zi=null}return t}function lS(t,e){do{var n=ct;try{if(Vg(),zd.current=Ih,kh){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}kh=!1}if(no=0,_t=mt=Ye=null,Jl=!1,Nc=0,Zg.current=null,n===null||n.return===null){xt=1,kc=e,ct=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Dt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Pw(o);if(p!==null){p.flags&=-257,Dw(p,o,a,i,e),p.mode&1&&jw(i,u,e),e=p,c=u;var x=e.updateQueue;if(x===null){var _=new Set;_.add(c),e.updateQueue=_}else x.add(c);break e}else{if(!(e&1)){jw(i,u,e),sy();break e}c=Error(Y(426))}}else if(qe&&a.mode&1){var v=Pw(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Dw(v,o,a,i,e),Bg(Ca(c,a));break e}}i=c=Ca(c,a),xt!==4&&(xt=2),ec===null?ec=[i]:ec.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=W4(i,c,e);Sw(i,S);break e;case 1:a=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ks===null||!Ks.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=q4(i,a,e);Sw(i,E);break e}}i=i.return}while(i!==null)}dS(n)}catch(T){e=T,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(1)}function cS(){var t=jh.current;return jh.current=Ih,t===null?Ih:t}function sy(){(xt===0||xt===3||xt===2)&&(xt=4),Et===null||!(ro&268435455)&&!(If&268435455)||ks(Et,Dt)}function Rh(t,e){var n=Ae;Ae|=2;var r=cS();(Et!==t||Dt!==e)&&(Mr=null,Ki(t,e));do try{Y5();break}catch(s){lS(t,s)}while(1);if(Vg(),Ae=n,jh.current=r,ct!==null)throw Error(Y(261));return Et=null,Dt=0,xt}function Y5(){for(;ct!==null;)uS(ct)}function Q5(){for(;ct!==null&&!bj();)uS(ct)}function uS(t){var e=fS(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?dS(t):ct=e,Zg.current=null}function dS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$5(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,ct=null;return}}else if(n=z5(n,e,En),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);xt===0&&(xt=5)}function Oi(t,e,n){var r=De,s=Un.transition;try{Un.transition=null,De=1,X5(t,e,n,r)}finally{Un.transition=s,De=r}return null}function X5(t,e,n,r){do ua();while(Ms!==null);if(Ae&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jj(t,i),t===Et&&(ct=Et=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dd||(dd=!0,mS(ph,function(){return ua(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var o=De;De=1;var a=Ae;Ae|=4,Zg.current=null,W5(t,n),iS(n,t),g5(Kp),gh=!!Gp,Kp=Gp=null,t.current=n,q5(n),_j(),Ae=a,De=o,Un.transition=i}else t.current=n;if(dd&&(dd=!1,Ms=t,Dh=s),i=t.pendingLanes,i===0&&(Ks=null),Sj(n.stateNode),yn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ph)throw Ph=!1,t=mx,mx=null,t;return Dh&1&&t.tag!==0&&ua(),i=t.pendingLanes,i&1?t===px?tc++:(tc=0,px=t):tc=0,mi(),null}function ua(){if(Ms!==null){var t=WC(Dh),e=Un.transition,n=De;try{if(Un.transition=null,De=16>t?16:t,Ms===null)var r=!1;else{if(t=Ms,Ms=null,Dh=0,Ae&6)throw Error(Y(331));var s=Ae;for(Ae|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(ne=u;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:Zl(8,d,i)}var f=d.child;if(f!==null)f.return=d,ne=f;else for(;ne!==null;){d=ne;var m=d.sibling,p=d.return;if(nS(d),d===u){ne=null;break}if(m!==null){m.return=p,ne=m;break}ne=p}}}var x=i.alternate;if(x!==null){var _=x.child;if(_!==null){x.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,ne=S;break e}ne=i.return}}var y=t.current;for(ne=y;ne!==null;){o=ne;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ne=b;else e:for(o=y;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kf(9,a)}}catch(T){et(a,a.return,T)}if(a===o){ne=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ne=E;break e}ne=a.return}}if(Ae=s,mi(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{De=n,Un.transition=e}}return!1}function qw(t,e,n){e=Ca(n,e),e=W4(t,e,1),t=Gs(t,e,1),e=sn(),t!==null&&(ru(t,1,e),yn(t,e))}function et(t,e,n){if(t.tag===3)qw(t,t,n);else for(;e!==null;){if(e.tag===3){qw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r))){t=Ca(n,t),t=q4(e,t,1),e=Gs(e,t,1),t=sn(),e!==null&&(ru(e,1,t),yn(e,t));break}}e=e.return}}function J5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Dt&n)===n&&(xt===4||xt===3&&(Dt&130023424)===Dt&&500>st()-ty?Ki(t,0):ey|=n),yn(t,e)}function hS(t,e){e===0&&(t.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var n=sn();t=Xr(t,e),t!==null&&(ru(t,e,n),yn(t,n))}function Z5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hS(t,n)}function e6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),hS(t,n)}var fS;fS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pn=!1,U5(t,e,n);pn=!!(t.flags&131072)}else pn=!1,qe&&e.flags&1048576&&g4(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hd(t,e),t=e.pendingProps;var s=wa(e,Yt.current);ca(e,n),s=Kg(null,e,r,t,s,n);var i=Yg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(i=!0,_h(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$g(e),s.updater=Tf,e.stateNode=s,s._reactInternals=e,rx(e,r,t,n),e=ox(null,e,r,!0,i,n)):(e.tag=0,qe&&i&&Og(e),tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=n6(r),t=Yn(r,t),s){case 0:e=ix(null,e,r,t,n);break e;case 1:e=Ow(null,e,r,t,n);break e;case 11:e=Rw(null,e,r,t,n);break e;case 14:e=Mw(null,e,r,Yn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),ix(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Ow(t,e,r,s,n);case 3:e:{if(Q4(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,E4(t,e),Ah(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ca(Error(Y(423)),e),e=Fw(t,e,r,n,s);break e}else if(r!==s){s=Ca(Error(Y(424)),e),e=Fw(t,e,r,n,s);break e}else for(Sn=qs(e.stateNode.containerInfo.firstChild),Tn=e,qe=!0,Xn=null,n=b4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ba(),r===s){e=Jr(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return C4(e),t===null&&ex(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yp(r,s)?o=null:i!==null&&Yp(r,i)&&(e.flags|=32),Y4(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&ex(e),null;case 13:return X4(t,e,n);case 4:return Hg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_a(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Rw(t,e,r,s,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Be(Sh,r._currentValue),r._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===s.children&&!xn.current){e=Jr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),tx(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ca(e,n),s=$n(s),r=r(s),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,s=Yn(r,e.pendingProps),s=Yn(r.type,s),Mw(t,e,r,s,n);case 15:return G4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Hd(t,e),e.tag=1,gn(r)?(t=!0,_h(e)):t=!1,ca(e,n),H4(e,r,s),rx(e,r,s,n),ox(null,e,r,!0,t,n);case 19:return J4(t,e,n);case 22:return K4(t,e,n)}throw Error(Y(156,e.tag))};function mS(t,e){return UC(t,e)}function t6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new t6(t,e,n,r)}function iy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n6(t){if(typeof t=="function")return iy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cg)return 11;if(t===Sg)return 14}return 2}function Qs(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")iy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qo:return Yi(n.children,s,i,e);case Eg:o=8,s|=8;break;case Ap:return t=Bn(12,n,e,s|2),t.elementType=Ap,t.lanes=i,t;case Tp:return t=Bn(13,n,e,s),t.elementType=Tp,t.lanes=i,t;case kp:return t=Bn(19,n,e,s),t.elementType=kp,t.lanes=i,t;case CC:return jf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _C:o=10;break e;case EC:o=9;break e;case Cg:o=11;break e;case Sg:o=14;break e;case Ns:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yi(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function jf(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=CC,t.lanes=n,t.stateNode={isHidden:!1},t}function cm(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function um(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r6(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function oy(t,e,n,r,s,i,o,a,c){return t=new r6(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$g(i),t}function s6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pS(t){if(!t)return si;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(gn(n))return p4(t,n,e)}return e}function xS(t,e,n,r,s,i,o,a,c){return t=oy(n,r,!0,t,s,i,o,a,c),t.context=pS(null),n=t.current,r=sn(),s=Ys(n),i=qr(r,s),i.callback=e??null,Gs(n,i,s),t.current.lanes=s,ru(t,s,r),yn(t,r),t}function Pf(t,e,n,r){var s=e.current,i=sn(),o=Ys(s);return n=pS(n),e.context===null?e.context=n:e.pendingContext=n,e=qr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gs(s,e,o),t!==null&&(er(t,s,o,i),Ud(t,s,o)),o}function Mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ay(t,e){Gw(t,e),(t=t.alternate)&&Gw(t,e)}function i6(){return null}var gS=typeof reportError=="function"?reportError:function(t){console.error(t)};function ly(t){this._internalRoot=t}Df.prototype.render=ly.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Pf(t,e,null,null)};Df.prototype.unmount=ly.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){Pf(null,t,null,null)}),e[Qr]=null}};function Df(t){this._internalRoot=t}Df.prototype.unstable_scheduleHydration=function(t){if(t){var e=KC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ts.length&&e!==0&&e<Ts[n].priority;n++);Ts.splice(n,0,t),n===0&&QC(t)}};function cy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kw(){}function o6(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Mh(o);i.call(u)}}var o=xS(e,r,t,0,null,!1,!1,"",Kw);return t._reactRootContainer=o,t[Qr]=o.current,bc(t.nodeType===8?t.parentNode:t),so(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Mh(c);a.call(u)}}var c=oy(t,0,!1,null,null,!1,!1,"",Kw);return t._reactRootContainer=c,t[Qr]=c.current,bc(t.nodeType===8?t.parentNode:t),so(function(){Pf(e,c,n,r)}),c}function Mf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Mh(o);a.call(c)}}Pf(e,o,t,s)}else o=o6(n,e,t,s,r);return Mh(o)}qC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&(Tg(e,n|1),yn(e,st()),!(Ae&6)&&(Sa=st()+500,mi()))}break;case 13:so(function(){var r=Xr(t,1);if(r!==null){var s=sn();er(r,t,1,s)}}),ay(t,1)}};kg=function(t){if(t.tag===13){var e=Xr(t,134217728);if(e!==null){var n=sn();er(e,t,134217728,n)}ay(t,134217728)}};GC=function(t){if(t.tag===13){var e=Ys(t),n=Xr(t,e);if(n!==null){var r=sn();er(n,t,e,r)}ay(t,e)}};KC=function(){return De};YC=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Lp=function(t,e,n){switch(e){case"input":if(Pp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Sf(r);if(!s)throw Error(Y(90));NC(r),Pp(r,s)}}}break;case"textarea":TC(t,n);break;case"select":e=n.value,e!=null&&ia(t,!!n.multiple,e,!1)}};MC=ny;OC=so;var a6={usingClientEntryPoint:!1,Events:[iu,Qo,Sf,DC,RC,ny]},Sl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l6={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:as.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LC(t),t===null?null:t.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||i6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{bf=hd.inject(l6),gr=hd}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a6;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cy(e))throw Error(Y(200));return s6(t,e,null,n)};Pn.createRoot=function(t,e){if(!cy(t))throw Error(Y(299));var n=!1,r="",s=gS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=oy(t,1,!1,null,null,n,!1,r,s),t[Qr]=e.current,bc(t.nodeType===8?t.parentNode:t),new ly(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=LC(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return so(t)};Pn.hydrate=function(t,e,n){if(!Rf(e))throw Error(Y(200));return Mf(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!cy(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xS(e,null,t,1,n??null,s,!1,i,o),t[Qr]=e.current,bc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Df(e)};Pn.render=function(t,e,n){if(!Rf(e))throw Error(Y(200));return Mf(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!Rf(t))throw Error(Y(40));return t._reactRootContainer?(so(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};Pn.unstable_batchedUpdates=ny;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Mf(t,e,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function yS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yS)}catch(t){console.error(t)}}yS(),yC.exports=Pn;var c6=yC.exports,Yw=c6;Sp.createRoot=Yw.createRoot,Sp.hydrateRoot=Yw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ic.apply(this,arguments)}var Os;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Os||(Os={}));const Qw="popstate";function u6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return yx("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Oh(s)}return h6(e,n,null,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d6(){return Math.random().toString(36).substr(2,8)}function Xw(t,e){return{usr:t.state,key:t.key,idx:e}}function yx(t,e,n,r){return n===void 0&&(n=null),Ic({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ha(e):e,{state:n,key:e&&e.key||r||d6()})}function Oh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ha(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function h6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Os.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ic({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Os.Pop;let v=d(),S=v==null?null:v-u;u=v,c&&c({action:a,location:_.location,delta:S})}function m(v,S){a=Os.Push;let y=yx(_.location,v,S);n&&n(y,v),u=d()+1;let b=Xw(y,u),E=_.createHref(y);try{o.pushState(b,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}i&&c&&c({action:a,location:_.location,delta:1})}function p(v,S){a=Os.Replace;let y=yx(_.location,v,S);n&&n(y,v),u=d();let b=Xw(y,u),E=_.createHref(y);o.replaceState(b,"",E),i&&c&&c({action:a,location:_.location,delta:0})}function x(v){let S=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Oh(v);return y=y.replace(/ $/,"%20"),ot(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let _={get action(){return a},get location(){return t(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Qw,f),c=v,()=>{s.removeEventListener(Qw,f),c=null}},createHref(v){return e(s,v)},createURL:x,encodeLocation(v){let S=x(v);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:p,go(v){return o.go(v)}};return _}var Jw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jw||(Jw={}));function f6(t,e,n){return n===void 0&&(n="/"),m6(t,e,n,!1)}function m6(t,e,n,r){let s=typeof e=="string"?Ha(e):e,i=uy(s.pathname||"/",n);if(i==null)return null;let o=wS(t);p6(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=N6(i);a=C6(o[c],u,r)}return a}function wS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ot(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Xs([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),wS(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:_6(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of bS(i.path))s(i,o,c)}),e}function bS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bS(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function p6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const x6=/^:[\w-]+$/,g6=3,y6=2,v6=1,w6=10,b6=-2,Zw=t=>t==="*";function _6(t,e){let n=t.split("/"),r=n.length;return n.some(Zw)&&(r+=b6),e&&(r+=y6),n.filter(s=>!Zw(s)).reduce((s,i)=>s+(x6.test(i)?g6:i===""?v6:w6),r)}function E6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function C6(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=eb({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=eb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Xs([i,f.pathname]),pathnameBase:I6(Xs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Xs([i,f.pathnameBase]))}return o}function eb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=S6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let _=a[f]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const x=a[f];return p&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function S6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function N6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function A6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ha(t):t;return{pathname:n?n.startsWith("/")?n:T6(n,e):e,search:j6(r),hash:P6(s)}}function T6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dy(t,e){let n=k6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ha(t):(s=Ic({},t),ot(!s.pathname||!s.pathname.includes("?"),dm("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),dm("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),dm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let c=A6(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Xs=t=>t.join("/").replace(/\/\/+/g,"/"),I6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),j6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function D6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _S=["post","put","patch","delete"];new Set(_S);const R6=["get",..._S];new Set(R6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}const fy=O.createContext(null),M6=O.createContext(null),pi=O.createContext(null),Of=O.createContext(null),xi=O.createContext({outlet:null,matches:[],isDataRoute:!1}),ES=O.createContext(null);function O6(t,e){let{relative:n}=e===void 0?{}:e;Wa()||ot(!1);let{basename:r,navigator:s}=O.useContext(pi),{hash:i,pathname:o,search:a}=SS(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Xs([r,o])),s.createHref({pathname:c,search:a,hash:i})}function Wa(){return O.useContext(Of)!=null}function vo(){return Wa()||ot(!1),O.useContext(Of).location}function CS(t){O.useContext(pi).static||O.useLayoutEffect(t)}function Ff(){let{isDataRoute:t}=O.useContext(xi);return t?Y6():F6()}function F6(){Wa()||ot(!1);let t=O.useContext(fy),{basename:e,future:n,navigator:r}=O.useContext(pi),{matches:s}=O.useContext(xi),{pathname:i}=vo(),o=JSON.stringify(dy(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return CS(()=>{a.current=!0}),O.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=hy(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Xs([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,i,t])}function SS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(pi),{matches:s}=O.useContext(xi),{pathname:i}=vo(),o=JSON.stringify(dy(s,r.v7_relativeSplatPath));return O.useMemo(()=>hy(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function B6(t,e){return L6(t,e)}function L6(t,e,n,r){Wa()||ot(!1);let{navigator:s}=O.useContext(pi),{matches:i}=O.useContext(xi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=vo(),d;if(e){var f;let v=typeof e=="string"?Ha(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||ot(!1),d=v}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=f6(t,{pathname:p}),_=H6(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Xs([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Xs([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&_?O.createElement(Of.Provider,{value:{location:jc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Os.Pop}},_):_}function V6(){let t=K6(),e=D6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,i)}const U6=O.createElement(V6,null);class z6 extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(xi.Provider,{value:this.props.routeContext},O.createElement(ES.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $6(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(fy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(xi.Provider,{value:e},r)}function H6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||ot(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let p,x=!1,_=null,v=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||U6,c&&(u<0&&m===0?(Q6("route-fallback",!1),x=!0,v=null):u===m&&(x=!0,v=f.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,m+1)),y=()=>{let b;return p?b=_:x?b=v:f.route.Component?b=O.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,O.createElement($6,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?O.createElement(z6,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):y()},null)}var NS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NS||{}),Fh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fh||{});function W6(t){let e=O.useContext(fy);return e||ot(!1),e}function q6(t){let e=O.useContext(M6);return e||ot(!1),e}function G6(t){let e=O.useContext(xi);return e||ot(!1),e}function AS(t){let e=G6(),n=e.matches[e.matches.length-1];return n.route.id||ot(!1),n.route.id}function K6(){var t;let e=O.useContext(ES),n=q6(Fh.UseRouteError),r=AS(Fh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Y6(){let{router:t}=W6(NS.UseNavigateStable),e=AS(Fh.UseNavigateStable),n=O.useRef(!1);return CS(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,jc({fromRouteId:e},i)))},[t,e])}const tb={};function Q6(t,e,n){!e&&!tb[t]&&(tb[t]=!0)}function X6(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function jr(t){let{to:e,replace:n,state:r,relative:s}=t;Wa()||ot(!1);let{future:i,static:o}=O.useContext(pi),{matches:a}=O.useContext(xi),{pathname:c}=vo(),u=Ff(),d=hy(e,dy(a,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return O.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function kt(t){ot(!1)}function J6(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Os.Pop,navigator:i,static:o=!1,future:a}=t;Wa()&&ot(!1);let c=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:c,navigator:i,static:o,future:jc({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Ha(r));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:x="default"}=r,_=O.useMemo(()=>{let v=uy(d,c);return v==null?null:{location:{pathname:v,search:f,hash:m,state:p,key:x},navigationType:s}},[c,d,f,m,p,x,s]);return _==null?null:O.createElement(pi.Provider,{value:u},O.createElement(Of.Provider,{children:n,value:_}))}function Z6(t){let{children:e,location:n}=t;return B6(vx(e),n)}new Promise(()=>{});function vx(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,vx(r.props.children,i));return}r.type!==kt&&ot(!1),!r.props.index||!r.props.children||ot(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vx(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wx(){return wx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wx.apply(this,arguments)}function e3(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function t3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n3(t,e){return t.button===0&&(!e||e==="_self")&&!t3(t)}function bx(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function r3(t,e){let n=bx(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const s3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i3="6";try{window.__reactRouterVersion=i3}catch{}const o3="startTransition",nb=JI[o3];function a3(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=u6({window:s,v5Compat:!0}));let o=i.current,[a,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=O.useCallback(f=>{u&&nb?nb(()=>c(f)):c(f)},[c,u]);return O.useLayoutEffect(()=>o.listen(d),[o,d]),O.useEffect(()=>X6(r),[r]),O.createElement(J6,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const l3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,se=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=e3(e,s3),{basename:p}=O.useContext(pi),x,_=!1;if(typeof u=="string"&&c3.test(u)&&(x=u,l3))try{let b=new URL(window.location.href),E=u.startsWith("//")?new URL(b.protocol+u):new URL(u),T=uy(E.pathname,p);E.origin===b.origin&&T!=null?u=T+E.search+E.hash:_=!0}catch{}let v=O6(u,{relative:s}),S=u3(u,{replace:o,state:a,target:c,preventScrollReset:d,relative:s,viewTransition:f});function y(b){r&&r(b),b.defaultPrevented||S(b)}return O.createElement("a",wx({},m,{href:x||v,onClick:_||i?r:y,ref:n,target:c}))});var rb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rb||(rb={}));var sb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sb||(sb={}));function u3(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=Ff(),u=vo(),d=SS(t,{relative:o});return O.useCallback(f=>{if(n3(f,n)){f.preventDefault();let m=r!==void 0?r:Oh(u)===Oh(d);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,d,r,s,n,t,i,o,a])}function d3(t){let e=O.useRef(bx(t)),n=O.useRef(!1),r=vo(),s=O.useMemo(()=>r3(r.search,n.current?null:e.current),[r.search]),i=Ff(),o=O.useCallback((a,c)=>{const u=bx(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,c)},[i,s]);return[s,o]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},h3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;c||(p=64,o||(m=64)),r.push(n[d],n[f],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new f3;const m=i<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m3=function(t){const e=TS(t);return kS.encodeByteArray(e,!0)},Bh=function(t){return m3(t).replace(/\./g,"")},IS=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=()=>p3().__FIREBASE_DEFAULTS__,g3=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IS(t[1]);return e&&JSON.parse(e)},Bf=()=>{try{return x3()||g3()||y3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jS=t=>{var e,n;return(n=(e=Bf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},v3=t=>{const e=jS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PS=()=>{var t;return(t=Bf())===null||t===void 0?void 0:t.config},DS=t=>{var e;return(e=Bf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Bh(JSON.stringify(n)),Bh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function E3(){var t;const e=(t=Bf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function S3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N3(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A3(){return!E3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MS(){try{return typeof indexedDB=="object"}catch{return!1}}function OS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function T3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3="FirebaseError";class or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k3,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wo.prototype.create)}}class wo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I3(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new or(s,a,r)}}function I3(t,e){return t.replace(j3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const j3=/\{\$([^}]+)}/g;function P3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ib(i)&&ib(o)){if(!Pc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ib(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function D3(t,e){const n=new R3(t,e);return n.subscribe.bind(n)}class R3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hm),s.error===void 0&&(s.error=hm),s.complete===void 0&&(s.complete=hm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=1e3,F3=2,B3=4*60*60*1e3,L3=.5;function ob(t,e=O3,n=F3){const r=e*Math.pow(n,t),s=Math.round(L3*r*(Math.random()-.5)*2);return Math.min(B3,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new w3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z3(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U3(t){return t===Fi?void 0:t}function z3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const H3={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},W3=_e.INFO,q3={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},G3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=q3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lf{constructor(e){this.name=e,this._logLevel=W3,this._logHandler=G3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const K3=(t,e)=>e.some(n=>t instanceof n);let ab,lb;function Y3(){return ab||(ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q3(){return lb||(lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,_x=new WeakMap,BS=new WeakMap,fm=new WeakMap,my=new WeakMap;function X3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Js(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FS.set(n,t)}).catch(()=>{}),my.set(e,t),e}function J3(t){if(_x.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_x.set(t,e)}let Ex={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _x.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z3(t){Ex=t(Ex)}function eP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mm(this),e,...n);return BS.set(r,e.sort?e.sort():[e]),Js(r)}:Q3().includes(t)?function(...e){return t.apply(mm(this),e),Js(FS.get(this))}:function(...e){return Js(t.apply(mm(this),e))}}function tP(t){return typeof t=="function"?eP(t):(t instanceof IDBTransaction&&J3(t),K3(t,Y3())?new Proxy(t,Ex):t)}function Js(t){if(t instanceof IDBRequest)return X3(t);if(fm.has(t))return fm.get(t);const e=tP(t);return e!==t&&(fm.set(t,e),my.set(e,t)),e}const mm=t=>my.get(t);function LS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Js(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Js(o.result),c.oldVersion,c.newVersion,Js(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nP=["get","getKey","getAll","getAllKeys","count"],rP=["put","add","delete","clear"],pm=new Map;function cb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nP.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return pm.set(e,i),i}Z3(t=>({...t,get:(e,n,r)=>cb(e,n)||t.get(e,n,r),has:(e,n)=>!!cb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cx="@firebase/app",ub="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Lf("@firebase/app"),oP="@firebase/app-compat",aP="@firebase/analytics-compat",lP="@firebase/analytics",cP="@firebase/app-check-compat",uP="@firebase/app-check",dP="@firebase/auth",hP="@firebase/auth-compat",fP="@firebase/database",mP="@firebase/data-connect",pP="@firebase/database-compat",xP="@firebase/functions",gP="@firebase/functions-compat",yP="@firebase/installations",vP="@firebase/installations-compat",wP="@firebase/messaging",bP="@firebase/messaging-compat",_P="@firebase/performance",EP="@firebase/performance-compat",CP="@firebase/remote-config",SP="@firebase/remote-config-compat",NP="@firebase/storage",AP="@firebase/storage-compat",TP="@firebase/firestore",kP="@firebase/vertexai-preview",IP="@firebase/firestore-compat",jP="firebase",PP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="[DEFAULT]",DP={[Cx]:"fire-core",[oP]:"fire-core-compat",[lP]:"fire-analytics",[aP]:"fire-analytics-compat",[uP]:"fire-app-check",[cP]:"fire-app-check-compat",[dP]:"fire-auth",[hP]:"fire-auth-compat",[fP]:"fire-rtdb",[mP]:"fire-data-connect",[pP]:"fire-rtdb-compat",[xP]:"fire-fn",[gP]:"fire-fn-compat",[yP]:"fire-iid",[vP]:"fire-iid-compat",[wP]:"fire-fcm",[bP]:"fire-fcm-compat",[_P]:"fire-perf",[EP]:"fire-perf-compat",[CP]:"fire-rc",[SP]:"fire-rc-compat",[NP]:"fire-gcs",[AP]:"fire-gcs-compat",[TP]:"fire-fst",[IP]:"fire-fst-compat",[kP]:"fire-vertex","fire-js":"fire-js",[jP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,RP=new Map,Nx=new Map;function db(t,e){try{t.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Er(t){const e=t.name;if(Nx.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Nx.set(e,t);for(const n of Lh.values())db(n,t);for(const n of RP.values())db(n,t);return!0}function bo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new wo("app","Firebase",MP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=PP;function VS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sx,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Zs.create("bad-app-name",{appName:String(s)});if(n||(n=PS()),!n)throw Zs.create("no-options");const i=Lh.get(s);if(i){if(Pc(n,i.options)&&Pc(r,i.config))return i;throw Zs.create("duplicate-app",{appName:s})}const o=new $3(s);for(const c of Nx.values())o.addComponent(c);const a=new OP(n,r,o);return Lh.set(s,a),a}function py(t=Sx){const e=Lh.get(t);if(!e&&t===Sx&&PS())return VS();if(!e)throw Zs.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let s=(r=DP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(a.join(" "));return}Er(new sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="firebase-heartbeat-database",BP=1,Dc="firebase-heartbeat-store";let xm=null;function US(){return xm||(xm=LS(FP,BP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zs.create("idb-open",{originalErrorMessage:t.message})})),xm}async function LP(t){try{const n=(await US()).transaction(Dc),r=await n.objectStore(Dc).get(zS(t));return await n.done,r}catch(e){if(e instanceof or)Zr.warn(e.message);else{const n=Zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(n.message)}}}async function hb(t,e){try{const r=(await US()).transaction(Dc,"readwrite");await r.objectStore(Dc).put(e,zS(t)),await r.done}catch(n){if(n instanceof or)Zr.warn(n.message);else{const r=Zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zr.warn(r.message)}}}function zS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=1024,UP=30*24*60*60*1e3;class zP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=UP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fb(),{heartbeatsToSend:r,unsentEntries:s}=$P(this._heartbeatsCache.heartbeats),i=Bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Zr.warn(n),""}}}function fb(){return new Date().toISOString().substring(0,10)}function $P(t,e=VP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MS()?OS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mb(t){return Bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){Er(new sr("platform-logger",e=>new sP(e),"PRIVATE")),Er(new sr("heartbeat",e=>new zP(e),"PRIVATE")),zn(Cx,ub,t),zn(Cx,ub,"esm2017"),zn("fire-js","")}WP("");var pb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,$S;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,g){function A(){}A.prototype=g.prototype,w.D=g.prototype,w.prototype=new A,w.prototype.constructor=w,w.C=function(N,j,D){for(var P=Array(arguments.length-2),M=2;M<arguments.length;M++)P[M-2]=arguments[M];return g.prototype[j].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,A){A||(A=0);var N=Array(16);if(typeof g=="string")for(var j=0;16>j;++j)N[j]=g.charCodeAt(A++)|g.charCodeAt(A++)<<8|g.charCodeAt(A++)<<16|g.charCodeAt(A++)<<24;else for(j=0;16>j;++j)N[j]=g[A++]|g[A++]<<8|g[A++]<<16|g[A++]<<24;g=w.g[0],A=w.g[1],j=w.g[2];var D=w.g[3],P=g+(D^A&(j^D))+N[0]+3614090360&4294967295;g=A+(P<<7&4294967295|P>>>25),P=D+(j^g&(A^j))+N[1]+3905402710&4294967295,D=g+(P<<12&4294967295|P>>>20),P=j+(A^D&(g^A))+N[2]+606105819&4294967295,j=D+(P<<17&4294967295|P>>>15),P=A+(g^j&(D^g))+N[3]+3250441966&4294967295,A=j+(P<<22&4294967295|P>>>10),P=g+(D^A&(j^D))+N[4]+4118548399&4294967295,g=A+(P<<7&4294967295|P>>>25),P=D+(j^g&(A^j))+N[5]+1200080426&4294967295,D=g+(P<<12&4294967295|P>>>20),P=j+(A^D&(g^A))+N[6]+2821735955&4294967295,j=D+(P<<17&4294967295|P>>>15),P=A+(g^j&(D^g))+N[7]+4249261313&4294967295,A=j+(P<<22&4294967295|P>>>10),P=g+(D^A&(j^D))+N[8]+1770035416&4294967295,g=A+(P<<7&4294967295|P>>>25),P=D+(j^g&(A^j))+N[9]+2336552879&4294967295,D=g+(P<<12&4294967295|P>>>20),P=j+(A^D&(g^A))+N[10]+4294925233&4294967295,j=D+(P<<17&4294967295|P>>>15),P=A+(g^j&(D^g))+N[11]+2304563134&4294967295,A=j+(P<<22&4294967295|P>>>10),P=g+(D^A&(j^D))+N[12]+1804603682&4294967295,g=A+(P<<7&4294967295|P>>>25),P=D+(j^g&(A^j))+N[13]+4254626195&4294967295,D=g+(P<<12&4294967295|P>>>20),P=j+(A^D&(g^A))+N[14]+2792965006&4294967295,j=D+(P<<17&4294967295|P>>>15),P=A+(g^j&(D^g))+N[15]+1236535329&4294967295,A=j+(P<<22&4294967295|P>>>10),P=g+(j^D&(A^j))+N[1]+4129170786&4294967295,g=A+(P<<5&4294967295|P>>>27),P=D+(A^j&(g^A))+N[6]+3225465664&4294967295,D=g+(P<<9&4294967295|P>>>23),P=j+(g^A&(D^g))+N[11]+643717713&4294967295,j=D+(P<<14&4294967295|P>>>18),P=A+(D^g&(j^D))+N[0]+3921069994&4294967295,A=j+(P<<20&4294967295|P>>>12),P=g+(j^D&(A^j))+N[5]+3593408605&4294967295,g=A+(P<<5&4294967295|P>>>27),P=D+(A^j&(g^A))+N[10]+38016083&4294967295,D=g+(P<<9&4294967295|P>>>23),P=j+(g^A&(D^g))+N[15]+3634488961&4294967295,j=D+(P<<14&4294967295|P>>>18),P=A+(D^g&(j^D))+N[4]+3889429448&4294967295,A=j+(P<<20&4294967295|P>>>12),P=g+(j^D&(A^j))+N[9]+568446438&4294967295,g=A+(P<<5&4294967295|P>>>27),P=D+(A^j&(g^A))+N[14]+3275163606&4294967295,D=g+(P<<9&4294967295|P>>>23),P=j+(g^A&(D^g))+N[3]+4107603335&4294967295,j=D+(P<<14&4294967295|P>>>18),P=A+(D^g&(j^D))+N[8]+1163531501&4294967295,A=j+(P<<20&4294967295|P>>>12),P=g+(j^D&(A^j))+N[13]+2850285829&4294967295,g=A+(P<<5&4294967295|P>>>27),P=D+(A^j&(g^A))+N[2]+4243563512&4294967295,D=g+(P<<9&4294967295|P>>>23),P=j+(g^A&(D^g))+N[7]+1735328473&4294967295,j=D+(P<<14&4294967295|P>>>18),P=A+(D^g&(j^D))+N[12]+2368359562&4294967295,A=j+(P<<20&4294967295|P>>>12),P=g+(A^j^D)+N[5]+4294588738&4294967295,g=A+(P<<4&4294967295|P>>>28),P=D+(g^A^j)+N[8]+2272392833&4294967295,D=g+(P<<11&4294967295|P>>>21),P=j+(D^g^A)+N[11]+1839030562&4294967295,j=D+(P<<16&4294967295|P>>>16),P=A+(j^D^g)+N[14]+4259657740&4294967295,A=j+(P<<23&4294967295|P>>>9),P=g+(A^j^D)+N[1]+2763975236&4294967295,g=A+(P<<4&4294967295|P>>>28),P=D+(g^A^j)+N[4]+1272893353&4294967295,D=g+(P<<11&4294967295|P>>>21),P=j+(D^g^A)+N[7]+4139469664&4294967295,j=D+(P<<16&4294967295|P>>>16),P=A+(j^D^g)+N[10]+3200236656&4294967295,A=j+(P<<23&4294967295|P>>>9),P=g+(A^j^D)+N[13]+681279174&4294967295,g=A+(P<<4&4294967295|P>>>28),P=D+(g^A^j)+N[0]+3936430074&4294967295,D=g+(P<<11&4294967295|P>>>21),P=j+(D^g^A)+N[3]+3572445317&4294967295,j=D+(P<<16&4294967295|P>>>16),P=A+(j^D^g)+N[6]+76029189&4294967295,A=j+(P<<23&4294967295|P>>>9),P=g+(A^j^D)+N[9]+3654602809&4294967295,g=A+(P<<4&4294967295|P>>>28),P=D+(g^A^j)+N[12]+3873151461&4294967295,D=g+(P<<11&4294967295|P>>>21),P=j+(D^g^A)+N[15]+530742520&4294967295,j=D+(P<<16&4294967295|P>>>16),P=A+(j^D^g)+N[2]+3299628645&4294967295,A=j+(P<<23&4294967295|P>>>9),P=g+(j^(A|~D))+N[0]+4096336452&4294967295,g=A+(P<<6&4294967295|P>>>26),P=D+(A^(g|~j))+N[7]+1126891415&4294967295,D=g+(P<<10&4294967295|P>>>22),P=j+(g^(D|~A))+N[14]+2878612391&4294967295,j=D+(P<<15&4294967295|P>>>17),P=A+(D^(j|~g))+N[5]+4237533241&4294967295,A=j+(P<<21&4294967295|P>>>11),P=g+(j^(A|~D))+N[12]+1700485571&4294967295,g=A+(P<<6&4294967295|P>>>26),P=D+(A^(g|~j))+N[3]+2399980690&4294967295,D=g+(P<<10&4294967295|P>>>22),P=j+(g^(D|~A))+N[10]+4293915773&4294967295,j=D+(P<<15&4294967295|P>>>17),P=A+(D^(j|~g))+N[1]+2240044497&4294967295,A=j+(P<<21&4294967295|P>>>11),P=g+(j^(A|~D))+N[8]+1873313359&4294967295,g=A+(P<<6&4294967295|P>>>26),P=D+(A^(g|~j))+N[15]+4264355552&4294967295,D=g+(P<<10&4294967295|P>>>22),P=j+(g^(D|~A))+N[6]+2734768916&4294967295,j=D+(P<<15&4294967295|P>>>17),P=A+(D^(j|~g))+N[13]+1309151649&4294967295,A=j+(P<<21&4294967295|P>>>11),P=g+(j^(A|~D))+N[4]+4149444226&4294967295,g=A+(P<<6&4294967295|P>>>26),P=D+(A^(g|~j))+N[11]+3174756917&4294967295,D=g+(P<<10&4294967295|P>>>22),P=j+(g^(D|~A))+N[2]+718787259&4294967295,j=D+(P<<15&4294967295|P>>>17),P=A+(D^(j|~g))+N[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,w.g[2]=w.g[2]+j&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var A=g-this.blockSize,N=this.B,j=this.h,D=0;D<g;){if(j==0)for(;D<=A;)s(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<g;)if(N[j++]=w.charCodeAt(D++),j==this.blockSize){s(this,N),j=0;break}}else for(;D<g;)if(N[j++]=w[D++],j==this.blockSize){s(this,N),j=0;break}}this.h=j,this.o+=g},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var A=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=A&255,A/=256;for(this.u(w),w=Array(16),g=A=0;4>g;++g)for(var N=0;32>N;N+=8)w[A++]=this.g[g]>>>N&255;return w};function i(w,g){var A=a;return Object.prototype.hasOwnProperty.call(A,w)?A[w]:A[w]=g(w)}function o(w,g){this.h=g;for(var A=[],N=!0,j=w.length-1;0<=j;j--){var D=w[j]|0;N&&D==g||(A[j]=D,N=!1)}this.g=A}var a={};function c(w){return-128<=w&&128>w?i(w,function(g){return new o([g|0],0>g?-1:0)}):new o([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(0>w)return v(u(-w));for(var g=[],A=1,N=0;w>=A;N++)g[N]=w/A|0,A*=4294967296;return new o(g,0)}function d(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return v(d(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(g,8)),N=f,j=0;j<w.length;j+=8){var D=Math.min(8,w.length-j),P=parseInt(w.substring(j,j+D),g);8>D?(D=u(Math.pow(g,D)),N=N.j(D).add(u(P))):(N=N.j(A),N=N.add(u(P)))}return N}var f=c(0),m=c(1),p=c(16777216);t=o.prototype,t.m=function(){if(_(this))return-v(this).m();for(var w=0,g=1,A=0;A<this.g.length;A++){var N=this.i(A);w+=(0<=N?N:4294967296+N)*g,g*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x(this))return"0";if(_(this))return"-"+v(this).toString(w);for(var g=u(Math.pow(w,6)),A=this,N="";;){var j=E(A,g).g;A=S(A,j.j(g));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(w);if(A=j,x(A))return D+N;for(;6>D.length;)D="0"+D;N=D+N}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function x(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function _(w){return w.h==-1}t.l=function(w){return w=S(this,w),_(w)?-1:x(w)?0:1};function v(w){for(var g=w.g.length,A=[],N=0;N<g;N++)A[N]=~w.g[N];return new o(A,~w.h).add(m)}t.abs=function(){return _(this)?v(this):this},t.add=function(w){for(var g=Math.max(this.g.length,w.g.length),A=[],N=0,j=0;j<=g;j++){var D=N+(this.i(j)&65535)+(w.i(j)&65535),P=(D>>>16)+(this.i(j)>>>16)+(w.i(j)>>>16);N=P>>>16,D&=65535,P&=65535,A[j]=P<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function S(w,g){return w.add(v(g))}t.j=function(w){if(x(this)||x(w))return f;if(_(this))return _(w)?v(this).j(v(w)):v(v(this).j(w));if(_(w))return v(this.j(v(w)));if(0>this.l(p)&&0>w.l(p))return u(this.m()*w.m());for(var g=this.g.length+w.g.length,A=[],N=0;N<2*g;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<w.g.length;j++){var D=this.i(N)>>>16,P=this.i(N)&65535,M=w.i(j)>>>16,$=w.i(j)&65535;A[2*N+2*j]+=P*$,y(A,2*N+2*j),A[2*N+2*j+1]+=D*$,y(A,2*N+2*j+1),A[2*N+2*j+1]+=P*M,y(A,2*N+2*j+1),A[2*N+2*j+2]+=D*M,y(A,2*N+2*j+2)}for(N=0;N<g;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=g;N<2*g;N++)A[N]=0;return new o(A,0)};function y(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function b(w,g){this.g=w,this.h=g}function E(w,g){if(x(g))throw Error("division by zero");if(x(w))return new b(f,f);if(_(w))return g=E(v(w),g),new b(v(g.g),v(g.h));if(_(g))return g=E(w,v(g)),new b(v(g.g),g.h);if(30<w.g.length){if(_(w)||_(g))throw Error("slowDivide_ only works with positive integers.");for(var A=m,N=g;0>=N.l(w);)A=T(A),N=T(N);var j=k(A,1),D=k(N,1);for(N=k(N,2),A=k(A,2);!x(N);){var P=D.add(N);0>=P.l(w)&&(j=j.add(A),D=P),N=k(N,1),A=k(A,1)}return g=S(w,j.j(g)),new b(j,g)}for(j=f;0<=w.l(g);){for(A=Math.max(1,Math.floor(w.m()/g.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),D=u(A),P=D.j(g);_(P)||0<P.l(w);)A-=N,D=u(A),P=D.j(g);x(D)&&(D=m),j=j.add(D),w=S(w,P)}return new b(j,w)}t.A=function(w){return E(this,w).h},t.and=function(w){for(var g=Math.max(this.g.length,w.g.length),A=[],N=0;N<g;N++)A[N]=this.i(N)&w.i(N);return new o(A,this.h&w.h)},t.or=function(w){for(var g=Math.max(this.g.length,w.g.length),A=[],N=0;N<g;N++)A[N]=this.i(N)|w.i(N);return new o(A,this.h|w.h)},t.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),A=[],N=0;N<g;N++)A[N]=this.i(N)^w.i(N);return new o(A,this.h^w.h)};function T(w){for(var g=w.g.length+1,A=[],N=0;N<g;N++)A[N]=w.i(N)<<1|w.i(N-1)>>>31;return new o(A,w.h)}function k(w,g){var A=g>>5;g%=32;for(var N=w.g.length-A,j=[],D=0;D<N;D++)j[D]=0<g?w.i(D+A)>>>g|w.i(D+A+1)<<32-g:w.i(D+A);return new o(j,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$S=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Qi=o}).apply(typeof pb<"u"?pb:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HS,Vl,WS,Kd,Ax,qS,GS,KS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,C,I){return h==Array.prototype||h==Object.prototype||(h[C]=I.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var C=0;C<h.length;++C){var I=h[C];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(h,C){if(C)e:{var I=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var B=h[R];if(!(B in I))break e;I=I[B]}h=h[h.length-1],R=I[h],C=C(R),C!=R&&C!=null&&e(I,h,{configurable:!0,writable:!0,value:C})}}function i(h,C){h instanceof String&&(h+="");var I=0,R=!1,B={next:function(){if(!R&&I<h.length){var U=I++;return{value:C(U,h[U]),done:!1}}return R=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(h){return h||function(){return i(this,function(C,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(h){var C=typeof h;return C=C!="object"?C:h?Array.isArray(h)?"array":C:"null",C=="array"||C=="object"&&typeof h.length=="number"}function u(h){var C=typeof h;return C=="object"&&h!=null||C=="function"}function d(h,C,I){return h.call.apply(h.bind,arguments)}function f(h,C,I){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,R),h.apply(C,B)}}return function(){return h.apply(C,arguments)}}function m(h,C,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function p(h,C){var I=Array.prototype.slice.call(arguments,1);return function(){var R=I.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function x(h,C){function I(){}I.prototype=C.prototype,h.aa=C.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(R,B,U){for(var Z=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)Z[Me-2]=arguments[Me];return C.prototype[B].apply(R,Z)}}function _(h){const C=h.length;if(0<C){const I=Array(C);for(let R=0;R<C;R++)I[R]=h[R];return I}return[]}function v(h,C){for(let I=1;I<arguments.length;I++){const R=arguments[I];if(c(R)){const B=h.length||0,U=R.length||0;h.length=B+U;for(let Z=0;Z<U;Z++)h[B+Z]=R[Z]}else h.push(R)}}class S{constructor(C,I){this.i=C,this.j=I,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(h){return/^[\s\xa0]*$/.test(h)}function b(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function E(h){return E[" "](h),h}E[" "]=function(){};var T=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function k(h,C,I){for(const R in h)C.call(I,h[R],R,h)}function w(h,C){for(const I in h)C.call(void 0,h[I],I,h)}function g(h){const C={};for(const I in h)C[I]=h[I];return C}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,C){let I,R;for(let B=1;B<arguments.length;B++){R=arguments[B];for(I in R)h[I]=R[I];for(let U=0;U<A.length;U++)I=A[U],Object.prototype.hasOwnProperty.call(R,I)&&(h[I]=R[I])}}function j(h){var C=1;h=h.split(":");const I=[];for(;0<C&&h.length;)I.push(h.shift()),C--;return h.length&&I.push(h.join(":")),I}function D(h){a.setTimeout(()=>{throw h},0)}function P(){var h=Q;let C=null;return h.g&&(C=h.g,h.g=h.g.next,h.g||(h.h=null),C.next=null),C}class M{constructor(){this.h=this.g=null}add(C,I){const R=$.get();R.set(C,I),this.h?this.h.next=R:this.g=R,this.h=R}}var $=new S(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(C,I){this.h=C,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let X,H=!1,Q=new M,J=()=>{const h=a.Promise.resolve(void 0);X=()=>{h.then(V)}};var V=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(I){D(I)}var C=$;C.j(h),100>C.h&&(C.h++,h.next=C.g,C.g=h)}H=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(h,C){this.type=h,this.g=this.target=C,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,C=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,C),a.removeEventListener("test",I,C)}catch{}return h}();function oe(h,C){if(L.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=C,C=h.relatedTarget){if(T){e:{try{E(C.nodeName);var B=!0;break e}catch{}B=!1}B||(C=null)}}else I=="mouseover"?C=h.fromElement:I=="mouseout"&&(C=h.toElement);this.relatedTarget=C,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:le[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&oe.aa.h.call(this)}}x(oe,L);var le={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),ge=0;function bi(h,C,I,R,B){this.listener=h,this.proxy=null,this.src=C,this.type=I,this.capture=!!R,this.ha=B,this.key=++ge,this.da=this.fa=!1}function qn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function cs(h){this.src=h,this.g={},this.h=0}cs.prototype.add=function(h,C,I,R,B){var U=h.toString();h=this.g[U],h||(h=this.g[U]=[],this.h++);var Z=Jt(h,C,R,B);return-1<Z?(C=h[Z],I||(C.fa=!1)):(C=new bi(C,this.src,U,!!R,B),C.fa=I,h.push(C)),C};function Nr(h,C){var I=C.type;if(I in h.g){var R=h.g[I],B=Array.prototype.indexOf.call(R,C,void 0),U;(U=0<=B)&&Array.prototype.splice.call(R,B,1),U&&(qn(C),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Jt(h,C,I,R){for(var B=0;B<h.length;++B){var U=h[B];if(!U.da&&U.listener==C&&U.capture==!!I&&U.ha==R)return B}return-1}var Nt="closure_lm_"+(1e6*Math.random()|0),us={};function ds(h,C,I,R,B){if(R&&R.once)return To(h,C,I,R,B);if(Array.isArray(C)){for(var U=0;U<C.length;U++)ds(h,C[U],I,R,B);return null}return I=cr(I),h&&h[Le]?h.K(C,I,u(R)?!!R.capture:!!R,B):_i(h,C,I,!1,R,B)}function _i(h,C,I,R,B,U){if(!C)throw Error("Invalid event type");var Z=u(B)?!!B.capture:!!B,Me=fs(h);if(Me||(h[Nt]=Me=new cs(h)),I=Me.add(C,I,R,Z,U),I.proxy)return I;if(R=Ei(),I.proxy=R,R.src=h,R.listener=I,h.addEventListener)W||(B=Z),B===void 0&&(B=!1),h.addEventListener(C.toString(),R,B);else if(h.attachEvent)h.attachEvent(en(C.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ei(){function h(I){return C.call(h.src,h.listener,I)}const C=lr;return h}function To(h,C,I,R,B){if(Array.isArray(C)){for(var U=0;U<C.length;U++)To(h,C[U],I,R,B);return null}return I=cr(I),h&&h[Le]?h.L(C,I,u(R)?!!R.capture:!!R,B):_i(h,C,I,!0,R,B)}function hs(h,C,I,R,B){if(Array.isArray(C))for(var U=0;U<C.length;U++)hs(h,C[U],I,R,B);else R=u(R)?!!R.capture:!!R,I=cr(I),h&&h[Le]?(h=h.i,C=String(C).toString(),C in h.g&&(U=h.g[C],I=Jt(U,I,R,B),-1<I&&(qn(U[I]),Array.prototype.splice.call(U,I,1),U.length==0&&(delete h.g[C],h.h--)))):h&&(h=fs(h))&&(C=h.g[C.toString()],h=-1,C&&(h=Jt(C,I,R,B)),(I=-1<h?C[h]:null)&&Zt(I))}function Zt(h){if(typeof h!="number"&&h&&!h.da){var C=h.src;if(C&&C[Le])Nr(C.i,h);else{var I=h.type,R=h.proxy;C.removeEventListener?C.removeEventListener(I,R,h.capture):C.detachEvent?C.detachEvent(en(I),R):C.addListener&&C.removeListener&&C.removeListener(R),(I=fs(C))?(Nr(I,h),I.h==0&&(I.src=null,C[Nt]=null)):qn(h)}}}function en(h){return h in us?us[h]:us[h]="on"+h}function lr(h,C){if(h.da)h=!0;else{C=new oe(C,this);var I=h.listener,R=h.ha||h.src;h.fa&&Zt(h),h=I.call(R,C)}return h}function fs(h){return h=h[Nt],h instanceof cs?h:null}var ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function cr(h){return typeof h=="function"?h:(h[ko]||(h[ko]=function(C){return h.handleEvent(C)}),h[ko])}function Je(){F.call(this),this.i=new cs(this),this.M=this,this.F=null}x(Je,F),Je.prototype[Le]=!0,Je.prototype.removeEventListener=function(h,C,I,R){hs(this,h,C,I,R)};function At(h,C){var I,R=h.F;if(R)for(I=[];R;R=R.F)I.push(R);if(h=h.M,R=C.type||C,typeof C=="string")C=new L(C,h);else if(C instanceof L)C.target=C.target||h;else{var B=C;C=new L(R,h),N(C,B)}if(B=!0,I)for(var U=I.length-1;0<=U;U--){var Z=C.g=I[U];B=Ci(Z,R,!0,C)&&B}if(Z=C.g=h,B=Ci(Z,R,!0,C)&&B,B=Ci(Z,R,!1,C)&&B,I)for(U=0;U<I.length;U++)Z=C.g=I[U],B=Ci(Z,R,!1,C)&&B}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var h=this.i,C;for(C in h.g){for(var I=h.g[C],R=0;R<I.length;R++)qn(I[R]);delete h.g[C],h.h--}}this.F=null},Je.prototype.K=function(h,C,I,R){return this.i.add(String(h),C,!1,I,R)},Je.prototype.L=function(h,C,I,R){return this.i.add(String(h),C,!0,I,R)};function Ci(h,C,I,R){if(C=h.i.g[String(C)],!C)return!0;C=C.concat();for(var B=!0,U=0;U<C.length;++U){var Z=C[U];if(Z&&!Z.da&&Z.capture==I){var Me=Z.listener,Tt=Z.ha||Z.src;Z.fa&&Nr(h.i,Z),B=Me.call(Tt,R)!==!1&&B}}return B&&!R.defaultPrevented}function tl(h,C,I){if(typeof h=="function")I&&(h=m(h,I));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:a.setTimeout(h,C||0)}function Ar(h){h.g=tl(()=>{h.g=null,h.i&&(h.i=!1,Ar(h))},h.l);const C=h.h;h.h=null,h.m.apply(null,C)}class Si extends F{constructor(C,I){super(),this.m=C,this.l=I,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(h){F.call(this),this.h=h,this.g={}}x(Ni,F);var nl=[];function rl(h){k(h.g,function(C,I){this.g.hasOwnProperty(I)&&Zt(C)},h),h.g={}}Ni.prototype.N=function(){Ni.aa.N.call(this),rl(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sl=a.JSON.stringify,S0=a.JSON.parse,Pu=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function il(){}il.prototype.h=null;function ol(h){return h.h||(h.h=h.i())}function Du(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function al(){L.call(this,"d")}x(al,L);function ll(){L.call(this,"c")}x(ll,L);var Tr={},cl=null;function Io(){return cl=cl||new Je}Tr.La="serverreachability";function Ru(h){L.call(this,Tr.La,h)}x(Ru,L);function ps(h){const C=Io();At(C,new Ru(C))}Tr.STAT_EVENT="statevent";function Mu(h,C){L.call(this,Tr.STAT_EVENT,h),this.stat=C}x(Mu,L);function wt(h){const C=Io();At(C,new Mu(C,h))}Tr.Ma="timingevent";function Ft(h,C){L.call(this,Tr.Ma,h),this.size=C}x(Ft,L);function un(h,C){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},C)}function xs(){this.g=!0}xs.prototype.xa=function(){this.g=!1};function N0(h,C,I,R,B,U){h.info(function(){if(h.g)if(U)for(var Z="",Me=U.split("&"),Tt=0;Tt<Me.length;Tt++){var Te=Me[Tt].split("=");if(1<Te.length){var Bt=Te[0];Te=Te[1];var Lt=Bt.split("_");Z=2<=Lt.length&&Lt[1]=="type"?Z+(Bt+"="+Te+"&"):Z+(Bt+"=redacted&")}}else Z=null;else Z=U;return"XMLHTTP REQ ("+R+") [attempt "+B+"]: "+C+`
`+I+`
`+Z})}function dI(h,C,I,R,B,U,Z){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+B+"]: "+C+`
`+I+`
`+U+" "+Z})}function jo(h,C,I,R){h.info(function(){return"XMLHTTP TEXT ("+C+"): "+fI(h,I)+(R?" "+R:"")})}function hI(h,C){h.info(function(){return"TIMEOUT: "+C})}xs.prototype.info=function(){};function fI(h,C){if(!h.g)return C;if(!C)return null;try{var I=JSON.parse(C);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var R=I[h];if(!(2>R.length)){var B=R[1];if(Array.isArray(B)&&!(1>B.length)){var U=B[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Z=1;Z<B.length;Z++)B[Z]=""}}}}return sl(I)}catch{return C}}var Ou={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},n1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},A0;function Fu(){}x(Fu,il),Fu.prototype.g=function(){return new XMLHttpRequest},Fu.prototype.i=function(){return{}},A0=new Fu;function gs(h,C,I,R){this.j=h,this.i=C,this.l=I,this.R=R||1,this.U=new Ni(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new r1}function r1(){this.i=null,this.g="",this.h=!1}var s1={},T0={};function k0(h,C,I){h.L=1,h.v=Uu(kr(C)),h.m=I,h.P=!0,i1(h,null)}function i1(h,C){h.F=Date.now(),Bu(h),h.A=kr(h.v);var I=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),v1(I.i,"t",R),h.C=0,I=h.j.J,h.h=new r1,h.g=F1(h.j,I?C:null,!h.m),0<h.O&&(h.M=new Si(m(h.Y,h,h.g),h.O)),C=h.U,I=h.g,R=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(nl[0]=B.toString()),B=nl);for(var U=0;U<B.length;U++){var Z=ds(I,B[U],R||C.handleEvent,!1,C.h||C);if(!Z)break;C.g[Z.key]=Z}C=h.H?g(h.H):{},h.m?(h.u||(h.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,C)):(h.u="GET",h.g.ea(h.A,h.u,null,C)),ps(),N0(h.i,h.u,h.A,h.l,h.R,h.m)}gs.prototype.ca=function(h){h=h.target;const C=this.M;C&&Ir(h)==3?C.j():this.Y(h)},gs.prototype.Y=function(h){try{if(h==this.g)e:{const Lt=Ir(this.g);var C=this.g.Ba();const Ro=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||N1(this.g)))){this.J||Lt!=4||C==7||(C==8||0>=Ro?ps(3):ps(2)),I0(this);var I=this.g.Z();this.X=I;t:if(o1(this)){var R=N1(this.g);h="";var B=R.length,U=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),ul(this);var Z="";break t}this.h.i=new a.TextDecoder}for(C=0;C<B;C++)this.h.h=!0,h+=this.h.i.decode(R[C],{stream:!(U&&C==B-1)});R.length=0,this.h.g+=h,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=I==200,dI(this.i,this.u,this.A,this.l,this.R,Lt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,Tt=this.g;if((Me=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Me)){var Te=Me;break t}}Te=null}if(I=Te)jo(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,j0(this,I);else{this.o=!1,this.s=3,wt(12),Ai(this),ul(this);break e}}if(this.P){I=!0;let Gn;for(;!this.J&&this.C<Z.length;)if(Gn=mI(this,Z),Gn==T0){Lt==4&&(this.s=4,wt(14),I=!1),jo(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==s1){this.s=4,wt(15),jo(this.i,this.l,Z,"[Invalid Chunk]"),I=!1;break}else jo(this.i,this.l,Gn,null),j0(this,Gn);if(o1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||Z.length!=0||this.h.h||(this.s=1,wt(16),I=!1),this.o=this.o&&I,!I)jo(this.i,this.l,Z,"[Invalid Chunked Response]"),Ai(this),ul(this);else if(0<Z.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),F0(Bt),Bt.M=!0,wt(11))}}else jo(this.i,this.l,Z,null),j0(this,Z);Lt==4&&Ai(this),this.o&&!this.J&&(Lt==4?D1(this.j,this):(this.o=!1,Bu(this)))}else jI(this.g),I==400&&0<Z.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Ai(this),ul(this)}}}catch{}finally{}};function o1(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function mI(h,C){var I=h.C,R=C.indexOf(`
`,I);return R==-1?T0:(I=Number(C.substring(I,R)),isNaN(I)?s1:(R+=1,R+I>C.length?T0:(C=C.slice(R,R+I),h.C=R+I,C)))}gs.prototype.cancel=function(){this.J=!0,Ai(this)};function Bu(h){h.S=Date.now()+h.I,a1(h,h.I)}function a1(h,C){if(h.B!=null)throw Error("WatchDog timer not null");h.B=un(m(h.ba,h),C)}function I0(h){h.B&&(a.clearTimeout(h.B),h.B=null)}gs.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(hI(this.i,this.A),this.L!=2&&(ps(),wt(17)),Ai(this),this.s=2,ul(this)):a1(this,this.S-h)};function ul(h){h.j.G==0||h.J||D1(h.j,h)}function Ai(h){I0(h);var C=h.M;C&&typeof C.ma=="function"&&C.ma(),h.M=null,rl(h.U),h.g&&(C=h.g,h.g=null,C.abort(),C.ma())}function j0(h,C){try{var I=h.j;if(I.G!=0&&(I.g==h||P0(I.h,h))){if(!h.K&&P0(I.h,h)&&I.G==3){try{var R=I.Da.g.parse(C)}catch{R=null}if(Array.isArray(R)&&R.length==3){var B=R;if(B[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Gu(I),Wu(I);else break e;O0(I),wt(18)}}else I.za=B[1],0<I.za-I.T&&37500>B[2]&&I.F&&I.v==0&&!I.C&&(I.C=un(m(I.Za,I),6e3));if(1>=u1(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else ki(I,11)}else if((h.K||I.g==h)&&Gu(I),!y(C))for(B=I.Da.g.parse(C),C=0;C<B.length;C++){let Te=B[C];if(I.T=Te[0],Te=Te[1],I.G==2)if(Te[0]=="c"){I.K=Te[1],I.ia=Te[2];const Bt=Te[3];Bt!=null&&(I.la=Bt,I.j.info("VER="+I.la));const Lt=Te[4];Lt!=null&&(I.Aa=Lt,I.j.info("SVER="+I.Aa));const Ro=Te[5];Ro!=null&&typeof Ro=="number"&&0<Ro&&(R=1.5*Ro,I.L=R,I.j.info("backChannelRequestTimeoutMs_="+R)),R=I;const Gn=h.g;if(Gn){const Yu=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var U=R.h;U.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(D0(U,U.h),U.h=null))}if(R.D){const B0=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;B0&&(R.ya=B0,Ve(R.I,R.D,B0))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),R=I;var Z=h;if(R.qa=O1(R,R.J?R.ia:null,R.W),Z.K){d1(R.h,Z);var Me=Z,Tt=R.L;Tt&&(Me.I=Tt),Me.B&&(I0(Me),Bu(Me)),R.g=Z}else j1(R);0<I.i.length&&qu(I)}else Te[0]!="stop"&&Te[0]!="close"||ki(I,7);else I.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ki(I,7):M0(I):Te[0]!="noop"&&I.l&&I.l.ta(Te),I.v=0)}}ps(4)}catch{}}var pI=class{constructor(h,C){this.g=h,this.map=C}};function l1(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function c1(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function u1(h){return h.h?1:h.g?h.g.size:0}function P0(h,C){return h.h?h.h==C:h.g?h.g.has(C):!1}function D0(h,C){h.g?h.g.add(C):h.h=C}function d1(h,C){h.h&&h.h==C?h.h=null:h.g&&h.g.has(C)&&h.g.delete(C)}l1.prototype.cancel=function(){if(this.i=h1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function h1(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let C=h.i;for(const I of h.g.values())C=C.concat(I.D);return C}return _(h.i)}function xI(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var C=[],I=h.length,R=0;R<I;R++)C.push(h[R]);return C}C=[],I=0;for(R in h)C[I++]=h[R];return C}function gI(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var C=[];h=h.length;for(var I=0;I<h;I++)C.push(I);return C}C=[],I=0;for(const R in h)C[I++]=R;return C}}}function f1(h,C){if(h.forEach&&typeof h.forEach=="function")h.forEach(C,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,C,void 0);else for(var I=gI(h),R=xI(h),B=R.length,U=0;U<B;U++)C.call(void 0,R[U],I&&I[U],h)}var m1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yI(h,C){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var R=h[I].indexOf("="),B=null;if(0<=R){var U=h[I].substring(0,R);B=h[I].substring(R+1)}else U=h[I];C(U,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ti(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ti){this.h=h.h,Lu(this,h.j),this.o=h.o,this.g=h.g,Vu(this,h.s),this.l=h.l;var C=h.i,I=new fl;I.i=C.i,C.g&&(I.g=new Map(C.g),I.h=C.h),p1(this,I),this.m=h.m}else h&&(C=String(h).match(m1))?(this.h=!1,Lu(this,C[1]||"",!0),this.o=dl(C[2]||""),this.g=dl(C[3]||"",!0),Vu(this,C[4]),this.l=dl(C[5]||"",!0),p1(this,C[6]||"",!0),this.m=dl(C[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}Ti.prototype.toString=function(){var h=[],C=this.j;C&&h.push(hl(C,x1,!0),":");var I=this.g;return(I||C=="file")&&(h.push("//"),(C=this.o)&&h.push(hl(C,x1,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(hl(I,I.charAt(0)=="/"?bI:wI,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",hl(I,EI)),h.join("")};function kr(h){return new Ti(h)}function Lu(h,C,I){h.j=I?dl(C,!0):C,h.j&&(h.j=h.j.replace(/:$/,""))}function Vu(h,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);h.s=C}else h.s=null}function p1(h,C,I){C instanceof fl?(h.i=C,CI(h.i,h.h)):(I||(C=hl(C,_I)),h.i=new fl(C,h.h))}function Ve(h,C,I){h.i.set(C,I)}function Uu(h){return Ve(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function dl(h,C){return h?C?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function hl(h,C,I){return typeof h=="string"?(h=encodeURI(h).replace(C,vI),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vI(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var x1=/[#\/\?@]/g,wI=/[#\?:]/g,bI=/[#\?]/g,_I=/[#\?@]/g,EI=/#/g;function fl(h,C){this.h=this.g=null,this.i=h||null,this.j=!!C}function ys(h){h.g||(h.g=new Map,h.h=0,h.i&&yI(h.i,function(C,I){h.add(decodeURIComponent(C.replace(/\+/g," ")),I)}))}t=fl.prototype,t.add=function(h,C){ys(this),this.i=null,h=Po(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(C),this.h+=1,this};function g1(h,C){ys(h),C=Po(h,C),h.g.has(C)&&(h.i=null,h.h-=h.g.get(C).length,h.g.delete(C))}function y1(h,C){return ys(h),C=Po(h,C),h.g.has(C)}t.forEach=function(h,C){ys(this),this.g.forEach(function(I,R){I.forEach(function(B){h.call(C,B,R,this)},this)},this)},t.na=function(){ys(this);const h=Array.from(this.g.values()),C=Array.from(this.g.keys()),I=[];for(let R=0;R<C.length;R++){const B=h[R];for(let U=0;U<B.length;U++)I.push(C[R])}return I},t.V=function(h){ys(this);let C=[];if(typeof h=="string")y1(this,h)&&(C=C.concat(this.g.get(Po(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)C=C.concat(h[I])}return C},t.set=function(h,C){return ys(this),this.i=null,h=Po(this,h),y1(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[C]),this.h+=1,this},t.get=function(h,C){return h?(h=this.V(h),0<h.length?String(h[0]):C):C};function v1(h,C,I){g1(h,C),0<I.length&&(h.i=null,h.g.set(Po(h,C),_(I)),h.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],C=Array.from(this.g.keys());for(var I=0;I<C.length;I++){var R=C[I];const U=encodeURIComponent(String(R)),Z=this.V(R);for(R=0;R<Z.length;R++){var B=U;Z[R]!==""&&(B+="="+encodeURIComponent(String(Z[R]))),h.push(B)}}return this.i=h.join("&")};function Po(h,C){return C=String(C),h.j&&(C=C.toLowerCase()),C}function CI(h,C){C&&!h.j&&(ys(h),h.i=null,h.g.forEach(function(I,R){var B=R.toLowerCase();R!=B&&(g1(this,R),v1(this,B,I))},h)),h.j=C}function SI(h,C){const I=new xs;if(a.Image){const R=new Image;R.onload=p(vs,I,"TestLoadImage: loaded",!0,C,R),R.onerror=p(vs,I,"TestLoadImage: error",!1,C,R),R.onabort=p(vs,I,"TestLoadImage: abort",!1,C,R),R.ontimeout=p(vs,I,"TestLoadImage: timeout",!1,C,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else C(!1)}function NI(h,C){const I=new xs,R=new AbortController,B=setTimeout(()=>{R.abort(),vs(I,"TestPingServer: timeout",!1,C)},1e4);fetch(h,{signal:R.signal}).then(U=>{clearTimeout(B),U.ok?vs(I,"TestPingServer: ok",!0,C):vs(I,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(B),vs(I,"TestPingServer: error",!1,C)})}function vs(h,C,I,R,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),R(I)}catch{}}function AI(){this.g=new Pu}function TI(h,C,I){const R=I||"";try{f1(h,function(B,U){let Z=B;u(B)&&(Z=sl(B)),C.push(R+U+"="+encodeURIComponent(Z))})}catch(B){throw C.push(R+"type="+encodeURIComponent("_badmap")),B}}function zu(h){this.l=h.Ub||null,this.j=h.eb||!1}x(zu,il),zu.prototype.g=function(){return new $u(this.l,this.j)},zu.prototype.i=function(h){return function(){return h}}({});function $u(h,C){Je.call(this),this.D=h,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x($u,Je),t=$u.prototype,t.open=function(h,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=C,this.readyState=1,pl(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(C.body=h),(this.D||a).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ml(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pl(this)),this.g&&(this.readyState=3,pl(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;w1(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function w1(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var C=h.value?h.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!h.done}))&&(this.response=this.responseText+=C)}h.done?ml(this):pl(this),this.readyState==3&&w1(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ml(this))},t.Qa=function(h){this.g&&(this.response=h,ml(this))},t.ga=function(){this.g&&ml(this)};function ml(h){h.readyState=4,h.l=null,h.j=null,h.v=null,pl(h)}t.setRequestHeader=function(h,C){this.u.append(h,C)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],C=this.h.entries();for(var I=C.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=C.next();return h.join(`\r
`)};function pl(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function b1(h){let C="";return k(h,function(I,R){C+=R,C+=":",C+=I,C+=`\r
`}),C}function R0(h,C,I){e:{for(R in I){var R=!1;break e}R=!0}R||(I=b1(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):Ve(h,C,I))}function Ze(h){Je.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ze,Je);var kI=/^https?$/i,II=["POST","PUT"];t=Ze.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,C,I,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);C=C?C.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():A0.g(),this.v=this.o?ol(this.o):ol(A0),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(C,String(h),!0),this.B=!1}catch(U){_1(this,U);return}if(h=I||"",I=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var B in R)I.set(B,R[B]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const U of R.keys())I.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(I.keys()).find(U=>U.toLowerCase()=="content-type"),B=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(II,C,void 0))||R||B||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of I)this.g.setRequestHeader(U,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{S1(this),this.u=!0,this.g.send(h),this.u=!1}catch(U){_1(this,U)}};function _1(h,C){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=C,h.m=5,E1(h),Hu(h)}function E1(h){h.A||(h.A=!0,At(h,"complete"),At(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,At(this,"complete"),At(this,"abort"),Hu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hu(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?C1(this):this.bb())},t.bb=function(){C1(this)};function C1(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Ir(h)!=4||h.Z()!=2)){if(h.u&&Ir(h)==4)tl(h.Ea,0,h);else if(At(h,"readystatechange"),Ir(h)==4){h.h=!1;try{const Z=h.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var I;if(!(I=C)){var R;if(R=Z===0){var B=String(h.D).match(m1)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),R=!kI.test(B?B.toLowerCase():"")}I=R}if(I)At(h,"complete"),At(h,"success");else{h.m=6;try{var U=2<Ir(h)?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.Z()+"]",E1(h)}}finally{Hu(h)}}}}function Hu(h,C){if(h.g){S1(h);const I=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,C||At(h,"ready");try{I.onreadystatechange=R}catch{}}}function S1(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Ir(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var C=this.g.responseText;return h&&C.indexOf(h)==0&&(C=C.substring(h.length)),S0(C)}};function N1(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jI(h){const C={};h=(h.g&&2<=Ir(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(y(h[R]))continue;var I=j(h[R]);const B=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const U=C[B]||[];C[B]=U,U.push(I)}w(C,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(h,C,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||C}function A1(h){this.Aa=0,this.i=[],this.j=new xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xl("baseRetryDelayMs",5e3,h),this.cb=xl("retryDelaySeedMs",1e4,h),this.Wa=xl("forwardChannelMaxRetries",2,h),this.wa=xl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new l1(h&&h.concurrentRequestLimit),this.Da=new AI,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=A1.prototype,t.la=8,t.G=1,t.connect=function(h,C,I,R){wt(0),this.W=h,this.H=C||{},I&&R!==void 0&&(this.H.OSID=I,this.H.OAID=R),this.F=this.X,this.I=O1(this,null,this.W),qu(this)};function M0(h){if(T1(h),h.G==3){var C=h.U++,I=kr(h.I);if(Ve(I,"SID",h.K),Ve(I,"RID",C),Ve(I,"TYPE","terminate"),gl(h,I),C=new gs(h,h.j,C),C.L=2,C.v=Uu(kr(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(C.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=C.v,I=!0),I||(C.g=F1(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Bu(C)}M1(h)}function Wu(h){h.g&&(F0(h),h.g.cancel(),h.g=null)}function T1(h){Wu(h),h.u&&(a.clearTimeout(h.u),h.u=null),Gu(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function qu(h){if(!c1(h.h)&&!h.s){h.s=!0;var C=h.Ga;X||J(),H||(X(),H=!0),Q.add(C,h),h.B=0}}function PI(h,C){return u1(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=C.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=un(m(h.Ga,h,C),R1(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new gs(this,this.j,h);let U=this.o;if(this.S&&(U?(U=g(U),N(U,this.S)):U=this.S),this.m!==null||this.O||(B.H=U,U=null),this.P)e:{for(var C=0,I=0;I<this.i.length;I++){t:{var R=this.i[I];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(C+=R,4096<C){C=I;break e}if(C===4096||I===this.i.length-1){C=I+1;break e}}C=1e3}else C=1e3;C=I1(this,B,C),I=kr(this.I),Ve(I,"RID",h),Ve(I,"CVER",22),this.D&&Ve(I,"X-HTTP-Session-Id",this.D),gl(this,I),U&&(this.O?C="headers="+encodeURIComponent(String(b1(U)))+"&"+C:this.m&&R0(I,this.m,U)),D0(this.h,B),this.Ua&&Ve(I,"TYPE","init"),this.P?(Ve(I,"$req",C),Ve(I,"SID","null"),B.T=!0,k0(B,I,null)):k0(B,I,C),this.G=2}}else this.G==3&&(h?k1(this,h):this.i.length==0||c1(this.h)||k1(this))};function k1(h,C){var I;C?I=C.l:I=h.U++;const R=kr(h.I);Ve(R,"SID",h.K),Ve(R,"RID",I),Ve(R,"AID",h.T),gl(h,R),h.m&&h.o&&R0(R,h.m,h.o),I=new gs(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),C&&(h.i=C.D.concat(h.i)),C=I1(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),D0(h.h,I),k0(I,R,C)}function gl(h,C){h.H&&k(h.H,function(I,R){Ve(C,R,I)}),h.l&&f1({},function(I,R){Ve(C,R,I)})}function I1(h,C,I){I=Math.min(h.i.length,I);var R=h.l?m(h.l.Na,h.l,h):null;e:{var B=h.i;let U=-1;for(;;){const Z=["count="+I];U==-1?0<I?(U=B[0].g,Z.push("ofs="+U)):U=0:Z.push("ofs="+U);let Me=!0;for(let Tt=0;Tt<I;Tt++){let Te=B[Tt].g;const Bt=B[Tt].map;if(Te-=U,0>Te)U=Math.max(0,B[Tt].g-100),Me=!1;else try{TI(Bt,Z,"req"+Te+"_")}catch{R&&R(Bt)}}if(Me){R=Z.join("&");break e}}}return h=h.i.splice(0,I),C.D=h,R}function j1(h){if(!h.g&&!h.u){h.Y=1;var C=h.Fa;X||J(),H||(X(),H=!0),Q.add(C,h),h.v=0}}function O0(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=un(m(h.Fa,h),R1(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,P1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=un(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Wu(this),P1(this))};function F0(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function P1(h){h.g=new gs(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var C=kr(h.qa);Ve(C,"RID","rpc"),Ve(C,"SID",h.K),Ve(C,"AID",h.T),Ve(C,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ve(C,"TO",h.ja),Ve(C,"TYPE","xmlhttp"),gl(h,C),h.m&&h.o&&R0(C,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Uu(kr(C)),I.m=null,I.P=!0,i1(I,h)}t.Za=function(){this.C!=null&&(this.C=null,Wu(this),O0(this),wt(19))};function Gu(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function D1(h,C){var I=null;if(h.g==C){Gu(h),F0(h),h.g=null;var R=2}else if(P0(h.h,C))I=C.D,d1(h.h,C),R=1;else return;if(h.G!=0){if(C.o)if(R==1){I=C.m?C.m.length:0,C=Date.now()-C.F;var B=h.B;R=Io(),At(R,new Ft(R,I)),qu(h)}else j1(h);else if(B=C.s,B==3||B==0&&0<C.X||!(R==1&&PI(h,C)||R==2&&O0(h)))switch(I&&0<I.length&&(C=h.h,C.i=C.i.concat(I)),B){case 1:ki(h,5);break;case 4:ki(h,10);break;case 3:ki(h,6);break;default:ki(h,2)}}}function R1(h,C){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*C}function ki(h,C){if(h.j.info("Error code "+C),C==2){var I=m(h.fb,h),R=h.Xa;const B=!R;R=new Ti(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lu(R,"https"),Uu(R),B?SI(R.toString(),I):NI(R.toString(),I)}else wt(2);h.G=0,h.l&&h.l.sa(C),M1(h),T1(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function M1(h){if(h.G=0,h.ka=[],h.l){const C=h1(h.h);(C.length!=0||h.i.length!=0)&&(v(h.ka,C),v(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function O1(h,C,I){var R=I instanceof Ti?kr(I):new Ti(I);if(R.g!="")C&&(R.g=C+"."+R.g),Vu(R,R.s);else{var B=a.location;R=B.protocol,C=C?C+"."+B.hostname:B.hostname,B=+B.port;var U=new Ti(null);R&&Lu(U,R),C&&(U.g=C),B&&Vu(U,B),I&&(U.l=I),R=U}return I=h.D,C=h.ya,I&&C&&Ve(R,I,C),Ve(R,"VER",h.la),gl(h,R),R}function F1(h,C,I){if(C&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=h.Ca&&!h.pa?new Ze(new zu({eb:I})):new Ze(h.pa),C.Ha(h.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function B1(){}t=B1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ku(){}Ku.prototype.g=function(h,C){return new bn(h,C)};function bn(h,C){Je.call(this),this.g=new A1(C),this.l=h,this.h=C&&C.messageUrlParams||null,h=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(h?h["X-WebChannel-Content-Type"]=C.messageContentType:h={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(h?h["X-WebChannel-Client-Profile"]=C.va:h={"X-WebChannel-Client-Profile":C.va}),this.g.S=h,(h=C&&C.Sb)&&!y(h)&&(this.g.m=h),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,h=this.h,h!==null&&C in h&&(h=this.h,C in h&&delete h[C])),this.j=new Do(this)}x(bn,Je),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){M0(this.g)},bn.prototype.o=function(h){var C=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=sl(h),h=I);C.i.push(new pI(C.Ya++,h)),C.G==3&&qu(C)},bn.prototype.N=function(){this.g.l=null,delete this.j,M0(this.g),delete this.g,bn.aa.N.call(this)};function L1(h){al.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var C=h.__sm__;if(C){e:{for(const I in C){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,C=C!==null&&h in C?C[h]:void 0),this.data=C}else this.data=h}x(L1,al);function V1(){ll.call(this),this.status=1}x(V1,ll);function Do(h){this.g=h}x(Do,B1),Do.prototype.ua=function(){At(this.g,"a")},Do.prototype.ta=function(h){At(this.g,new L1(h))},Do.prototype.sa=function(h){At(this.g,new V1)},Do.prototype.ra=function(){At(this.g,"b")},Ku.prototype.createWebChannel=Ku.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,KS=function(){return new Ku},GS=function(){return Io()},qS=Tr,Ax={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ou.NO_ERROR=0,Ou.TIMEOUT=8,Ou.HTTP_ERROR=6,Kd=Ou,n1.COMPLETE="complete",WS=n1,Du.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Vl=Du,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,HS=Ze}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new Lf("@firebase/firestore");function Nl(){return io.logLevel}function re(t,...e){if(io.logLevel<=_e.DEBUG){const n=e.map(xy);io.debug(`Firestore (${Ga}): ${t}`,...n)}}function es(t,...e){if(io.logLevel<=_e.ERROR){const n=e.map(xy);io.error(`Firestore (${Ga}): ${t}`,...n)}}function Na(t,...e){if(io.logLevel<=_e.WARN){const n=e.map(xy);io.warn(`Firestore (${Ga}): ${t}`,...n)}}function xy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${Ga}) INTERNAL ASSERTION FAILED: `+t;throw es(e),new Error(e)}function Re(t,e){t||de()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class GP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KP{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new YS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Ht(e)}}class YP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new XP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ZP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Aa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new vt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new vt(0,0))}static max(){return new fe(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(),r===void 0?r=e.length-n:r>e.length-n&&de(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends Rc{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const eD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Rc{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return eD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ze.fromString(e))}static fromName(e){return new ie(ze.fromString(e).popFirst(5))}static empty(){return new ie(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ze(e.slice()))}}function tD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new ii(s,ie.empty(),e)}function nD(t){return new ii(t.readTime,t.key,-1)}class ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ii(fe.min(),ie.empty(),-1)}static max(){return new ii(fe.max(),ie.empty(),-1)}}function rD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==sD)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new K((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function oD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}gy.oe=-1;function Vf(t){return t==null}function Vh(t){return t===0&&1/t==-1/0}function aD(t){return typeof t=="number"&&Number.isInteger(t)&&!Vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,r,s,i){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yb(this.data.getIterator())}getIteratorFrom(e){return new yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Rt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new JS("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const lD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(Re(!!t),typeof t=="string"){let e=0;const n=lD.exec(t);if(Re(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oo(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vy(t){const e=t.mapValue.fields.__previous_value__;return yy(e)?vy(e):e}function Mc(t){const e=oi(t.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Oc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yy(t)?4:dD(t)?9007199254740991:uD(t)?10:11:de()}function Cr(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Mc(t).isEqual(Mc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=oi(s.timestampValue),a=oi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return oo(s.bytesValue).isEqual(oo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?Vh(o)===Vh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Aa(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(gb(o)!==gb(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Cr(o[c],a[c])))return!1;return!0}(t,e);default:return de()}}function Fc(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function Ta(t,e){if(t===e)return 0;const n=ao(t),r=ao(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=rt(i.integerValue||i.doubleValue),c=rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return vb(t.timestampValue,e.timestampValue);case 4:return vb(Mc(t),Mc(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(i,o){const a=oo(i),c=oo(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=ke(a[u],c[u]);if(d!==0)return d}return ke(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ke(rt(i.latitude),rt(o.latitude));return a!==0?a:ke(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,d;const f=i.fields||{},m=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,_=ke(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:wb(p,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===pd.mapValue&&o===pd.mapValue)return 0;if(i===pd.mapValue)return 1;if(o===pd.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=ke(c[f],d[f]);if(m!==0)return m;const p=Ta(a[c[f]],u[d[f]]);if(p!==0)return p}return ke(c.length,d.length)}(t.mapValue,e.mapValue);default:throw de()}}function vb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=oi(t),r=oi(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function wb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ta(n[s],r[s]);if(i)return i}return ke(n.length,r.length)}function ka(t){return Tx(t)}function Tx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Tx(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Tx(n.fields[o])}`;return s+"}"}(t.mapValue):de()}function bb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kx(t){return!!t&&"integerValue"in t}function wy(t){return!!t&&"arrayValue"in t}function _b(t){return!!t&&"nullValue"in t}function Eb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yd(t){return!!t&&"mapValue"in t}function uD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=nc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_o(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new fn(nc(this.value))}}function ZS(t){const e=[];return _o(t.fields,(n,r)=>{const s=new Pt([n]);if(Yd(r)){const i=ZS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qt(e,0,fe.min(),fe.min(),fe.min(),fn.empty(),0)}static newFoundDocument(e,n,r,s){return new qt(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new qt(e,2,n,fe.min(),fe.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,fe.min(),fe.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.position=e,this.inclusive=n}}function Cb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Ta(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n="asc"){this.field=e,this.dir=n}}function hD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{}class ut extends eN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mD(e,n,r):n==="array-contains"?new gD(e,r):n==="in"?new yD(e,r):n==="not-in"?new vD(e,r):n==="array-contains-any"?new wD(e,r):new ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pD(e,r):new xD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ta(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(Ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends eN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return tN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tN(t){return t.op==="and"}function nN(t){return fD(t)&&tN(t)}function fD(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function Ix(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+ka(t.value);if(nN(t))return t.filters.map(e=>Ix(e)).join(",");{const e=t.filters.map(n=>Ix(n)).join(",");return`${t.op}(${e})`}}function rN(t,e){return t instanceof ut?function(r,s){return s instanceof ut&&r.op===s.op&&r.field.isEqual(s.field)&&Cr(r.value,s.value)}(t,e):t instanceof ir?function(r,s){return s instanceof ir&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&rN(o,s.filters[a]),!0):!1}(t,e):void de()}function sN(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${ka(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(sN).join(" ,")+"}"}(t):"Filter"}class mD extends ut{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class pD extends ut{constructor(e,n){super(e,"in",n),this.keys=iN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xD extends ut{constructor(e,n){super(e,"not-in",n),this.keys=iN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class gD extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wy(n)&&Fc(n.arrayValue,this.value)}}class yD extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fc(this.value.arrayValue,n)}}class vD extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fc(this.value.arrayValue,n)}}class wD extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Nb(t,e=null,n=[],r=[],s=null,i=null,o=null){return new bD(t,e,n,r,s,i,o)}function by(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ix(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ka(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ka(r)).join(",")),e.ue=n}return e.ue}function _y(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sb(t.startAt,e.startAt)&&Sb(t.endAt,e.endAt)}function jx(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _D(t,e,n,r,s,i,o,a){return new Ka(t,e,n,r,s,i,o,a)}function Uf(t){return new Ka(t)}function Ab(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oN(t){return t.collectionGroup!==null}function rc(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(Pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Bc(i,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new Bc(Pt.keyField(),r))}return e.ce}function vr(t){const e=me(t);return e.le||(e.le=ED(e,rc(t))),e.le}function ED(t,e){if(t.limitType==="F")return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bc(s.field,i)});const n=t.endAt?new Uh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Uh(t.startAt.position,t.startAt.inclusive):null;return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Px(t,e){const n=t.filters.concat([e]);return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dx(t,e,n){return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zf(t,e){return _y(vr(t),vr(e))&&t.limitType===e.limitType}function aN(t){return`${by(vr(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>sN(s)).join(", ")}]`),Vf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ka(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ka(s)).join(",")),`Target(${r})`}(vr(t))}; limitType=${t.limitType})`}function $f(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of rc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=Cb(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,rc(r),s)||r.endAt&&!function(o,a,c){const u=Cb(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,rc(r),s))}(t,e)}function CD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lN(t){return(e,n)=>{let r=!1;for(const s of rc(t)){const i=SD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function SD(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Ta(c,u):de()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return XS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new Xe(ie.comparator);function ts(){return ND}const cN=new Xe(ie.comparator);function Ul(...t){let e=cN;for(const n of t)e=e.insert(n.key,n);return e}function uN(t){let e=cN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return sc()}function dN(){return sc()}function sc(){return new Ya(t=>t.toString(),(t,e)=>t.isEqual(e))}const AD=new Xe(ie.comparator),TD=new Rt(ie.comparator);function be(...t){let e=TD;for(const n of t)e=e.add(n);return e}const kD=new Rt(ke);function ID(){return kD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function hN(t){return{integerValue:""+t}}function jD(t,e){return aD(e)?hN(e):Ey(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function PD(t,e,n){return t instanceof Lc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yy(i)&&(i=vy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Vc?mN(t,e):t instanceof Uc?pN(t,e):function(s,i){const o=fN(s,i),a=Tb(o)+Tb(s.Pe);return kx(o)&&kx(s.Pe)?hN(a):Ey(s.serializer,a)}(t,e)}function DD(t,e,n){return t instanceof Vc?mN(t,e):t instanceof Uc?pN(t,e):n}function fN(t,e){return t instanceof zh?function(r){return kx(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Lc extends Hf{}class Vc extends Hf{constructor(e){super(),this.elements=e}}function mN(t,e){const n=xN(e);for(const r of t.elements)n.some(s=>Cr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Uc extends Hf{constructor(e){super(),this.elements=e}}function pN(t,e){let n=xN(e);for(const r of t.elements)n=n.filter(s=>!Cr(s,r));return{arrayValue:{values:n}}}class zh extends Hf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tb(t){return rt(t.integerValue||t.doubleValue)}function xN(t){return wy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.field=e,this.transform=n}}function MD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vc&&s instanceof Vc||r instanceof Uc&&s instanceof Uc?Aa(r.elements,s.elements,Cr):r instanceof zh&&s instanceof zh?Cr(r.Pe,s.Pe):r instanceof Lc&&s instanceof Lc}(t.transform,e.transform)}class OD{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wf{}function gN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qf(t.key,on.none()):new uu(t.key,t.data,on.none());{const n=t.data,r=fn.empty();let s=new Rt(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new gi(t.key,r,new Nn(s.toArray()),on.none())}}function FD(t,e,n){t instanceof uu?function(s,i,o){const a=s.value.clone(),c=Ib(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gi?function(s,i,o){if(!Qd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ib(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(yN(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ic(t,e,n,r){return t instanceof uu?function(i,o,a,c){if(!Qd(i.precondition,o))return a;const u=i.value.clone(),d=jb(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof gi?function(i,o,a,c){if(!Qd(i.precondition,o))return a;const u=jb(i.fieldTransforms,c,o),d=o.data;return d.setAll(yN(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Qd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function BD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=fN(r.transform,s||null);i!=null&&(n===null&&(n=fn.empty()),n.set(r.field,i))}return n||null}function kb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Aa(r,s,(i,o)=>MD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uu extends Wf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gi extends Wf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ib(t,e,n){const r=new Map;Re(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,DD(o,a,n[s]))}return r}function jb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PD(i,o,e))}return r}class qf extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LD extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&FD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=gN(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,(n,r)=>kb(n,r))&&Aa(this.baseMutations,e.baseMutations,(n,r)=>kb(n,r))}}class Cy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length);let s=function(){return AD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ce;function $D(t){switch(t){default:return de();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function vN(t){if(t===void 0)return es("GRPC error has no .code"),q.UNKNOWN;switch(t){case lt.OK:return q.OK;case lt.CANCELLED:return q.CANCELLED;case lt.UNKNOWN:return q.UNKNOWN;case lt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case lt.INTERNAL:return q.INTERNAL;case lt.UNAVAILABLE:return q.UNAVAILABLE;case lt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case lt.NOT_FOUND:return q.NOT_FOUND;case lt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case lt.ABORTED:return q.ABORTED;case lt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case lt.DATA_LOSS:return q.DATA_LOSS;default:return de()}}(Ce=lt||(lt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new Qi([4294967295,4294967295],0);function Pb(t){const e=HD().encode(t),n=new $S;return n.update(e),new Uint8Array(n.digest())}function Db(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qi([n,r],0),new Qi([s,i],0)]}class Sy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qi.fromNumber(r)));return s.compare(WD)===1&&(s=new Qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Pb(e),[r,s]=Db(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Sy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Pb(e),[r,s]=Db(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gf(fe.min(),s,new Xe(ke),ts(),be())}}class du{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new du(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class wN{constructor(e,n){this.targetId=e,this.me=n}}class bN{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rb{constructor(){this.fe=0,this.ge=Ob(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),n=be(),r=be();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:de()}}),new du(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ob()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ts(),this.qe=Mb(),this.Qe=new Xe(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jx(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,qt.newNoDocument(o,fe.min()))}else Re(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=oo(r).toUint8Array()}catch(c){if(c instanceof JS)return Na("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Sy(o,s,i)}catch(c){return Na(c instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&jx(a.target)){const c=new ie(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,qt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=be();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Gf(e,n,this.Qe,this.ke,r);return this.ke=ts(),this.qe=Mb(),this.Qe=new Xe(ke),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Rb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Rt(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mb(){return new Xe(ie.comparator)}function Ob(){return new Xe(ie.comparator)}const GD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),KD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),YD=(()=>({and:"AND",or:"OR"}))();class QD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rx(t,e){return t.useProto3Json||Vf(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _N(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XD(t,e){return $h(t,e.toTimestamp())}function wr(t){return Re(!!t),fe.fromTimestamp(function(n){const r=oi(n);return new vt(r.seconds,r.nanos)}(t))}function Ny(t,e){return Mx(t,e).canonicalString()}function Mx(t,e){const n=function(s){return new ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EN(t){const e=ze.fromString(t);return Re(TN(e)),e}function Ox(t,e){return Ny(t.databaseId,e.path)}function gm(t,e){const n=EN(e);if(n.get(1)!==t.databaseId.projectId)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(SN(n))}function CN(t,e){return Ny(t.databaseId,e)}function JD(t){const e=EN(t);return e.length===4?ze.emptyPath():SN(e)}function Fx(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SN(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fb(t,e,n){return{name:Ox(t,e),fields:n.value.mapValue.fields}}function ZD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Re(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(Re(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?q.UNKNOWN:vN(u.code);return new te(d,u.message||"")}(o);n=new bN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gm(t,r.document.name),i=wr(r.document.updateTime),o=r.document.createTime?wr(r.document.createTime):fe.min(),a=new fn({mapValue:{fields:r.document.fields}}),c=qt.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Xd(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gm(t,r.document),i=r.readTime?wr(r.readTime):fe.min(),o=qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Xd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gm(t,r.document),i=r.removedTargetIds||[];n=new Xd([],i,s,null)}else{if(!("filter"in e))return de();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zD(s,i),a=r.targetId;n=new wN(a,o)}}return n}function e8(t,e){let n;if(e instanceof uu)n={update:Fb(t,e.key,e.value)};else if(e instanceof qf)n={delete:Ox(t,e.key)};else if(e instanceof gi)n={update:Fb(t,e.key,e.data),updateMask:c8(e.fieldMask)};else{if(!(e instanceof LD))return de();n={verify:Ox(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw de()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de()}(t,e.precondition)),n}function t8(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wr(s.updateTime):wr(i);return o.isEqual(fe.min())&&(o=wr(i)),new OD(o,s.transformResults||[])}(n,e))):[]}function n8(t,e){return{documents:[CN(t,e.path)]}}function r8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CN(t,s);const i=function(u){if(u.length!==0)return AN(ir.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:zo(m.field),direction:o8(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Rx(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function s8(t){let e=JD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=NN(f);return m instanceof ir&&nN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Bc($o(x.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Vf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,p=f.values||[];return new Uh(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new Uh(p,m)}(n.endAt)),_D(e,s,o,i,a,"F",c,u)}function i8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$o(n.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$o(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$o(n.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$o(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return ut.create($o(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>NN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function o8(t){return GD[t]}function a8(t){return KD[t]}function l8(t){return YD[t]}function zo(t){return{fieldPath:t.canonicalString()}}function $o(t){return Pt.fromServerFormat(t.fieldPath)}function AN(t){return t instanceof ut?function(n){if(n.op==="=="){if(Eb(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(_b(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Eb(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(_b(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:a8(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(s=>AN(s));return r.length===1?r[0]:{compositeFilter:{op:l8(n.op),filters:r}}}(t):de()}function c8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.ct=e}}function d8(t){const e=s8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.un=new f8}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ii.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class f8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rt(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ia(0)}static kn(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(){this.changes=new Ya(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ic(r.mutation,s,Nn.empty(),vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const s=Hi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ul();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ts();const o=sc(),a=function(){return sc()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof gi)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ic(d.mutation,u,d.mutation.getFieldMask(),vt.now())):o.set(u.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new p8(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sc();let s=new Xe((o,a)=>o-a),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Nn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const f=(s.get(a.batchId)||be()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,f=dN();d.forEach(m=>{if(!i.has(m)){const p=gN(n.get(m),r.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):K.resolve(Hi());let a=-1,c=i;return o.next(u=>K.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?K.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,be())).next(d=>({batchId:a,changes:uN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ul();return this.indexManager.getCollectionParents(e,i).next(a=>K.forEach(a,c=>{const u=function(f,m){return new Ka(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,qt.newInvalidDocument(d)))});let a=Ul();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&ic(d.mutation,u,Nn.empty(),vt.now()),$f(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wr(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:d8(s.bundledQuery),readTime:wr(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.overlays=new Xe(ie.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return K.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=Hi(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Hi(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Hi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return K.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UD(n,r));let i=this.Ir.get(n);i===void 0&&(i=be(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.Tr=new Rt(bt.Er),this.dr=new Rt(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new ze([])),r=new bt(n,e),s=new bt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new ze([])),r=new bt(n,e),s=new bt(n,e+1);let i=be();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Rt(bt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new bt(n,0),s=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(ke);return n.forEach(s=>{const i=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new bt(new ie(i),0);let a=new Rt(ke);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)},o),K.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(n.mutations,s=>{const i=new bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new bt(n,0),s=this.br.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.Mr=e,this.docs=function(){return new Xe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=ts();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ts();const o=n.path,a=new ie(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||rD(nD(d),r)<=0||(s.has(d.key)||$f(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,r,s){de()}Or(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _8(this)}getSize(e){return K.resolve(this.size)}}class _8 extends m8{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.persistence=e,this.Nr=new Ya(n=>by(n),_y),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ay,this.targetCount=0,this.kr=Ia.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ia(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n){this.qr={},this.overlays={},this.Qr=new gy(0),this.Kr=!1,this.Kr=!0,this.$r=new v8,this.referenceDelegate=e(this),this.Ur=new E8(this),this.indexManager=new h8,this.remoteDocumentCache=function(s){return new b8(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new u8(n),this.Gr=new g8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new w8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new S8(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class S8 extends iD{constructor(e){super(),this.currentSequenceNumber=e}}class Ty{constructor(e){this.persistence=e,this.Jr=new Ay,this.Yr=null}static Zr(e){return new Ty(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=be(),s=be();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ky(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return A3()?8:oD(Qt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new N8;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Nl()<=_e.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(Nl()<=_e.DEBUG&&re("QueryEngine","Query:",Uo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Nl()<=_e.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(n))):K.resolve())}Yi(e,n){if(Ab(n))return K.resolve(null);let r=vr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dx(n,null,"F"),r=vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=be(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,Dx(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return Ab(n)||s.isEqual(fe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?K.resolve(null):(Nl()<=_e.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Uo(n)),this.rs(e,o,n,tD(s,-1)).next(a=>a))})}ts(e,n){let r=new Rt(lN(e));return n.forEach((s,i)=>{$f(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Nl()<=_e.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ii.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Xe(ke),this._s=new Ya(i=>by(i),_y),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function k8(t,e,n,r){return new T8(t,e,n,r)}async function kN(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=be();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function I8(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const f=u.batch,m=f.keys();let p=K.resolve();return m.forEach(x=>{p=p.next(()=>d.getEntry(c,x)).next(_=>{const v=u.docVersions.get(x);Re(v!==null),_.version.compareTo(v)<0&&(f.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),d.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function IN(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function j8(t,e){const n=me(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Ot.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(f,p),function(_,v,S){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,p,d)&&a.push(n.Ur.updateTargetData(i,p))});let c=ts(),u=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(P8(i,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(fe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return K.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function P8(t,e,n){let r=be(),s=be();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ts();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function D8(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R8(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Bx(t,e,n){const r=me(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cu(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Bb(t,e,n){const r=me(t);let s=fe.min(),i=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=me(c),m=f._s.get(d);return m!==void 0?K.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(r,o,vr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:be())).next(a=>(M8(r,CD(e),a),{documents:a,Ts:i})))}function M8(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Lb{constructor(){this.activeTargetIds=ID()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O8{constructor(){this.so=new Lb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function ym(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class V8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=ym(),c=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(d=>(re("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Na("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ga}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=B8[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ym();return new Promise((o,a)=>{const c=new HS;c.setWithCredentials(!0),c.listenOnce(WS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kd.NO_ERROR:const d=c.getResponseJson();re(zt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Kd.TIMEOUT:re(zt,`RPC '${e}' ${i} timed out`),a(new te(q.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const f=c.getStatus();if(re(zt,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const x=function(v){const S=v.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(S)>=0?S:q.UNKNOWN}(p.status);a(new te(x,p.message))}else a(new te(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new te(q.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{re(zt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);re(zt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=ym(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KS(),a=GS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");re(zt,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=o.createWebChannel(d,c);let m=!1,p=!1;const x=new L8({Io:v=>{p?re(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(m||(re(zt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),re(zt,`RPC '${e}' stream ${s} sending:`,v),f.send(v))},To:()=>f.close()}),_=(v,S,y)=>{v.listen(S,b=>{try{y(b)}catch(E){setTimeout(()=>{throw E},0)}})};return _(f,Vl.EventType.OPEN,()=>{p||(re(zt,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),_(f,Vl.EventType.CLOSE,()=>{p||(p=!0,re(zt,`RPC '${e}' stream ${s} transport closed`),x.So())}),_(f,Vl.EventType.ERROR,v=>{p||(p=!0,Na(zt,`RPC '${e}' stream ${s} transport errored:`,v),x.So(new te(q.UNAVAILABLE,"The operation could not be completed")))}),_(f,Vl.EventType.MESSAGE,v=>{var S;if(!p){const y=v.data[0];Re(!!y);const b=y,E=b.error||((S=b[0])===null||S===void 0?void 0:S.error);if(E){re(zt,`RPC '${e}' stream ${s} received error:`,E);const T=E.status;let k=function(A){const N=lt[A];if(N!==void 0)return vN(N)}(T),w=E.message;k===void 0&&(k=q.INTERNAL,w="Unknown error status: "+T+" with message "+E.message),p=!0,x.So(new te(k,w)),f.close()}else re(zt,`RPC '${e}' stream ${s} received:`,y),x.bo(y)}}),_(a,qS.STAT_EVENT,v=>{v.stat===Ax.PROXY?re(zt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Ax.NOPROXY&&re(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return new QD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new te(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U8 extends PN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ZD(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?wr(o.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fx(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=jx(c)?{documents:n8(i,c)}:{query:r8(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_N(i,o.resumeToken);const u=Rx(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=$h(i,o.snapshotVersion.toTimestamp());const u=Rx(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=i8(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fx(this.serializer),n.removeTarget=e,this.a_(n)}}class z8 extends PN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=t8(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fx(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>e8(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Mx(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(q.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Mx(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class H8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(es(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Eo(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=me(c);u.L_.add(4),await hu(u),u.q_.set("Unknown"),u.L_.delete(4),await Yf(u)}(this))})}),this.q_=new H8(r,s)}}async function Yf(t){if(Eo(t))for(const e of t.B_)await e(!0)}async function hu(t){for(const e of t.B_)await e(!1)}function DN(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dy(n)?Py(n):Qa(n).r_()&&jy(n,e))}function Iy(t,e){const n=me(t),r=Qa(n);n.N_.delete(e),r.r_()&&RN(n,e),n.N_.size===0&&(r.r_()?r.o_():Eo(n)&&n.q_.set("Unknown"))}function jy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).A_(e)}function RN(t,e){t.Q_.xe(e),Qa(t).R_(e)}function Py(t){t.Q_=new qD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.q_.v_()}function Dy(t){return Eo(t)&&!Qa(t).n_()&&t.N_.size>0}function Eo(t){return me(t).L_.size===0}function MN(t){t.Q_=void 0}async function q8(t){t.q_.set("Online")}async function G8(t){t.N_.forEach((e,n)=>{jy(t,e)})}async function K8(t,e){MN(t),Dy(t)?(t.q_.M_(e),Py(t)):t.q_.set("Unknown")}async function Y8(t,e,n){if(t.q_.set("Online"),e instanceof bN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hh(t,r)}else if(e instanceof Xd?t.Q_.Ke(e):e instanceof wN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const r=await IN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.N_.get(u);d&&i.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=i.N_.get(c);if(!d)return;i.N_.set(c,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),RN(i,c);const f=new Bs(d.target,c,u,d.sequenceNumber);jy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await Hh(t,r)}}async function Hh(t,e,n){if(!cu(e))throw e;t.L_.add(1),await hu(t),t.q_.set("Offline"),n||(n=()=>IN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Yf(t)})}function ON(t,e){return e().catch(n=>Hh(t,n,e))}async function Qf(t){const e=me(t),n=ai(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Q8(e);)try{const s=await D8(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,X8(e,s)}catch(s){await Hh(e,s)}FN(e)&&BN(e)}function Q8(t){return Eo(t)&&t.O_.length<10}function X8(t,e){t.O_.push(e);const n=ai(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FN(t){return Eo(t)&&!ai(t).n_()&&t.O_.length>0}function BN(t){ai(t).start()}async function J8(t){ai(t).p_()}async function Z8(t){const e=ai(t);for(const n of t.O_)e.m_(n.mutations)}async function eR(t,e,n){const r=t.O_.shift(),s=Cy.from(r,e,n);await ON(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qf(t)}async function tR(t,e){e&&ai(t).V_&&await async function(r,s){if(function(o){return $D(o)&&o!==q.ABORTED}(s.code)){const i=r.O_.shift();ai(r).s_(),await ON(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qf(r)}}(t,e),FN(t)&&BN(t)}async function Ub(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=Eo(n);n.L_.add(3),await hu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Yf(n)}async function nR(t,e){const n=me(t);e?(n.L_.delete(2),await Yf(n)):e||(n.L_.add(2),await hu(n),n.q_.set("Unknown"))}function Qa(t){return t.K_||(t.K_=function(n,r,s){const i=me(n);return i.w_(),new U8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:q8.bind(null,t),Ro:G8.bind(null,t),mo:K8.bind(null,t),d_:Y8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Dy(t)?Py(t):t.q_.set("Unknown")):(await t.K_.stop(),MN(t))})),t.K_}function ai(t){return t.U_||(t.U_=function(n,r,s){const i=me(n);return i.w_(),new z8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:J8.bind(null,t),mo:tR.bind(null,t),f_:Z8.bind(null,t),g_:eR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Qf(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Ry(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(t,e){if(es("AsyncQueue",`${e}: ${t}`),cu(t))return new te(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Ul(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new da;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.W_=new Xe(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ja{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ja(e,n,da.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sR{constructor(){this.queries=$b(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=me(n),i=s.queries;s.queries=$b(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new te(q.ABORTED,"Firestore shutting down"))}}function $b(){return new Ya(t=>aN(t),zf)}async function Oy(t,e){const n=me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new rR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=My(o,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&By(n)}async function Fy(t,e){const n=me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iR(t,e){const n=me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&By(n)}function oR(t,e,n){const r=me(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function By(t){t.Y_.forEach(e=>{e.next()})}var Lx,Hb;(Hb=Lx||(Lx={})).ea="default",Hb.Cache="cache";class Ly{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.key=e}}class VN{constructor(e){this.key=e}}class aR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=lN(e),this.Ra=new da(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new zb,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),p=$f(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;m&&p?m.data.isEqual(p.data)?x!==_&&(r.track({type:3,doc:p}),v=!0):this.ga(m,p)||(r.track({type:2,doc:p}),v=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),v=!0):m&&!p&&(r.track({type:1,doc:m}),v=!0,(c||u)&&(a=!0)),v&&(p?(o=o.add(p),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(p,x){const _=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return _(p)-_(x)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new ja(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new VN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new LN(r))}),n}ba(e){this.Ta=e.Ts,this.da=be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ja.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cR{constructor(e){this.key=e,this.va=!1}}class uR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ya(a=>aN(a),zf),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(ie.comparator),this.Na=new Map,this.La=new Ay,this.Ba={},this.ka=new Map,this.qa=Ia.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dR(t,e,n=!0){const r=qN(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await UN(r,e,n,!0),s}async function hR(t,e){const n=qN(t);await UN(n,e,!0,!1)}async function UN(t,e,n,r){const s=await R8(t.localStore,vr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await fR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&DN(t.remoteStore,s),a}async function fR(t,e,n,r,s){t.Ka=(f,m,p)=>async function(_,v,S,y){let b=v.view.ma(S);b.ns&&(b=await Bb(_.localStore,v.query,!1).then(({documents:w})=>v.view.ma(w,b)));const E=y&&y.targetChanges.get(v.targetId),T=y&&y.targetMismatches.get(v.targetId)!=null,k=v.view.applyChanges(b,_.isPrimaryClient,E,T);return qb(_,v.targetId,k.wa),k.snapshot}(t,f,m,p);const i=await Bb(t.localStore,e,!0),o=new aR(e,i.Ts),a=o.ma(i.documents),c=du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);qb(t,n,u.wa);const d=new lR(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function mR(t,e,n){const r=me(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!zf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Iy(r.remoteStore,s.targetId),Vx(r,s.targetId)}).catch(lu)):(Vx(r,s.targetId),await Bx(r.localStore,s.targetId,!0))}async function pR(t,e){const n=me(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iy(n.remoteStore,r.targetId))}async function xR(t,e,n){const r=ER(t);try{const s=await function(o,a){const c=me(o),u=vt.now(),d=a.reduce((p,x)=>p.add(x.key),be());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=ts(),_=be();return c.cs.getEntries(p,d).next(v=>{x=v,x.forEach((S,y)=>{y.isValidDocument()||(_=_.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,x)).next(v=>{f=v;const S=[];for(const y of a){const b=BD(y,f.get(y.key).overlayedDocument);b!=null&&S.push(new gi(y.key,b,ZS(b.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,S,a)}).next(v=>{m=v;const S=v.applyToLocalDocumentSet(f,_);return c.documentOverlayCache.saveOverlays(p,v.batchId,S)})}).then(()=>({batchId:m.batchId,changes:uN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Xe(ke)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await fu(r,s.changes),await Qf(r.remoteStore)}catch(s){const i=My(s,"Failed to persist write");n.reject(i)}}async function zN(t,e){const n=me(t);try{const r=await j8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Re(o.va):s.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),await fu(n,r,e)}catch(r){await lu(r)}}function Wb(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=me(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(a)&&(u=!0)}),u&&By(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gR(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Xe(ie.comparator);o=o.insert(i,qt.newNoDocument(i,fe.min()));const a=be().add(i),c=new Gf(fe.min(),new Map,new Xe(ke),o,a);await zN(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Vy(r)}else await Bx(r.localStore,e,!1).then(()=>Vx(r,e,n)).catch(lu)}async function yR(t,e){const n=me(t),r=e.batch.batchId;try{const s=await I8(n.localStore,e);HN(n,r,null),$N(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fu(n,s)}catch(s){await lu(s)}}async function vR(t,e,n){const r=me(t);try{const s=await function(o,a){const c=me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Re(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);HN(r,e,n),$N(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fu(r,s)}catch(s){await lu(s)}}function $N(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function HN(t,e,n){const r=me(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Vx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||WN(t,r)})}function WN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Iy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Vy(t))}function qb(t,e,n){for(const r of n)r instanceof LN?(t.La.addReference(r.key,e),wR(t,r)):r instanceof VN?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||WN(t,r.key)):de()}function wR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),Vy(t))}function Vy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(ze.fromString(e)),r=t.qa.next();t.Na.set(r,new cR(n)),t.Oa=t.Oa.insert(n,r),DN(t.remoteStore,new Bs(vr(Uf(n.path)),r,"TargetPurposeLimboResolution",gy.oe))}}async function fu(t,e,n){const r=me(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=ky.Wi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const d=me(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(u,m=>K.forEach(m.$i,p=>d.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>K.forEach(m.Ui,p=>d.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!cu(f))throw f;re("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=d.os.get(m),x=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,_)}}}(r.localStore,i))}async function bR(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await kN(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new te(q.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fu(n,r.hs)}}function _R(t,e){const n=me(t),r=n.Na.get(e);if(r&&r.va)return be().add(r.key);{let s=be();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function qN(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gR.bind(null,e),e.Ca.d_=iR.bind(null,e.eventManager),e.Ca.$a=oR.bind(null,e.eventManager),e}function ER(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vR.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return k8(this.persistence,new A8,e.initialUser,this.serializer)}Ga(e){return new C8(Ty.Zr,this.serializer)}Wa(e){return new O8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class Ux{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bR.bind(null,this.syncEngine),await nR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sR}()}createDatastore(e){const n=Kf(e.databaseInfo.databaseId),r=function(i){return new V8(i)}(e.databaseInfo);return function(i,o,a,c){return new $8(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new W8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Wb(this.syncEngine,n,0),function(){return Vb.D()?new Vb:new F8}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,d){const f=new uR(s,i,o,a,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=me(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await hu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ux.provider={build:()=>new Ux};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ht.UNAUTHENTICATED,this.clientId=QS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=My(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wm(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SR(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ub(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ub(e.remoteStore,s)),t._onlineComponents=e}async function SR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await wm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Na("Error using user provided cache. Falling back to memory cache: "+n),await wm(t,new Wh)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await wm(t,new Wh);return t._offlineComponents}async function GN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Gb(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Gb(t,new Ux))),t._onlineComponents}function NR(t){return GN(t).then(e=>e.syncEngine)}async function qh(t){const e=await GN(t),n=e.eventManager;return n.onListen=dR.bind(null,e.syncEngine),n.onUnlisten=mR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pR.bind(null,e.syncEngine),n}function AR(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new Uy({next:m=>{d.Za(),o.enqueueAndForget(()=>Fy(i,f));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new te(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?u.reject(new te(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Ly(Uf(a.path),d,{includeMetadataChanges:!0,_a:!0});return Oy(i,f)}(await qh(t),t.asyncQueue,e,n,r)),r.promise}function TR(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new Uy({next:m=>{d.Za(),o.enqueueAndForget(()=>Fy(i,f)),m.fromCache&&c.source==="server"?u.reject(new te(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Ly(a,d,{includeMetadataChanges:!0,_a:!0});return Oy(i,f)}(await qh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e,n){if(!n)throw new te(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kR(t,e,n,r){if(e===!0&&r===!0)throw new te(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yb(t){if(!ie.isDocumentKey(t))throw new te(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qb(t){if(ie.isDocumentKey(t))throw new te(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xf(t);throw new te(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qP;switch(r.type){case"firstParty":return new QP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kb.get(n);r&&(re("ComponentProvider","Removing Datastore"),Kb.delete(n),r.terminate())}(this),Promise.resolve()}}function IR(t,e,n,r={}){var s;const i=(t=an(t,Jf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ht.MOCK_USER;else{a=b3(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new te(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ht(u)}t._authCredentials=new GP(new YS(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class ei extends yi{constructor(e,n,r){super(e,n,Uf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ie(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function he(t,e,...n){if(t=at(t),YN("collection","path",e),t instanceof Jf){const r=ze.fromString(e,...n);return Qb(r),new ei(t,null,r)}{if(!(t instanceof Kt||t instanceof ei))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return Qb(r),new ei(t.firestore,null,r)}}function He(t,e,...n){if(t=at(t),arguments.length===1&&(e=QS.newId()),YN("doc","path",e),t instanceof Jf){const r=ze.fromString(e,...n);return Yb(r),new Kt(t,null,new ie(r))}{if(!(t instanceof Kt||t instanceof ei))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return Yb(r),new Kt(t.firestore,t instanceof ei?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jN(this,"async_queue_retry"),this.Vu=()=>{const r=vm();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cu(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw es("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ry.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Zb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Sr extends Jf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Jb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jb(e),this._firestoreClient=void 0,await e}}}function jR(t,e){const n=typeof t=="object"?t:py(),r=typeof t=="string"?t:e||"(default)",s=bo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=v3("firestore");i&&IR(s,...i)}return s}function mu(t){if(t._terminated)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PR(t),t._firestoreClient}function PR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,d){return new cD(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,KN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new CR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pa(Ot.fromBase64String(e))}catch(n){throw new te(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pa(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=/^__.*__$/;class RR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new uu(e,this.data,n,this.fieldTransforms)}}class QN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Hy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XN(this.Cu)&&DR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kf(e)}Qu(e,n,r,s=!1){return new Hy({Cu:e,methodName:n,qu:r,path:Pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(t){const e=t._freezeSettings(),n=Kf(t._databaseId);return new MR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wy(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Gy("Data must be an object, but it was:",o,r);const a=eA(r,o);let c,u;if(i.merge)c=new Nn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=zx(e,f,n);if(!o.contains(m))throw new te(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nA(d,m)||d.push(m)}c=new Nn(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new RR(new fn(a),c,u)}class e0 extends Zf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}class qy extends Zf{_toFieldTransform(e){return new RD(e.path,new Lc)}isEqual(e){return e instanceof qy}}function JN(t,e,n,r){const s=t.Qu(1,e,n);Gy("Data must be an object, but it was:",s,r);const i=[],o=fn.empty();_o(r,(c,u)=>{const d=Ky(e,c,n);u=at(u);const f=s.Nu(d);if(u instanceof e0)i.push(d);else{const m=gu(u,f);m!=null&&(i.push(d),o.set(d,m))}});const a=new Nn(i);return new QN(o,a,s.fieldTransforms)}function ZN(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[zx(e,r,n)],c=[s];if(i.length%2!=0)throw new te(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(zx(e,i[m])),c.push(i[m+1]);const u=[],d=fn.empty();for(let m=a.length-1;m>=0;--m)if(!nA(u,a[m])){const p=a[m];let x=c[m];x=at(x);const _=o.Nu(p);if(x instanceof e0)u.push(p);else{const v=gu(x,_);v!=null&&(u.push(p),d.set(p,v))}}const f=new Nn(u);return new QN(d,f,o.fieldTransforms)}function OR(t,e,n,r=!1){return gu(n,t.Qu(r?4:3,e))}function gu(t,e){if(tA(t=at(t)))return Gy("Unsupported field value:",e,t),eA(t,e);if(t instanceof Zf)return function(r,s){if(!XN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=gu(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=vt.fromDate(r);return{timestampValue:$h(s.serializer,i)}}if(r instanceof vt){const i=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$h(s.serializer,i)}}if(r instanceof zy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pa)return{bytesValue:_N(s.serializer,r._byteString)};if(r instanceof Kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ny(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof $y)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ey(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Xf(r)}`)}(t,e)}function eA(t,e){const n={};return XS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,(r,s)=>{const i=gu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function tA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof zy||t instanceof Pa||t instanceof Kt||t instanceof Zf||t instanceof $y)}function Gy(t,e,n){if(!tA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Xf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zx(t,e,n){if((e=at(e))instanceof pu)return e._internalPath;if(typeof e=="string")return Ky(t,e);throw Gh("Field path arguments must be of type string or ",t,!1,void 0,n)}const FR=new RegExp("[~\\*/\\[\\]]");function Ky(t,e,n){if(e.search(FR)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new te(q.INVALID_ARGUMENT,a+t+c)}function nA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(t0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BR extends rA{data(){return super.data()}}function t0(t,e){return typeof e=="string"?Ky(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yy{}class iA extends Yy{}function it(t,e,...n){let r=[];e instanceof Yy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Qy).length,a=i.filter(c=>c instanceof n0).length;if(o>1||o>0&&a>0)throw new te(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class n0 extends iA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new n0(e,n,r)}_apply(e){const n=this._parse(e);return aA(e._query,n),new yi(e.firestore,e.converter,Px(e._query,n))}_parse(e){const n=xu(e.firestore);return function(i,o,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new te(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){t_(f,d);const p=[];for(const x of f)p.push(e_(c,i,x));m={arrayValue:{values:p}}}else m=e_(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||t_(f,d),m=OR(a,o,f,d==="in"||d==="not-in");return ut.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rn(t,e,n){const r=e,s=t0("where",t);return n0._create(s,r,n)}class Qy extends Yy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)aA(o,c),o=Px(o,c)}(e._query,n),new yi(e.firestore,e.converter,Px(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xy extends iA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(i,o)}(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ka(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function oA(t,e="asc"){const n=e,r=t0("orderBy",t);return Xy._create(r,n)}function e_(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new te(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oN(e)&&n.indexOf("/")!==-1)throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!ie.isDocumentKey(r))throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bb(t,new ie(r))}if(n instanceof Kt)return bb(t,n._key);throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(n)}.`)}function t_(t,e){if(!Array.isArray(t)||t.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LR{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _o(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>rt(o.doubleValue));return new $y(i)}convertGeoPoint(e){return new zy(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const n=oi(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);Re(TN(r));const s=new Oc(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||es(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lA extends rA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(t0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jd extends lA{data(e={}){return super.data(e)}}class cA{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new $l(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jd(this._firestore,this._userDataWriter,r.key,r,new $l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Jd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $l(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Jd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $l(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:VR(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){t=an(t,Kt);const e=an(t.firestore,Sr);return AR(mu(e),t._key).then(n=>uA(e,t,n))}class Zy extends LR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function $e(t){t=an(t,yi);const e=an(t.firestore,Sr),n=mu(e),r=new Zy(e);return sA(t._query),TR(n,t._query).then(s=>new cA(e,r,t,s))}function Zd(t,e,n){t=an(t,Kt);const r=an(t.firestore,Sr),s=Jy(t.converter,e,n);return yu(r,[Wy(xu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function Wn(t,e,n,...r){t=an(t,Kt);const s=an(t.firestore,Sr),i=xu(s);let o;return o=typeof(e=at(e))=="string"||e instanceof pu?ZN(i,"updateDoc",t._key,e,n,r):JN(i,"updateDoc",t._key,e),yu(s,[o.toMutation(t._key,on.exists(!0))])}function Br(t){return yu(an(t.firestore,Sr),[new qf(t._key,on.none())])}function tr(t,e){const n=an(t.firestore,Sr),r=He(t),s=Jy(t.converter,e);return yu(n,[Wy(xu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function ti(t,...e){var n,r,s;t=at(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Zb(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Zb(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,d;if(t instanceof Kt)u=an(t.firestore,Sr),d=Uf(t._key.path),c={next:f=>{e[o]&&e[o](uA(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=an(t,yi);u=an(f.firestore,Sr),d=f._query;const m=new Zy(u);c={next:p=>{e[o]&&e[o](new cA(u,m,f,p))},error:e[o+1],complete:e[o+2]},sA(t._query)}return function(m,p,x,_){const v=new Uy(_),S=new Ly(p,v,x);return m.asyncQueue.enqueueAndForget(async()=>Oy(await qh(m),S)),()=>{v.Za(),m.asyncQueue.enqueueAndForget(async()=>Fy(await qh(m),S))}}(mu(u),d,a,c)}function yu(t,e){return function(r,s){const i=new Gr;return r.asyncQueue.enqueueAndForget(async()=>xR(await NR(r),s,i)),i.promise}(mu(t),e)}function uA(t,e,n){const r=n.docs.get(e._key),s=new Zy(t);return new lA(t,s,e._key,r,new $l(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xu(e)}set(e,n,r){this._verifyNotCommitted();const s=bm(e,this._firestore),i=Jy(s.converter,n,r),o=Wy(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,on.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=bm(e,this._firestore);let o;return o=typeof(n=at(n))=="string"||n instanceof pu?ZN(this._dataReader,"WriteBatch.update",i._key,n,r,s):JN(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=bm(e,this._firestore);return this._mutations=this._mutations.concat(new qf(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(t,e){if((t=at(t)).firestore!==e)throw new te(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Se(){return new qy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){return mu(t=an(t,Sr)),new zR(t,e=>yu(t,e))}(function(e,n=!0){(function(s){Ga=s})(qa),Er(new sr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Sr(new KP(r.getProvider("auth-internal")),new JP(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zn(xb,"4.7.3",e),zn(xb,"4.7.3","esm2017")})();function ev(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $R=dA,hA=new wo("auth","Firebase",dA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Lf("@firebase/auth");function HR(t,...e){Kh.logLevel<=_e.WARN&&Kh.warn(`Auth (${qa}): ${t}`,...e)}function eh(t,...e){Kh.logLevel<=_e.ERROR&&Kh.error(`Auth (${qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,...e){throw tv(t,...e)}function br(t,...e){return tv(t,...e)}function fA(t,e,n){const r=Object.assign(Object.assign({},$R()),{[e]:n});return new wo("auth","Firebase",r).create(e,{appName:t.name})}function Xi(t){return fA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hA.create(t,...e)}function ue(t,e,...n){if(!t)throw tv(e,...n)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eh(e),new Error(e)}function rs(t,e){t||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WR(){return r_()==="http:"||r_()==="https:"}function r_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WR()||RS()||"connection"in navigator)?navigator.onLine:!0}function GR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,rs(n>e,"Short delay should be less than long delay!"),this.isMobile=_3()||S3()}get(){return qR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e){rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new vu(3e4,6e4);function rv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Co(t,e,n,r,s={}){return pA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=au(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return C3()||(u.referrerPolicy="no-referrer"),mA.fetch()(xA(t,t.config.apiHost,n,a),u)})}async function pA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KR),e);try{const s=new XR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw gd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw gd(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw fA(t,d,u);ns(t,d)}}catch(s){if(s instanceof or)throw s;ns(t,"network-request-failed",{message:String(s)})}}async function QR(t,e,n,r,s={}){const i=await Co(t,e,n,r,s);return"mfaPendingCredential"in i&&ns(t,"multi-factor-auth-required",{_serverResponse:i}),i}function xA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?nv(t.config,s):`${t.config.apiScheme}://${s}`}class XR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),YR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=br(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(t,e){return Co(t,"POST","/v1/accounts:delete",e)}async function gA(t,e){return Co(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZR(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=sv(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:oc(_m(s.auth_time)),issuedAtTime:oc(_m(s.iat)),expirationTime:oc(_m(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _m(t){return Number(t)*1e3}function sv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=IS(n);return s?JSON.parse(s):(eh("Failed to decode base64 JWT payload"),null)}catch(s){return eh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function s_(t){const e=sv(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof or&&e9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function e9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Da(t,gA(n,{idToken:r}));ue(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?yA(i.providerUserInfo):[],a=r9(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hx(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function n9(t){const e=at(t);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yA(t){return t.map(e=>{var{providerId:n}=e,r=ev(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(t,e){const n=await pA(t,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=xA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function i9(t,e){return Co(t,"POST","/v2/accounts:revokeToken",rv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=s_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await s9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ha;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ha,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new t9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Da(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZR(this,e)}reload(){return n9(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fs(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await Da(this,JR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:E,isAnonymous:T,providerData:k,stsTokenManager:w}=n;ue(b&&w,e,"internal-error");const g=ha.fromJSON(this.name,w);ue(typeof b=="string",e,"internal-error"),bs(f,e.name),bs(m,e.name),ue(typeof E=="boolean",e,"internal-error"),ue(typeof T=="boolean",e,"internal-error"),bs(p,e.name),bs(x,e.name),bs(_,e.name),bs(v,e.name),bs(S,e.name),bs(y,e.name);const A=new zr({uid:b,auth:e,email:m,emailVerified:E,displayName:f,isAnonymous:T,photoURL:x,phoneNumber:p,tenantId:_,stsTokenManager:g,createdAt:S,lastLoginAt:y});return k&&Array.isArray(k)&&(A.providerData=k.map(N=>Object.assign({},N))),v&&(A._redirectEventId=v),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new ha;s.updateFromServerResponse(n);const i=new zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ha;a.updateFromIdToken(r);const c=new zr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new Map;function $r(t){rs(t instanceof Function,"Expected a class definition");let e=i_.get(t);return e?(rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vA.type="NONE";const o_=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e,n){return`firebase:${t}:${e}:${n}`}class fa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=th(this.userKey,s.apiKey,i),this.fullPersistenceKey=th("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fa($r(o_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||$r(o_);const o=th(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const f=zr._fromJSON(e,d);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new fa(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new fa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SA(e))return"Blackberry";if(NA(e))return"Webos";if(bA(e))return"Safari";if((e.includes("chrome/")||_A(e))&&!e.includes("edge/"))return"Chrome";if(CA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wA(t=Qt()){return/firefox\//i.test(t)}function bA(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _A(t=Qt()){return/crios\//i.test(t)}function EA(t=Qt()){return/iemobile/i.test(t)}function CA(t=Qt()){return/android/i.test(t)}function SA(t=Qt()){return/blackberry/i.test(t)}function NA(t=Qt()){return/webos/i.test(t)}function iv(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function o9(t=Qt()){var e;return iv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a9(){return N3()&&document.documentMode===10}function AA(t=Qt()){return iv(t)||CA(t)||NA(t)||SA(t)||/windows phone/i.test(t)||EA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e=[]){let n;switch(t){case"Browser":n=a_(Qt());break;case"Worker":n=`${a_(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e={}){return Co(t,"GET","/v2/passwordPolicy",rv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=6;class d9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:u9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l_(this),this.idTokenSubscription=new l_(this),this.beforeStateQueue=new l9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gA(this,{idToken:e}),r=await zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fs(this.app))return Promise.reject(Xi(this));const n=e?at(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fs(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fs(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c9(this),n=new d9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await i9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$r(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ov(t){return at(t)}class l_{constructor(e){this.auth=e,this.observer=null,this.addObserver=D3(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f9(t){av=t}function m9(t){return av.loadJS(t)}function p9(){return av.gapiScript}function x9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t,e){const n=bo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Pc(i,e??{}))return s;ns(s,"already-initialized")}return n.initialize({options:e})}function y9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v9(t,e,n){const r=ov(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=kA(e),{host:o,port:a}=w9(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||b9()}function kA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function w9(t){const e=kA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:c_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:c_(o)}}}function c_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function b9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,n){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function _9(t,e){return Co(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e){return QR(t,"POST","/v1/accounts:signInWithIdp",rv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="http://localhost";class lo extends IA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=ev(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new lo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ma(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ma(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ma(e,n)}buildRequest(){const e={requestUri:E9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends jA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends wu{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return js.credential(n,r)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends wu{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends wu{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ds.credential(n,r)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zr._fromIdTokenResponse(e,r,s),o=u_(r);return new Ra({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=u_(r);return new Ra({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function u_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends or{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qh(e,n,r,s)}}function PA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qh._fromErrorAndOperation(t,i,e,r):i})}async function C9(t,e,n=!1){const r=await Da(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ra._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(t,e,n=!1){const{auth:r}=t;if(Fs(r.app))return Promise.reject(Xi(r));const s="reauthenticate";try{const i=await Da(t,PA(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=sv(i.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),Ra._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ns(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(t,e,n=!1){if(Fs(t.app))return Promise.reject(Xi(t));const r="signIn",s=await PA(t,r,e),i=await Ra._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function DA(t,e){return A9(at(t),null,e)}async function A9(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Da(t,_9(r,i));await t._updateTokensIfNecessary(o,!0)}function T9(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function k9(t,e,n){return at(t).beforeAuthStateChanged(e,n)}const Xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=1e3,j9=10;class MA extends RA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);a9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,j9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},I9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MA.type="LOCAL";const P9=MA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA extends RA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OA.type="SESSION";const FA=OA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new r0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await D9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=lv("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function M9(t){_r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function O9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function B9(){return BA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebaseLocalStorageDb",L9=1,Jh="firebaseLocalStorage",VA="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function s0(t,e){return t.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function V9(){const t=indexedDB.deleteDatabase(LA);return new bu(t).toPromise()}function Wx(){const t=indexedDB.open(LA,L9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jh,{keyPath:VA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jh)?e(r):(r.close(),await V9(),e(await Wx()))})})}async function d_(t,e,n){const r=s0(t,!0).put({[VA]:e,value:n});return new bu(r).toPromise()}async function U9(t,e){const n=s0(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function h_(t,e){const n=s0(t,!0).delete(e);return new bu(n).toPromise()}const z9=800,$9=3;class UA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r0._getInstance(B9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await O9(),!this.activeServiceWorker)return;this.sender=new R9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wx();return await d_(e,Xh,"1"),await h_(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>d_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>U9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>h_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=s0(s,!1).getAll();return new bu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UA.type="LOCAL";const H9=UA;new vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t,e){return e?$r(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends IA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function q9(t){return N9(t.auth,new cv(t),t.bypassAuthState)}function G9(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),S9(n,new cv(t),t.bypassAuthState)}async function K9(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),C9(n,new cv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q9;case"linkViaPopup":case"linkViaRedirect":return K9;case"reauthViaPopup":case"reauthViaRedirect":return G9;default:ns(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=new vu(2e3,1e4);class ra extends zA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y9.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="pendingRedirect",nh=new Map;class X9 extends zA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const r=await J9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J9(t,e){const n=t7(e),r=e7(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Z9(t,e){nh.set(t._key(),e)}function e7(t){return $r(t._redirectPersistence)}function t7(t){return th(Q9,t.config.apiKey,t.name)}async function n7(t,e,n=!1){if(Fs(t.app))return Promise.reject(Xi(t));const r=ov(t),s=W9(r,e),o=await new X9(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=10*60*1e3;class s7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$A(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(br(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r7&&this.cachedEventUids.clear(),this.cachedEventUids.has(f_(e))}saveEventToCache(e){this.cachedEventUids.add(f_(e)),this.lastProcessedEventTime=Date.now()}}function f_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $A({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function i7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(t,e={}){return Co(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l7=/^https?/;async function c7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await o7(t);for(const n of e)try{if(u7(n))return}catch{}ns(t,"unauthorized-domain")}function u7(t){const e=$x(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!l7.test(n))return!1;if(a7.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new vu(3e4,6e4);function m_(){const t=_r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h7(t){return new Promise((e,n)=>{var r,s,i;function o(){m_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{m_(),n(br(t,"network-request-failed"))},timeout:d7.get()})}if(!((s=(r=_r().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=_r().gapi)===null||i===void 0)&&i.load)o();else{const a=x9("iframefcb");return _r()[a]=()=>{gapi.load?o():n(br(t,"network-request-failed"))},m9(`${p9()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw rh=null,e})}let rh=null;function f7(t){return rh=rh||h7(t),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7=new vu(5e3,15e3),p7="__/auth/iframe",x7="emulator/auth/iframe",g7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v7(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nv(e,x7):`https://${t.config.authDomain}/${p7}`,r={apiKey:e.apiKey,appName:t.name,v:qa},s=y7.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}async function w7(t){const e=await f7(t),n=_r().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:v7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g7,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=br(t,"network-request-failed"),a=_r().setTimeout(()=>{i(o)},m7.get());function c(){_r().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_7=500,E7=600,C7="_blank",S7="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N7(t,e,n,r=_7,s=E7){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},b7),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Qt().toLowerCase();n&&(a=_A(u)?C7:n),wA(u)&&(e=e||S7,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[p,x])=>`${m}${p}=${x},`,"");if(o9(u)&&a!=="_self")return A7(e||"",a),new p_(null);const f=window.open(e||"",a,d);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new p_(f)}function A7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="__/auth/handler",k7="emulator/auth/handler",I7=encodeURIComponent("fac");async function x_(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qa,eventId:s};if(e instanceof jA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",P3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(i||{}))o[d]=f}if(e instanceof wu){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${I7}=${encodeURIComponent(c)}`:"";return`${j7(t)}?${au(a).slice(1)}${u}`}function j7({config:t}){return t.emulator?nv(t,k7):`https://${t.authDomain}/${T7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class P7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FA,this._completeRedirectFn=n7,this._overrideRedirectResult=Z9}async _openPopup(e,n,r,s){var i;rs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await x_(e,n,r,$x(),s);return N7(e,o,lv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await x_(e,n,r,$x(),s);return M9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(rs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await w7(e),r=new s7(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Em,{type:Em},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Em];o!==void 0&&n(!!o),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AA()||bA()||iv()}}const D7=P7;var g_="@firebase/auth",y_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O7(t){Er(new sr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TA(t)},u=new h9(r,s,i,c);return y9(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Er(new sr("auth-internal",e=>{const n=ov(e.getProvider("auth").getImmediate());return(r=>new R7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(g_,y_,M7(t)),zn(g_,y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7=5*60,B7=DS("authIdTokenMaxAge")||F7;let v_=null;const L7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>B7)return;const s=n==null?void 0:n.token;v_!==s&&(v_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function V7(t=py()){const e=bo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g9(t,{popupRedirectResolver:D7,persistence:[H9,P9,FA]}),r=DS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=L7(i.toString());k9(n,o,()=>o(n.currentUser)),T9(n,a=>o(a))}}const s=jS("auth");return s&&v9(n,`http://${s}`),n}function U7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}f9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=br("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",U7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O7("Browser");var z7="firebase",$7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(z7,$7,"app");const HA="@firebase/installations",uv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1e4,qA=`w:${uv}`,GA="FIS_v2",H7="https://firebaseinstallations.googleapis.com/v1",W7=60*60*1e3,q7="installations",G7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new wo(q7,G7,K7);function KA(t){return t instanceof or&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA({projectId:t}){return`${H7}/projects/${t}/installations`}function QA(t){return{token:t.token,requestStatus:2,expiresIn:Q7(t.expiresIn),creationTime:Date.now()}}async function XA(t,e){const r=(await e.json()).error;return co.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function JA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Y7(t,{refreshToken:e}){const n=JA(t);return n.append("Authorization",X7(e)),n}async function ZA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Q7(t){return Number(t.replace("s","000"))}function X7(t){return`${GA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J7({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=YA(t),s=JA(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:GA,appId:t.appId,sdkVersion:qA},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await ZA(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:QA(u.authToken)}}else throw await XA("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=/^[cdef][\w-]{21}$/,qx="";function tM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=nM(t);return eM.test(n)?n:qx}catch{return qx}}function nM(t){return Z7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;function nT(t,e){const n=i0(t);rT(n,e),rM(n,e)}function rT(t,e){const n=tT.get(t);if(n)for(const r of n)r(e)}function rM(t,e){const n=sM();n&&n.postMessage({key:t,fid:e}),iM()}let Wi=null;function sM(){return!Wi&&"BroadcastChannel"in self&&(Wi=new BroadcastChannel("[Firebase] FID Change"),Wi.onmessage=t=>{rT(t.data.key,t.data.fid)}),Wi}function iM(){tT.size===0&&Wi&&(Wi.close(),Wi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="firebase-installations-database",aM=1,uo="firebase-installations-store";let Cm=null;function dv(){return Cm||(Cm=LS(oM,aM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(uo)}}})),Cm}async function Zh(t,e){const n=i0(t),s=(await dv()).transaction(uo,"readwrite"),i=s.objectStore(uo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&nT(t,e.fid),e}async function sT(t){const e=i0(t),r=(await dv()).transaction(uo,"readwrite");await r.objectStore(uo).delete(e),await r.done}async function o0(t,e){const n=i0(t),s=(await dv()).transaction(uo,"readwrite"),i=s.objectStore(uo),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&nT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(t){let e;const n=await o0(t.appConfig,r=>{const s=lM(r),i=cM(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===qx?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function lM(t){const e=t||{fid:tM(),registrationStatus:0};return iT(e)}function cM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=uM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dM(t)}:{installationEntry:e}}async function uM(t,e){try{const n=await J7(t,e);return Zh(t.appConfig,n)}catch(n){throw KA(n)&&n.customData.serverCode===409?await sT(t.appConfig):await Zh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function dM(t){let e=await w_(t.appConfig);for(;e.registrationStatus===1;)await eT(100),e=await w_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await hv(t);return r||n}return e}function w_(t){return o0(t,e=>{if(!e)throw co.create("installation-not-found");return iT(e)})}function iT(t){return hM(t)?{fid:t.fid,registrationStatus:0}:t}function hM(t){return t.registrationStatus===1&&t.registrationTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM({appConfig:t,heartbeatServiceProvider:e},n){const r=mM(t,n),s=Y7(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:qA,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await ZA(()=>fetch(r,a));if(c.ok){const u=await c.json();return QA(u)}else throw await XA("Generate Auth Token",c)}function mM(t,{fid:e}){return`${YA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv(t,e=!1){let n;const r=await o0(t.appConfig,i=>{if(!oT(i))throw co.create("not-registered");const o=i.authToken;if(!e&&gM(o))return i;if(o.requestStatus===1)return n=pM(t,e),i;{if(!navigator.onLine)throw co.create("app-offline");const a=vM(i);return n=xM(t,a),a}});return n?await n:r.authToken}async function pM(t,e){let n=await b_(t.appConfig);for(;n.authToken.requestStatus===1;)await eT(100),n=await b_(t.appConfig);const r=n.authToken;return r.requestStatus===0?fv(t,e):r}function b_(t){return o0(t,e=>{if(!oT(e))throw co.create("not-registered");const n=e.authToken;return wM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function xM(t,e){try{const n=await fM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Zh(t.appConfig,r),n}catch(n){if(KA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Zh(t.appConfig,r)}throw n}}function oT(t){return t!==void 0&&t.registrationStatus===2}function gM(t){return t.requestStatus===2&&!yM(t)}function yM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+W7}function vM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function wM(t){return t.requestStatus===1&&t.requestTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t){const e=t,{installationEntry:n,registrationPromise:r}=await hv(e);return r?r.catch(console.error):fv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e=!1){const n=t;return await EM(n),(await fv(n,e)).token}async function EM(t){const{registrationPromise:e}=await hv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){if(!t||!t.options)throw Sm("App Configuration");if(!t.name)throw Sm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Sm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Sm(t){return co.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="installations",SM="installations-internal",NM=t=>{const e=t.getProvider("app").getImmediate(),n=CM(e),r=bo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},AM=t=>{const e=t.getProvider("app").getImmediate(),n=bo(e,aT).getImmediate();return{getId:()=>bM(n),getToken:s=>_M(n,s)}};function TM(){Er(new sr(aT,NM,"PUBLIC")),Er(new sr(SM,AM,"PRIVATE"))}TM();zn(HA,uv);zn(HA,uv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="analytics",kM="firebase_id",IM="origin",jM=60*1e3,PM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new Lf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kn=new wo("analytics","Analytics",DM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){if(!t.startsWith(mv)){const e=kn.create("invalid-gtag-resource",{gtagURL:t});return vn.warn(e.message),""}return t}function lT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function MM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function OM(t,e){const n=MM("firebase-js-sdk-policy",{createScriptURL:RM}),r=document.createElement("script"),s=`${mv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function FM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BM(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await lT(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){vn.error(a)}t("config",s,i)}async function LM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await lT(n);for(const c of o){const u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){vn.error(i)}}function VM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await LM(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await BM(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){vn.error(a)}}return s}function UM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=VM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function zM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(mv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=30,HM=1e3;class WM{constructor(e={},n=HM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cT=new WM;function qM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function GM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:qM(r)},i=PM.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function KM(t,e=cT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw kn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw kn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new XM;return setTimeout(async()=>{a.abort()},n!==void 0?n:jM),uT({appId:r,apiKey:s,measurementId:i},o,a,e)}async function uT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=cT){var i;const{appId:o,measurementId:a}=t;try{await YM(r,e)}catch(c){if(a)return vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await GM(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!QM(u)){if(s.deleteThrottleMetadata(o),a)return vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?ob(n,s.intervalMillis,$M):ob(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,f),vn.debug(`Calling attemptFetch again in ${d} millis`),uT(t,f,r,s)}}function YM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QM(t){if(!(t instanceof or)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class XM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function JM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(){if(MS())try{await OS()}catch(t){return vn.warn(kn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return vn.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function eO(t,e,n,r,s,i,o){var a;const c=KM(t);c.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&vn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>vn.error(p)),e.push(c);const u=ZM().then(p=>{if(p)return r.getId()}),[d,f]=await Promise.all([c,u]);zM(i)||OM(i,d.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[IM]="firebase",m.update=!0,f!=null&&(m[kM]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.app=e}_delete(){return delete ac[this.app.options.appId],Promise.resolve()}}let ac={},__=[];const E_={};let Nm="dataLayer",nO="gtag",C_,dT,S_=!1;function rO(){const t=[];if(RS()&&t.push("This is a browser extension environment."),T3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=kn.create("invalid-analytics-context",{errorInfo:e});vn.warn(n.message)}}function sO(t,e,n){rO();const r=t.options.appId;if(!r)throw kn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kn.create("no-api-key");if(ac[r]!=null)throw kn.create("already-exists",{id:r});if(!S_){FM(Nm);const{wrappedGtag:i,gtagCore:o}=UM(ac,__,E_,Nm,nO);dT=i,C_=o,S_=!0}return ac[r]=eO(t,__,E_,e,C_,Nm,n),new tO(t)}function iO(t=py()){t=at(t);const e=bo(t,ef);return e.isInitialized()?e.getImmediate():oO(t)}function oO(t,e={}){const n=bo(t,ef);if(n.isInitialized()){const s=n.getImmediate();if(Pc(e,n.getOptions()))return s;throw kn.create("already-initialized")}return n.initialize({options:e})}function aO(t,e,n,r){t=at(t),JM(dT,ac[t.app.options.appId],e,n,r).catch(s=>vn.error(s))}const N_="@firebase/analytics",A_="0.10.8";function lO(){Er(new sr(ef,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return sO(r,s,n)},"PUBLIC")),Er(new sr("analytics-internal",t,"PRIVATE")),zn(N_,A_),zn(N_,A_,"esm2017");function t(e){try{const n=e.getProvider(ef).getImmediate();return{logEvent:(r,s,i)=>aO(n,r,s,i)}}catch(n){throw kn.create("interop-component-reg-failed",{reason:n})}}}lO();const cO={apiKey:"AIzaSyBFgc4ilnw_4sI0XIdSDEnLiHj5X5xBTEY",authDomain:"investment-tracker-new.firebaseapp.com",projectId:"investment-tracker-new",storageBucket:"investment-tracker-new.firebasestorage.app",messagingSenderId:"909641216807",appId:"1:909641216807:web:13c5e6a420630dfcfeef02",measurementId:"G-VR84X1XQLD"},pv=VS(cO),ee=jR(pv),pa=V7(pv);iO(pv);const pe={INVESTMENT_DATA:"investmentData",INVESTORS:"investors",INVESTOR_PERFORMANCE:"investorPerformance",CHAT_CONVERSATIONS:"chatConversations",CHAT_MESSAGES:"chatMessages",USERS:"users",NEWS_SOURCES:"newsSources",ADMINS:"admins"},Oo={async getInvestmentData(){try{const t=await $e(he(ee,pe.INVESTMENT_DATA));if(!t.empty){const e=t.docs[0];return{id:e.id,...e.data()}}return null}catch(t){throw console.error("Error getting investment data:",t),t}},async saveInvestmentData(t){try{const e=await this.getInvestmentData();return e?(await Wn(He(ee,pe.INVESTMENT_DATA,e.id),{...t,updatedAt:Se()}),{id:e.id,...t}):{id:(await tr(he(ee,pe.INVESTMENT_DATA),{...t,createdAt:Se(),updatedAt:Se()})).id,...t}}catch(e){throw console.error("Error saving investment data:",e),e}},async addPerformanceEntry(t){try{let e=await this.getInvestmentData();e||(console.log("Creating new investment data document..."),e=await this.saveInvestmentData({startingBalance:0,performance:[]}));const n=he(ee,pe.INVESTMENT_DATA,e.id,"performance");return{id:(await tr(n,{...t,createdAt:Se()})).id,...t}}catch(e){throw console.error("Error adding performance entry:",e),e}},async updatePerformanceEntry(t,e){try{let n=await this.getInvestmentData();return n||(console.log("Creating new investment data document for update..."),n=await this.saveInvestmentData({startingBalance:0,performance:[]})),await Wn(He(ee,pe.INVESTMENT_DATA,n.id,"performance",t),{...e,updatedAt:Se()}),{id:t,...e}}catch(n){throw console.error("Error updating performance entry:",n),n}},async deletePerformanceEntry(t){try{let e=await this.getInvestmentData();e||(console.log("Creating new investment data document for delete..."),e=await this.saveInvestmentData({startingBalance:0,performance:[]})),await Br(He(ee,pe.INVESTMENT_DATA,e.id,"performance",t))}catch(e){throw console.error("Error deleting performance entry:",e),e}},onInvestmentDataChange(t){const e=it(he(ee,pe.INVESTMENT_DATA));return ti(e,async n=>{if(n.empty)t(null);else{const r=n.docs[0],s={id:r.id,...r.data()};try{const i=he(ee,pe.INVESTMENT_DATA,r.id,"performance"),a=(await $e(i)).docs.map(c=>({id:c.id,...c.data()}));t({...s,performance:a})}catch(i){console.error("Error loading performance data:",i),t({...s,performance:[]})}}})}},Mn={async getInvestors(){try{return(await $e(he(ee,pe.INVESTORS))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error getting investors:",t),t}},async getInvestor(t){try{const e=He(ee,pe.INVESTORS,t),n=await UR(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting investor:",e),e}},async addInvestor(t){try{return{id:(await tr(he(ee,pe.INVESTORS),{...t,createdAt:Se(),updatedAt:Se()})).id,...t}}catch(e){throw console.error("Error adding investor:",e),e}},async updateInvestor(t,e){try{return await Wn(He(ee,pe.INVESTORS,t),{...e,updatedAt:Se()}),{id:t,...e}}catch(n){throw console.error("Error updating investor:",n),n}},async deleteInvestor(t){try{try{const e=he(ee,pe.INVESTORS,t,"performance"),r=(await $e(e)).docs.map(s=>Br(s.ref));await Promise.all(r)}catch{console.log("No performance data to delete for investor:",t)}try{const e=he(ee,pe.CHAT_CONVERSATIONS),n=it(e,rn("investorId","==",t)),r=await $e(n);for(const s of r.docs){const i=he(ee,pe.CHAT_MESSAGES),o=it(i,rn("conversationId","==",s.id)),c=(await $e(o)).docs.map(u=>Br(u.ref));await Promise.all(c),await Br(s.ref)}}catch{console.log("No chat data to delete for investor:",t)}await Br(He(ee,pe.INVESTORS,t)),console.log("Investor and all related data deleted successfully")}catch(e){throw console.error("Error deleting investor:",e),e}},async addInvestorPerformance(t,e){try{const n=he(ee,pe.INVESTORS,t,"performance");return{id:(await tr(n,{...e,createdAt:Se()})).id,...e}}catch(n){throw console.error("Error adding investor performance:",n),n}},async getInvestorPerformance(t){try{const e=he(ee,pe.INVESTORS,t,"performance");return(await $e(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting investor performance:",e),e}},async updateInvestorPerformance(t,e,n){try{const r=He(ee,pe.INVESTORS,t,"performance",e);return await Wn(r,{...n,updatedAt:Se()}),{id:e,...n}}catch(r){throw console.error("Error updating investor performance entry:",r),r}},async deleteInvestorPerformance(t,e){try{const n=He(ee,pe.INVESTORS,t,"performance",e);await Br(n)}catch(n){throw console.error("Error deleting investor performance entry:",n),n}},onInvestorsChange(t){const e=it(he(ee,pe.INVESTORS));return ti(e,n=>{const s=n.docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var u,d;const a=(u=i.createdAt)!=null&&u.toDate?i.createdAt.toDate():new Date(i.createdAt||0);return((d=o.createdAt)!=null&&d.toDate?o.createdAt.toDate():new Date(o.createdAt||0))-a});t(s)})}},pt={async getConversations(){try{return(await $e(he(ee,pe.CHAT_CONVERSATIONS))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error getting conversations:",t),t}},async createConversation(t){try{let e;return t.id?(e=He(ee,pe.CHAT_CONVERSATIONS,t.id),await Zd(e,{...t,createdAt:Se(),lastMessageAt:Se(),isActive:!0})):e=await tr(he(ee,pe.CHAT_CONVERSATIONS),{...t,createdAt:Se(),lastMessageAt:Se()}),{id:e.id,...t}}catch(e){throw console.error("Error creating conversation:",e),e}},async getMessages(t){try{const e=he(ee,pe.CHAT_MESSAGES),n=it(e,rn("conversationId","==",t));return(await $e(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var u,d;const a=(u=i.timestamp)!=null&&u.toDate?i.timestamp.toDate():new Date(i.timestamp||0),c=(d=o.timestamp)!=null&&d.toDate?o.timestamp.toDate():new Date(o.timestamp||0);return a-c})}catch(e){throw console.error("Error getting messages:",e),e}},async sendMessage(t){try{return{id:(await tr(he(ee,pe.CHAT_MESSAGES),{...t,timestamp:Se()})).id,...t}}catch(e){throw console.error("Error sending message:",e),e}},async updateConversationLastMessage(t){try{const e=He(ee,pe.CHAT_CONVERSATIONS,t);await Wn(e,{lastMessageAt:Se()})}catch(e){if(e.code==="not-found")console.log("Conversation not found, creating new one..."),await this.createConversation({id:t,createdAt:Se(),lastMessageAt:Se(),isActive:!0});else throw console.error("Error updating conversation:",e),e}},onConversationsChange(t){const e=it(he(ee,pe.CHAT_CONVERSATIONS));return ti(e,n=>{const s=n.docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var u,d;const a=(u=i.lastMessageAt)!=null&&u.toDate?i.lastMessageAt.toDate():new Date(i.lastMessageAt||0);return((d=o.lastMessageAt)!=null&&d.toDate?o.lastMessageAt.toDate():new Date(o.lastMessageAt||0))-a});t(s)})},onMessagesChange(t,e){const n=he(ee,pe.CHAT_MESSAGES),r=it(n,rn("conversationId","==",t));return ti(r,s=>{const o=s.docs.map(a=>({id:a.id,...a.data()})).sort((a,c)=>{var f,m;const u=(f=a.timestamp)!=null&&f.toDate?a.timestamp.toDate():new Date(a.timestamp||0),d=(m=c.timestamp)!=null&&m.toDate?c.timestamp.toDate():new Date(c.timestamp||0);return u-d});e(o)})},onAllMessagesChange(t){const e=he(ee,pe.CHAT_MESSAGES);return ti(e,n=>{const s=n.docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var u,d;const a=(u=i.timestamp)!=null&&u.toDate?i.timestamp.toDate():new Date(i.timestamp||0),c=(d=o.timestamp)!=null&&d.toDate?o.timestamp.toDate():new Date(o.timestamp||0);return a-c});t(s)})},async deleteConversation(t){try{const e=he(ee,pe.CHAT_MESSAGES),n=it(e,rn("conversationId","==",t)),s=(await $e(n)).docs.map(i=>Br(i.ref));await Promise.all(s),await Br(He(ee,pe.CHAT_CONVERSATIONS,t)),console.log("Conversation and messages deleted successfully")}catch(e){throw console.error("Error deleting conversation:",e),e}}},_s={async getNewsSources(){try{const t=await $e(he(ee,pe.NEWS_SOURCES));return t.empty?[]:t.docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error getting news sources:",t),t}},async saveNewsSources(t){try{const e=n_(ee),n=await this.getNewsSources();for(const r of n){const s=He(ee,pe.NEWS_SOURCES,r.id);e.delete(s)}for(const r of t){const s=He(he(ee,pe.NEWS_SOURCES));e.set(s,{...r,createdAt:Se(),updatedAt:Se()})}return await e.commit(),t}catch(e){throw console.error("Error saving news sources:",e),e}},async addNewsSource(t){try{return{id:(await tr(he(ee,pe.NEWS_SOURCES),{...t,createdAt:Se(),updatedAt:Se()})).id,...t}}catch(e){throw console.error("Error adding news source:",e),e}},async updateNewsSource(t,e){try{const n=He(ee,pe.NEWS_SOURCES,t);return await Wn(n,{...e,updatedAt:Se()}),{id:t,...e}}catch(n){throw console.error("Error updating news source:",n),n}},async deleteNewsSource(t){try{const e=He(ee,pe.NEWS_SOURCES,t);return await Br(e),{id:t}}catch(e){throw console.error("Error deleting news source:",e),e}},async clearAllNewsSources(){try{console.log("Starting clear operation...");const t=await $e(he(ee,pe.NEWS_SOURCES));if(console.log("Total documents found:",t.size),t.empty)return console.log("No documents to delete"),!0;const e=n_(ee);let n=0;t.docs.forEach(s=>{e.delete(s.ref),n++,console.log("Marked for deletion:",s.id,s.data().name)}),await e.commit(),console.log(`Batch commit completed. Deleted ${n} documents.`);const r=await $e(he(ee,pe.NEWS_SOURCES));return console.log("Remaining documents after deletion:",r.size),!0}catch(t){throw console.error("Error clearing news sources:",t),t}},onNewsSourcesChange(t){const e=it(he(ee,pe.NEWS_SOURCES));return ti(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async updateAdminPassword(t,e){try{console.log("COLLECTIONS.ADMINS:",pe.ADMINS);const n=await $e(he(ee,"admins"));if(n.empty)throw new Error("No admin account found");const r=n.docs[0];if(r.data().password!==t)throw new Error("Current password is incorrect");return await Wn(He(ee,"admins",r.id),{password:e,updatedAt:Se()}),{success:!0}}catch(n){throw console.error("Error updating admin password:",n),n}}},hT={},uO=Object.freeze(Object.defineProperty({__proto__:null,default:hT},Symbol.toStringTag,{value:"Module"}));var Gx=null;function dO(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return hT.randomBytes(t)}catch{}if(!Gx)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Gx(t)}function hO(t){Gx=t}function xv(t,e){if(t=t||gv,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var n=[];return n.push("$2b$"),t<10&&n.push("0"),n.push(t.toString()),n.push("$"),n.push(tf(dO(zc),zc)),n.join("")}function fT(t,e,n){if(typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof t>"u")t=gv;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function r(s){Jn(function(){try{s(null,xv(t))}catch(i){s(i)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(s,i){r(function(o,a){if(o){i(o);return}s(a)})})}function mT(t,e){if(typeof e>"u"&&(e=gv),typeof e=="number"&&(e=xv(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return Kx(t,e)}function pT(t,e,n,r){function s(i){typeof t=="string"&&typeof e=="number"?fT(e,function(o,a){Kx(t,a,i,r)}):typeof t=="string"&&typeof e=="string"?Kx(t,e,i,r):Jn(i.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,c){if(a){o(a);return}i(c)})})}function xT(t,e){for(var n=t.length^e.length,r=0;r<t.length;++r)n|=t.charCodeAt(r)^e.charCodeAt(r);return n===0}function fO(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:xT(mT(t,e.substring(0,e.length-31)),e)}function mO(t,e,n,r){function s(i){if(typeof t!="string"||typeof e!="string"){Jn(i.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){Jn(i.bind(this,null,!1));return}pT(t,e.substring(0,29),function(o,a){o?i(o):i(null,xT(a,e))},r)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,c){if(a){o(a);return}i(c)})})}function pO(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function xO(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function gO(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return gT(t)>72}var Jn=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function gT(t){for(var e=0,n=0,r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,e+=4):e+=3;return e}function yO(t){for(var e=0,n,r,s=new Array(gT(t)),i=0,o=t.length;i<o;++i)n=t.charCodeAt(i),n<128?s[e++]=n:n<2048?(s[e++]=n>>6|192,s[e++]=n&63|128):(n&64512)===55296&&((r=t.charCodeAt(i+1))&64512)===56320?(n=65536+((n&1023)<<10)+(r&1023),++i,s[e++]=n>>18|240,s[e++]=n>>12&63|128,s[e++]=n>>6&63|128,s[e++]=n&63|128):(s[e++]=n>>12|224,s[e++]=n>>6&63|128,s[e++]=n&63|128);return s}var Fo="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Es=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function tf(t,e){var n=0,r=[],s,i;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;n<e;){if(s=t[n++]&255,r.push(Fo[s>>2&63]),s=(s&3)<<4,n>=e){r.push(Fo[s&63]);break}if(i=t[n++]&255,s|=i>>4&15,r.push(Fo[s&63]),s=(i&15)<<2,n>=e){r.push(Fo[s&63]);break}i=t[n++]&255,s|=i>>6&3,r.push(Fo[s&63]),r.push(Fo[i&63])}return r.join("")}function yT(t,e){var n=0,r=t.length,s=0,i=[],o,a,c,u,d,f;if(e<=0)throw Error("Illegal len: "+e);for(;n<r-1&&s<e&&(f=t.charCodeAt(n++),o=f<Es.length?Es[f]:-1,f=t.charCodeAt(n++),a=f<Es.length?Es[f]:-1,!(o==-1||a==-1||(d=o<<2>>>0,d|=(a&48)>>4,i.push(String.fromCharCode(d)),++s>=e||n>=r)||(f=t.charCodeAt(n++),c=f<Es.length?Es[f]:-1,c==-1)||(d=(a&15)<<4>>>0,d|=(c&60)>>2,i.push(String.fromCharCode(d)),++s>=e||n>=r)));)f=t.charCodeAt(n++),u=f<Es.length?Es[f]:-1,d=(c&3)<<6>>>0,d|=u,i.push(String.fromCharCode(d)),++s;var m=[];for(n=0;n<s;n++)m.push(i[n].charCodeAt(0));return m}var zc=16,gv=10,vO=16,wO=100,T_=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],k_=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],vT=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function $c(t,e,n,r){var s,i=t[e],o=t[e+1];return i^=n[0],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[1],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[2],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[3],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[4],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[5],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[6],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[7],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[8],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[9],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[10],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[11],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[12],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[13],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[14],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[15],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[16],t[e]=o^n[vO+1],t[e+1]=i,t}function Ho(t,e){for(var n=0,r=0;n<4;++n)r=r<<8|t[e]&255,e=(e+1)%t.length;return{key:r,offp:e}}function I_(t,e,n){for(var r=0,s=[0,0],i=e.length,o=n.length,a,c=0;c<i;c++)a=Ho(t,r),r=a.offp,e[c]=e[c]^a.key;for(c=0;c<i;c+=2)s=$c(s,0,e,n),e[c]=s[0],e[c+1]=s[1];for(c=0;c<o;c+=2)s=$c(s,0,e,n),n[c]=s[0],n[c+1]=s[1]}function bO(t,e,n,r){for(var s=0,i=[0,0],o=n.length,a=r.length,c,u=0;u<o;u++)c=Ho(e,s),s=c.offp,n[u]=n[u]^c.key;for(s=0,u=0;u<o;u+=2)c=Ho(t,s),s=c.offp,i[0]^=c.key,c=Ho(t,s),s=c.offp,i[1]^=c.key,i=$c(i,0,n,r),n[u]=i[0],n[u+1]=i[1];for(u=0;u<a;u+=2)c=Ho(t,s),s=c.offp,i[0]^=c.key,c=Ho(t,s),s=c.offp,i[1]^=c.key,i=$c(i,0,n,r),r[u]=i[0],r[u+1]=i[1]}function j_(t,e,n,r,s){var i=vT.slice(),o=i.length,a;if(n<4||n>31)if(a=Error("Illegal number of rounds (4-31): "+n),r){Jn(r.bind(this,a));return}else throw a;if(e.length!==zc)if(a=Error("Illegal salt length: "+e.length+" != "+zc),r){Jn(r.bind(this,a));return}else throw a;n=1<<n>>>0;var c,u,d=0,f;typeof Int32Array=="function"?(c=new Int32Array(T_),u=new Int32Array(k_)):(c=T_.slice(),u=k_.slice()),bO(e,t,c,u);function m(){if(s&&s(d/n),d<n)for(var x=Date.now();d<n&&(d=d+1,I_(t,c,u),I_(e,c,u),!(Date.now()-x>wO)););else{for(d=0;d<64;d++)for(f=0;f<o>>1;f++)$c(i,f<<1,c,u);var _=[];for(d=0;d<o;d++)_.push((i[d]>>24&255)>>>0),_.push((i[d]>>16&255)>>>0),_.push((i[d]>>8&255)>>>0),_.push((i[d]&255)>>>0);if(r){r(null,_);return}else return _}r&&Jn(m)}if(typeof r<"u")m();else for(var p;;)if(typeof(p=m())<"u")return p||[]}function Kx(t,e,n,r){var s;if(typeof t!="string"||typeof e!="string")if(s=Error("Invalid string / salt: Not a string"),n){Jn(n.bind(this,s));return}else throw s;var i,o;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(s=Error("Invalid salt version: "+e.substring(0,2)),n){Jn(n.bind(this,s));return}else throw s;if(e.charAt(2)==="$")i=String.fromCharCode(0),o=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+e.substring(2,4)),n){Jn(n.bind(this,s));return}else throw s;o=4}if(e.charAt(o+2)>"$")if(s=Error("Missing salt rounds"),n){Jn(n.bind(this,s));return}else throw s;var a=parseInt(e.substring(o,o+1),10)*10,c=parseInt(e.substring(o+1,o+2),10),u=a+c,d=e.substring(o+3,o+25);t+=i>="a"?"\0":"";var f=yO(t),m=yT(d,zc);function p(x){var _=[];return _.push("$2"),i>="a"&&_.push(i),_.push("$"),u<10&&_.push("0"),_.push(u.toString()),_.push("$"),_.push(tf(m,m.length)),_.push(tf(x,vT.length*4-1)),_.join("")}if(typeof n>"u")return p(j_(f,m,u));j_(f,m,u,function(x,_){x?n(x,null):n(null,p(_))},r)}function _O(t,e){return tf(t,e)}function EO(t,e){return yT(t,e)}const wT={setRandomFallback:hO,genSaltSync:xv,genSalt:fT,hashSync:mT,hash:pT,compareSync:fO,compare:mO,getRounds:pO,getSalt:xO,truncates:gO,encodeBase64:_O,decodeBase64:EO};var bT={exports:{}};function CO(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Am={exports:{}};const yv=OI(uO);var P_;function Ee(){return P_||(P_=1,function(t,e){(function(n,r){t.exports=r()})(ye,function(){var n=n||function(r,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof ye<"u"&&ye.crypto&&(i=ye.crypto),!i&&typeof CO=="function")try{i=yv}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(b){var E;return y.prototype=b,E=new y,y.prototype=null,E}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(y){var b=a(this);return y&&b.mixIn(y),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var b in y)y.hasOwnProperty(b)&&(this[b]=y[b]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=u.WordArray=d.extend({init:function(y,b){y=this.words=y||[],b!=s?this.sigBytes=b:this.sigBytes=y.length*4},toString:function(y){return(y||p).stringify(this)},concat:function(y){var b=this.words,E=y.words,T=this.sigBytes,k=y.sigBytes;if(this.clamp(),T%4)for(var w=0;w<k;w++){var g=E[w>>>2]>>>24-w%4*8&255;b[T+w>>>2]|=g<<24-(T+w)%4*8}else for(var A=0;A<k;A+=4)b[T+A>>>2]=E[A>>>2];return this.sigBytes+=k,this},clamp:function(){var y=this.words,b=this.sigBytes;y[b>>>2]&=4294967295<<32-b%4*8,y.length=r.ceil(b/4)},clone:function(){var y=d.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var b=[],E=0;E<y;E+=4)b.push(o());return new f.init(b,y)}}),m=c.enc={},p=m.Hex={stringify:function(y){for(var b=y.words,E=y.sigBytes,T=[],k=0;k<E;k++){var w=b[k>>>2]>>>24-k%4*8&255;T.push((w>>>4).toString(16)),T.push((w&15).toString(16))}return T.join("")},parse:function(y){for(var b=y.length,E=[],T=0;T<b;T+=2)E[T>>>3]|=parseInt(y.substr(T,2),16)<<24-T%8*4;return new f.init(E,b/2)}},x=m.Latin1={stringify:function(y){for(var b=y.words,E=y.sigBytes,T=[],k=0;k<E;k++){var w=b[k>>>2]>>>24-k%4*8&255;T.push(String.fromCharCode(w))}return T.join("")},parse:function(y){for(var b=y.length,E=[],T=0;T<b;T++)E[T>>>2]|=(y.charCodeAt(T)&255)<<24-T%4*8;return new f.init(E,b)}},_=m.Utf8={stringify:function(y){try{return decodeURIComponent(escape(x.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return x.parse(unescape(encodeURIComponent(y)))}},v=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=_.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var b,E=this._data,T=E.words,k=E.sigBytes,w=this.blockSize,g=w*4,A=k/g;y?A=r.ceil(A):A=r.max((A|0)-this._minBufferSize,0);var N=A*w,j=r.min(N*4,k);if(N){for(var D=0;D<N;D+=w)this._doProcessBlock(T,D);b=T.splice(0,N),E.sigBytes-=j}return new f.init(b,j)},clone:function(){var y=d.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});u.Hasher=v.extend({cfg:d.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(y){return function(b,E){return new y.init(E).finalize(b)}},_createHmacHelper:function(y){return function(b,E){return new S.HMAC.init(y,E).finalize(b)}}});var S=c.algo={};return c}(Math);return n})}(Am)),Am.exports}var Tm={exports:{}},D_;function a0(){return D_||(D_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(r){var s=n,i=s.lib,o=i.Base,a=i.WordArray,c=s.x64={};c.Word=o.extend({init:function(u,d){this.high=u,this.low=d}}),c.WordArray=o.extend({init:function(u,d){u=this.words=u||[],d!=r?this.sigBytes=d:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,d=u.length,f=[],m=0;m<d;m++){var p=u[m];f.push(p.high),f.push(p.low)}return a.create(f,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),d=u.words=this.words.slice(0),f=d.length,m=0;m<f;m++)d[m]=d[m].clone();return u}})}(),n})}(Tm)),Tm.exports}var km={exports:{}},R_;function SO(){return R_||(R_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,s=r.lib,i=s.WordArray,o=i.init,a=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,d=[],f=0;f<u;f++)d[f>>>2]|=c[f]<<24-f%4*8;o.call(this,d,u)}else o.apply(this,arguments)};a.prototype=i}}(),n.lib.WordArray})}(km)),km.exports}var Im={exports:{}},M_;function NO(){return M_||(M_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var u=c.words,d=c.sigBytes,f=[],m=0;m<d;m+=2){var p=u[m>>>2]>>>16-m%4*8&65535;f.push(String.fromCharCode(p))}return f.join("")},parse:function(c){for(var u=c.length,d=[],f=0;f<u;f++)d[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return i.create(d,u*2)}},o.Utf16LE={stringify:function(c){for(var u=c.words,d=c.sigBytes,f=[],m=0;m<d;m+=2){var p=a(u[m>>>2]>>>16-m%4*8&65535);f.push(String.fromCharCode(p))}return f.join("")},parse:function(c){for(var u=c.length,d=[],f=0;f<u;f++)d[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return i.create(d,u*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),n.enc.Utf16})}(Im)),Im.exports}var jm={exports:{}},O_;function So(){return O_||(O_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Base64={stringify:function(c){var u=c.words,d=c.sigBytes,f=this._map;c.clamp();for(var m=[],p=0;p<d;p+=3)for(var x=u[p>>>2]>>>24-p%4*8&255,_=u[p+1>>>2]>>>24-(p+1)%4*8&255,v=u[p+2>>>2]>>>24-(p+2)%4*8&255,S=x<<16|_<<8|v,y=0;y<4&&p+y*.75<d;y++)m.push(f.charAt(S>>>6*(3-y)&63));var b=f.charAt(64);if(b)for(;m.length%4;)m.push(b);return m.join("")},parse:function(c){var u=c.length,d=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<d.length;m++)f[d.charCodeAt(m)]=m}var p=d.charAt(64);if(p){var x=c.indexOf(p);x!==-1&&(u=x)}return a(c,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,u,d){for(var f=[],m=0,p=0;p<u;p++)if(p%4){var x=d[c.charCodeAt(p-1)]<<p%4*2,_=d[c.charCodeAt(p)]>>>6-p%4*2,v=x|_;f[m>>>2]|=v<<24-m%4*8,m++}return i.create(f,m)}}(),n.enc.Base64})}(jm)),jm.exports}var Pm={exports:{}},F_;function AO(){return F_||(F_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var d=c.words,f=c.sigBytes,m=u?this._safe_map:this._map;c.clamp();for(var p=[],x=0;x<f;x+=3)for(var _=d[x>>>2]>>>24-x%4*8&255,v=d[x+1>>>2]>>>24-(x+1)%4*8&255,S=d[x+2>>>2]>>>24-(x+2)%4*8&255,y=_<<16|v<<8|S,b=0;b<4&&x+b*.75<f;b++)p.push(m.charAt(y>>>6*(3-b)&63));var E=m.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},parse:function(c,u){u===void 0&&(u=!0);var d=c.length,f=u?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var p=0;p<f.length;p++)m[f.charCodeAt(p)]=p}var x=f.charAt(64);if(x){var _=c.indexOf(x);_!==-1&&(d=_)}return a(c,d,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,u,d){for(var f=[],m=0,p=0;p<u;p++)if(p%4){var x=d[c.charCodeAt(p-1)]<<p%4*2,_=d[c.charCodeAt(p)]>>>6-p%4*2,v=x|_;f[m>>>2]|=v<<24-m%4*8,m++}return i.create(f,m)}}(),n.enc.Base64url})}(Pm)),Pm.exports}var Dm={exports:{}},B_;function No(){return B_||(B_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=[];(function(){for(var _=0;_<64;_++)u[_]=r.abs(r.sin(_+1))*4294967296|0})();var d=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,v){for(var S=0;S<16;S++){var y=v+S,b=_[y];_[y]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,T=_[v+0],k=_[v+1],w=_[v+2],g=_[v+3],A=_[v+4],N=_[v+5],j=_[v+6],D=_[v+7],P=_[v+8],M=_[v+9],$=_[v+10],G=_[v+11],X=_[v+12],H=_[v+13],Q=_[v+14],J=_[v+15],V=E[0],F=E[1],L=E[2],W=E[3];V=f(V,F,L,W,T,7,u[0]),W=f(W,V,F,L,k,12,u[1]),L=f(L,W,V,F,w,17,u[2]),F=f(F,L,W,V,g,22,u[3]),V=f(V,F,L,W,A,7,u[4]),W=f(W,V,F,L,N,12,u[5]),L=f(L,W,V,F,j,17,u[6]),F=f(F,L,W,V,D,22,u[7]),V=f(V,F,L,W,P,7,u[8]),W=f(W,V,F,L,M,12,u[9]),L=f(L,W,V,F,$,17,u[10]),F=f(F,L,W,V,G,22,u[11]),V=f(V,F,L,W,X,7,u[12]),W=f(W,V,F,L,H,12,u[13]),L=f(L,W,V,F,Q,17,u[14]),F=f(F,L,W,V,J,22,u[15]),V=m(V,F,L,W,k,5,u[16]),W=m(W,V,F,L,j,9,u[17]),L=m(L,W,V,F,G,14,u[18]),F=m(F,L,W,V,T,20,u[19]),V=m(V,F,L,W,N,5,u[20]),W=m(W,V,F,L,$,9,u[21]),L=m(L,W,V,F,J,14,u[22]),F=m(F,L,W,V,A,20,u[23]),V=m(V,F,L,W,M,5,u[24]),W=m(W,V,F,L,Q,9,u[25]),L=m(L,W,V,F,g,14,u[26]),F=m(F,L,W,V,P,20,u[27]),V=m(V,F,L,W,H,5,u[28]),W=m(W,V,F,L,w,9,u[29]),L=m(L,W,V,F,D,14,u[30]),F=m(F,L,W,V,X,20,u[31]),V=p(V,F,L,W,N,4,u[32]),W=p(W,V,F,L,P,11,u[33]),L=p(L,W,V,F,G,16,u[34]),F=p(F,L,W,V,Q,23,u[35]),V=p(V,F,L,W,k,4,u[36]),W=p(W,V,F,L,A,11,u[37]),L=p(L,W,V,F,D,16,u[38]),F=p(F,L,W,V,$,23,u[39]),V=p(V,F,L,W,H,4,u[40]),W=p(W,V,F,L,T,11,u[41]),L=p(L,W,V,F,g,16,u[42]),F=p(F,L,W,V,j,23,u[43]),V=p(V,F,L,W,M,4,u[44]),W=p(W,V,F,L,X,11,u[45]),L=p(L,W,V,F,J,16,u[46]),F=p(F,L,W,V,w,23,u[47]),V=x(V,F,L,W,T,6,u[48]),W=x(W,V,F,L,D,10,u[49]),L=x(L,W,V,F,Q,15,u[50]),F=x(F,L,W,V,N,21,u[51]),V=x(V,F,L,W,X,6,u[52]),W=x(W,V,F,L,g,10,u[53]),L=x(L,W,V,F,$,15,u[54]),F=x(F,L,W,V,k,21,u[55]),V=x(V,F,L,W,P,6,u[56]),W=x(W,V,F,L,J,10,u[57]),L=x(L,W,V,F,j,15,u[58]),F=x(F,L,W,V,H,21,u[59]),V=x(V,F,L,W,A,6,u[60]),W=x(W,V,F,L,G,10,u[61]),L=x(L,W,V,F,w,15,u[62]),F=x(F,L,W,V,M,21,u[63]),E[0]=E[0]+V|0,E[1]=E[1]+F|0,E[2]=E[2]+L|0,E[3]=E[3]+W|0},_doFinalize:function(){var _=this._data,v=_.words,S=this._nDataBytes*8,y=_.sigBytes*8;v[y>>>5]|=128<<24-y%32;var b=r.floor(S/4294967296),E=S;v[(y+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,v[(y+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_.sigBytes=(v.length+1)*4,this._process();for(var T=this._hash,k=T.words,w=0;w<4;w++){var g=k[w];k[w]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}return T},clone:function(){var _=a.clone.call(this);return _._hash=this._hash.clone(),_}});function f(_,v,S,y,b,E,T){var k=_+(v&S|~v&y)+b+T;return(k<<E|k>>>32-E)+v}function m(_,v,S,y,b,E,T){var k=_+(v&y|S&~y)+b+T;return(k<<E|k>>>32-E)+v}function p(_,v,S,y,b,E,T){var k=_+(v^S^y)+b+T;return(k<<E|k>>>32-E)+v}function x(_,v,S,y,b,E,T){var k=_+(S^(v|~y))+b+T;return(k<<E|k>>>32-E)+v}s.MD5=a._createHelper(d),s.HmacMD5=a._createHmacHelper(d)}(Math),n.MD5})}(Dm)),Dm.exports}var Rm={exports:{}},L_;function _T(){return L_||(L_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=s.Hasher,a=r.algo,c=[],u=a.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,f){for(var m=this._hash.words,p=m[0],x=m[1],_=m[2],v=m[3],S=m[4],y=0;y<80;y++){if(y<16)c[y]=d[f+y]|0;else{var b=c[y-3]^c[y-8]^c[y-14]^c[y-16];c[y]=b<<1|b>>>31}var E=(p<<5|p>>>27)+S+c[y];y<20?E+=(x&_|~x&v)+1518500249:y<40?E+=(x^_^v)+1859775393:y<60?E+=(x&_|x&v|_&v)-1894007588:E+=(x^_^v)-899497514,S=v,v=_,_=x<<30|x>>>2,x=p,p=E}m[0]=m[0]+p|0,m[1]=m[1]+x|0,m[2]=m[2]+_|0,m[3]=m[3]+v|0,m[4]=m[4]+S|0},_doFinalize:function(){var d=this._data,f=d.words,m=this._nDataBytes*8,p=d.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(m/4294967296),f[(p+64>>>9<<4)+15]=m,d.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var d=o.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA1=o._createHelper(u),r.HmacSHA1=o._createHmacHelper(u)}(),n.SHA1})}(Rm)),Rm.exports}var Mm={exports:{}},V_;function vv(){return V_||(V_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=[],d=[];(function(){function p(S){for(var y=r.sqrt(S),b=2;b<=y;b++)if(!(S%b))return!1;return!0}function x(S){return(S-(S|0))*4294967296|0}for(var _=2,v=0;v<64;)p(_)&&(v<8&&(u[v]=x(r.pow(_,1/2))),d[v]=x(r.pow(_,1/3)),v++),_++})();var f=[],m=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(p,x){for(var _=this._hash.words,v=_[0],S=_[1],y=_[2],b=_[3],E=_[4],T=_[5],k=_[6],w=_[7],g=0;g<64;g++){if(g<16)f[g]=p[x+g]|0;else{var A=f[g-15],N=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,j=f[g-2],D=(j<<15|j>>>17)^(j<<13|j>>>19)^j>>>10;f[g]=N+f[g-7]+D+f[g-16]}var P=E&T^~E&k,M=v&S^v&y^S&y,$=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),G=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),X=w+G+P+d[g]+f[g],H=$+M;w=k,k=T,T=E,E=b+X|0,b=y,y=S,S=v,v=X+H|0}_[0]=_[0]+v|0,_[1]=_[1]+S|0,_[2]=_[2]+y|0,_[3]=_[3]+b|0,_[4]=_[4]+E|0,_[5]=_[5]+T|0,_[6]=_[6]+k|0,_[7]=_[7]+w|0},_doFinalize:function(){var p=this._data,x=p.words,_=this._nDataBytes*8,v=p.sigBytes*8;return x[v>>>5]|=128<<24-v%32,x[(v+64>>>9<<4)+14]=r.floor(_/4294967296),x[(v+64>>>9<<4)+15]=_,p.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=a._createHelper(m),s.HmacSHA256=a._createHmacHelper(m)}(Math),n.SHA256})}(Mm)),Mm.exports}var Om={exports:{}},U_;function TO(){return U_||(U_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),vv())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=a._createHelper(c),r.HmacSHA224=a._createHmacHelper(c)}(),n.SHA224})}(Om)),Om.exports}var Fm={exports:{}},z_;function ET(){return z_||(z_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),a0())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.Hasher,o=r.x64,a=o.Word,c=o.WordArray,u=r.algo;function d(){return a.create.apply(a,arguments)}var f=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],m=[];(function(){for(var x=0;x<80;x++)m[x]=d()})();var p=u.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(x,_){for(var v=this._hash.words,S=v[0],y=v[1],b=v[2],E=v[3],T=v[4],k=v[5],w=v[6],g=v[7],A=S.high,N=S.low,j=y.high,D=y.low,P=b.high,M=b.low,$=E.high,G=E.low,X=T.high,H=T.low,Q=k.high,J=k.low,V=w.high,F=w.low,L=g.high,W=g.low,oe=A,le=N,Le=j,ge=D,bi=P,qn=M,cs=$,Nr=G,Jt=X,Nt=H,us=Q,ds=J,_i=V,Ei=F,To=L,hs=W,Zt=0;Zt<80;Zt++){var en,lr,fs=m[Zt];if(Zt<16)lr=fs.high=x[_+Zt*2]|0,en=fs.low=x[_+Zt*2+1]|0;else{var ko=m[Zt-15],cr=ko.high,Je=ko.low,At=(cr>>>1|Je<<31)^(cr>>>8|Je<<24)^cr>>>7,Ci=(Je>>>1|cr<<31)^(Je>>>8|cr<<24)^(Je>>>7|cr<<25),tl=m[Zt-2],Ar=tl.high,Si=tl.low,Ni=(Ar>>>19|Si<<13)^(Ar<<3|Si>>>29)^Ar>>>6,nl=(Si>>>19|Ar<<13)^(Si<<3|Ar>>>29)^(Si>>>6|Ar<<26),rl=m[Zt-7],sl=rl.high,S0=rl.low,Pu=m[Zt-16],il=Pu.high,ol=Pu.low;en=Ci+S0,lr=At+sl+(en>>>0<Ci>>>0?1:0),en=en+nl,lr=lr+Ni+(en>>>0<nl>>>0?1:0),en=en+ol,lr=lr+il+(en>>>0<ol>>>0?1:0),fs.high=lr,fs.low=en}var Du=Jt&us^~Jt&_i,ms=Nt&ds^~Nt&Ei,al=oe&Le^oe&bi^Le&bi,ll=le&ge^le&qn^ge&qn,Tr=(oe>>>28|le<<4)^(oe<<30|le>>>2)^(oe<<25|le>>>7),cl=(le>>>28|oe<<4)^(le<<30|oe>>>2)^(le<<25|oe>>>7),Io=(Jt>>>14|Nt<<18)^(Jt>>>18|Nt<<14)^(Jt<<23|Nt>>>9),Ru=(Nt>>>14|Jt<<18)^(Nt>>>18|Jt<<14)^(Nt<<23|Jt>>>9),ps=f[Zt],Mu=ps.high,wt=ps.low,Ft=hs+Ru,un=To+Io+(Ft>>>0<hs>>>0?1:0),Ft=Ft+ms,un=un+Du+(Ft>>>0<ms>>>0?1:0),Ft=Ft+wt,un=un+Mu+(Ft>>>0<wt>>>0?1:0),Ft=Ft+en,un=un+lr+(Ft>>>0<en>>>0?1:0),xs=cl+ll,N0=Tr+al+(xs>>>0<cl>>>0?1:0);To=_i,hs=Ei,_i=us,Ei=ds,us=Jt,ds=Nt,Nt=Nr+Ft|0,Jt=cs+un+(Nt>>>0<Nr>>>0?1:0)|0,cs=bi,Nr=qn,bi=Le,qn=ge,Le=oe,ge=le,le=Ft+xs|0,oe=un+N0+(le>>>0<Ft>>>0?1:0)|0}N=S.low=N+le,S.high=A+oe+(N>>>0<le>>>0?1:0),D=y.low=D+ge,y.high=j+Le+(D>>>0<ge>>>0?1:0),M=b.low=M+qn,b.high=P+bi+(M>>>0<qn>>>0?1:0),G=E.low=G+Nr,E.high=$+cs+(G>>>0<Nr>>>0?1:0),H=T.low=H+Nt,T.high=X+Jt+(H>>>0<Nt>>>0?1:0),J=k.low=J+ds,k.high=Q+us+(J>>>0<ds>>>0?1:0),F=w.low=F+Ei,w.high=V+_i+(F>>>0<Ei>>>0?1:0),W=g.low=W+hs,g.high=L+To+(W>>>0<hs>>>0?1:0)},_doFinalize:function(){var x=this._data,_=x.words,v=this._nDataBytes*8,S=x.sigBytes*8;_[S>>>5]|=128<<24-S%32,_[(S+128>>>10<<5)+30]=Math.floor(v/4294967296),_[(S+128>>>10<<5)+31]=v,x.sigBytes=_.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var x=i.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});r.SHA512=i._createHelper(p),r.HmacSHA512=i._createHmacHelper(p)}(),n.SHA512})}(Fm)),Fm.exports}var Bm={exports:{}},$_;function kO(){return $_||($_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),a0(),ET())})(ye,function(n){return function(){var r=n,s=r.x64,i=s.Word,o=s.WordArray,a=r.algo,c=a.SHA512,u=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=c._doFinalize.call(this);return d.sigBytes-=16,d}});r.SHA384=c._createHelper(u),r.HmacSHA384=c._createHmacHelper(u)}(),n.SHA384})}(Bm)),Bm.exports}var Lm={exports:{}},H_;function IO(){return H_||(H_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),a0())})(ye,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.x64,u=c.Word,d=s.algo,f=[],m=[],p=[];(function(){for(var v=1,S=0,y=0;y<24;y++){f[v+5*S]=(y+1)*(y+2)/2%64;var b=S%5,E=(2*v+3*S)%5;v=b,S=E}for(var v=0;v<5;v++)for(var S=0;S<5;S++)m[v+5*S]=S+(2*v+3*S)%5*5;for(var T=1,k=0;k<24;k++){for(var w=0,g=0,A=0;A<7;A++){if(T&1){var N=(1<<A)-1;N<32?g^=1<<N:w^=1<<N-32}T&128?T=T<<1^113:T<<=1}p[k]=u.create(w,g)}})();var x=[];(function(){for(var v=0;v<25;v++)x[v]=u.create()})();var _=d.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],S=0;S<25;S++)v[S]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,S){for(var y=this._state,b=this.blockSize/2,E=0;E<b;E++){var T=v[S+2*E],k=v[S+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var w=y[E];w.high^=k,w.low^=T}for(var g=0;g<24;g++){for(var A=0;A<5;A++){for(var N=0,j=0,D=0;D<5;D++){var w=y[A+5*D];N^=w.high,j^=w.low}var P=x[A];P.high=N,P.low=j}for(var A=0;A<5;A++)for(var M=x[(A+4)%5],$=x[(A+1)%5],G=$.high,X=$.low,N=M.high^(G<<1|X>>>31),j=M.low^(X<<1|G>>>31),D=0;D<5;D++){var w=y[A+5*D];w.high^=N,w.low^=j}for(var H=1;H<25;H++){var N,j,w=y[H],Q=w.high,J=w.low,V=f[H];V<32?(N=Q<<V|J>>>32-V,j=J<<V|Q>>>32-V):(N=J<<V-32|Q>>>64-V,j=Q<<V-32|J>>>64-V);var F=x[m[H]];F.high=N,F.low=j}var L=x[0],W=y[0];L.high=W.high,L.low=W.low;for(var A=0;A<5;A++)for(var D=0;D<5;D++){var H=A+5*D,w=y[H],oe=x[H],le=x[(A+1)%5+5*D],Le=x[(A+2)%5+5*D];w.high=oe.high^~le.high&Le.high,w.low=oe.low^~le.low&Le.low}var w=y[0],ge=p[g];w.high^=ge.high,w.low^=ge.low}},_doFinalize:function(){var v=this._data,S=v.words;this._nDataBytes*8;var y=v.sigBytes*8,b=this.blockSize*32;S[y>>>5]|=1<<24-y%32,S[(r.ceil((y+1)/b)*b>>>5)-1]|=128,v.sigBytes=S.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,k=T/8,w=[],g=0;g<k;g++){var A=E[g],N=A.high,j=A.low;N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,w.push(j),w.push(N)}return new o.init(w,T)},clone:function(){for(var v=a.clone.call(this),S=v._state=this._state.slice(0),y=0;y<25;y++)S[y]=S[y].clone();return v}});s.SHA3=a._createHelper(_),s.HmacSHA3=a._createHmacHelper(_)}(Math),n.SHA3})}(Lm)),Lm.exports}var Vm={exports:{}},W_;function jO(){return W_||(W_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var s=n,i=s.lib,o=i.WordArray,a=i.Hasher,c=s.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,w){for(var g=0;g<16;g++){var A=w+g,N=k[A];k[A]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}var j=this._hash.words,D=p.words,P=x.words,M=u.words,$=d.words,G=f.words,X=m.words,H,Q,J,V,F,L,W,oe,le,Le;L=H=j[0],W=Q=j[1],oe=J=j[2],le=V=j[3],Le=F=j[4];for(var ge,g=0;g<80;g+=1)ge=H+k[w+M[g]]|0,g<16?ge+=v(Q,J,V)+D[0]:g<32?ge+=S(Q,J,V)+D[1]:g<48?ge+=y(Q,J,V)+D[2]:g<64?ge+=b(Q,J,V)+D[3]:ge+=E(Q,J,V)+D[4],ge=ge|0,ge=T(ge,G[g]),ge=ge+F|0,H=F,F=V,V=T(J,10),J=Q,Q=ge,ge=L+k[w+$[g]]|0,g<16?ge+=E(W,oe,le)+P[0]:g<32?ge+=b(W,oe,le)+P[1]:g<48?ge+=y(W,oe,le)+P[2]:g<64?ge+=S(W,oe,le)+P[3]:ge+=v(W,oe,le)+P[4],ge=ge|0,ge=T(ge,X[g]),ge=ge+Le|0,L=Le,Le=le,le=T(oe,10),oe=W,W=ge;ge=j[1]+J+le|0,j[1]=j[2]+V+Le|0,j[2]=j[3]+F+L|0,j[3]=j[4]+H+W|0,j[4]=j[0]+Q+oe|0,j[0]=ge},_doFinalize:function(){var k=this._data,w=k.words,g=this._nDataBytes*8,A=k.sigBytes*8;w[A>>>5]|=128<<24-A%32,w[(A+64>>>9<<4)+14]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,k.sigBytes=(w.length+1)*4,this._process();for(var N=this._hash,j=N.words,D=0;D<5;D++){var P=j[D];j[D]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return N},clone:function(){var k=a.clone.call(this);return k._hash=this._hash.clone(),k}});function v(k,w,g){return k^w^g}function S(k,w,g){return k&w|~k&g}function y(k,w,g){return(k|~w)^g}function b(k,w,g){return k&g|w&~g}function E(k,w,g){return k^(w|~g)}function T(k,w){return k<<w|k>>>32-w}s.RIPEMD160=a._createHelper(_),s.HmacRIPEMD160=a._createHmacHelper(_)}(),n.RIPEMD160})}(Vm)),Vm.exports}var Um={exports:{}},q_;function wv(){return q_||(q_=1,function(t,e){(function(n,r){t.exports=r(Ee())})(ye,function(n){(function(){var r=n,s=r.lib,i=s.Base,o=r.enc,a=o.Utf8,c=r.algo;c.HMAC=i.extend({init:function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=a.parse(d));var f=u.blockSize,m=f*4;d.sigBytes>m&&(d=u.finalize(d)),d.clamp();for(var p=this._oKey=d.clone(),x=this._iKey=d.clone(),_=p.words,v=x.words,S=0;S<f;S++)_[S]^=1549556828,v[S]^=909522486;p.sigBytes=x.sigBytes=m,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var d=this._hasher,f=d.finalize(u);d.reset();var m=d.finalize(this._oKey.clone().concat(f));return m}})})()})}(Um)),Um.exports}var zm={exports:{}},G_;function PO(){return G_||(G_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),vv(),wv())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.Base,o=s.WordArray,a=r.algo,c=a.SHA256,u=a.HMAC,d=a.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,m){for(var p=this.cfg,x=u.create(p.hasher,f),_=o.create(),v=o.create([1]),S=_.words,y=v.words,b=p.keySize,E=p.iterations;S.length<b;){var T=x.update(m).finalize(v);x.reset();for(var k=T.words,w=k.length,g=T,A=1;A<E;A++){g=x.finalize(g),x.reset();for(var N=g.words,j=0;j<w;j++)k[j]^=N[j]}_.concat(T),y[0]++}return _.sigBytes=b*4,_}});r.PBKDF2=function(f,m,p){return d.create(p).compute(f,m)}}(),n.PBKDF2})}(zm)),zm.exports}var $m={exports:{}},K_;function vi(){return K_||(K_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),_T(),wv())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.Base,o=s.WordArray,a=r.algo,c=a.MD5,u=a.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var m,p=this.cfg,x=p.hasher.create(),_=o.create(),v=_.words,S=p.keySize,y=p.iterations;v.length<S;){m&&x.update(m),m=x.update(d).finalize(f),x.reset();for(var b=1;b<y;b++)m=x.finalize(m),x.reset();_.concat(m)}return _.sigBytes=S*4,_}});r.EvpKDF=function(d,f,m){return u.create(m).compute(d,f)}}(),n.EvpKDF})}($m)),$m.exports}var Hm={exports:{}},Y_;function St(){return Y_||(Y_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),vi())})(ye,function(n){n.lib.Cipher||function(r){var s=n,i=s.lib,o=i.Base,a=i.WordArray,c=i.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var d=u.Base64,f=s.algo,m=f.EvpKDF,p=i.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(N,j){return this.create(this._ENC_XFORM_MODE,N,j)},createDecryptor:function(N,j){return this.create(this._DEC_XFORM_MODE,N,j)},init:function(N,j,D){this.cfg=this.cfg.extend(D),this._xformMode=N,this._key=j,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(N){return this._append(N),this._process()},finalize:function(N){N&&this._append(N);var j=this._doFinalize();return j},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function N(j){return typeof j=="string"?A:k}return function(j){return{encrypt:function(D,P,M){return N(P).encrypt(j,D,P,M)},decrypt:function(D,P,M){return N(P).decrypt(j,D,P,M)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var N=this._process(!0);return N},blockSize:1});var x=s.mode={},_=i.BlockCipherMode=o.extend({createEncryptor:function(N,j){return this.Encryptor.create(N,j)},createDecryptor:function(N,j){return this.Decryptor.create(N,j)},init:function(N,j){this._cipher=N,this._iv=j}}),v=x.CBC=function(){var N=_.extend();N.Encryptor=N.extend({processBlock:function(D,P){var M=this._cipher,$=M.blockSize;j.call(this,D,P,$),M.encryptBlock(D,P),this._prevBlock=D.slice(P,P+$)}}),N.Decryptor=N.extend({processBlock:function(D,P){var M=this._cipher,$=M.blockSize,G=D.slice(P,P+$);M.decryptBlock(D,P),j.call(this,D,P,$),this._prevBlock=G}});function j(D,P,M){var $,G=this._iv;G?($=G,this._iv=r):$=this._prevBlock;for(var X=0;X<M;X++)D[P+X]^=$[X]}return N}(),S=s.pad={},y=S.Pkcs7={pad:function(N,j){for(var D=j*4,P=D-N.sigBytes%D,M=P<<24|P<<16|P<<8|P,$=[],G=0;G<P;G+=4)$.push(M);var X=a.create($,P);N.concat(X)},unpad:function(N){var j=N.words[N.sigBytes-1>>>2]&255;N.sigBytes-=j}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:v,padding:y}),reset:function(){var N;p.reset.call(this);var j=this.cfg,D=j.iv,P=j.mode;this._xformMode==this._ENC_XFORM_MODE?N=P.createEncryptor:(N=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==N?this._mode.init(this,D&&D.words):(this._mode=N.call(P,this,D&&D.words),this._mode.__creator=N)},_doProcessBlock:function(N,j){this._mode.processBlock(N,j)},_doFinalize:function(){var N,j=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(j.pad(this._data,this.blockSize),N=this._process(!0)):(N=this._process(!0),j.unpad(N)),N},blockSize:128/32});var b=i.CipherParams=o.extend({init:function(N){this.mixIn(N)},toString:function(N){return(N||this.formatter).stringify(this)}}),E=s.format={},T=E.OpenSSL={stringify:function(N){var j,D=N.ciphertext,P=N.salt;return P?j=a.create([1398893684,1701076831]).concat(P).concat(D):j=D,j.toString(d)},parse:function(N){var j,D=d.parse(N),P=D.words;return P[0]==1398893684&&P[1]==1701076831&&(j=a.create(P.slice(2,4)),P.splice(0,4),D.sigBytes-=16),b.create({ciphertext:D,salt:j})}},k=i.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(N,j,D,P){P=this.cfg.extend(P);var M=N.createEncryptor(D,P),$=M.finalize(j),G=M.cfg;return b.create({ciphertext:$,key:D,iv:G.iv,algorithm:N,mode:G.mode,padding:G.padding,blockSize:N.blockSize,formatter:P.format})},decrypt:function(N,j,D,P){P=this.cfg.extend(P),j=this._parse(j,P.format);var M=N.createDecryptor(D,P).finalize(j.ciphertext);return M},_parse:function(N,j){return typeof N=="string"?j.parse(N,this):N}}),w=s.kdf={},g=w.OpenSSL={execute:function(N,j,D,P,M){if(P||(P=a.random(64/8)),M)var $=m.create({keySize:j+D,hasher:M}).compute(N,P);else var $=m.create({keySize:j+D}).compute(N,P);var G=a.create($.words.slice(j),D*4);return $.sigBytes=j*4,b.create({key:$,iv:G,salt:P})}},A=i.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:g}),encrypt:function(N,j,D,P){P=this.cfg.extend(P);var M=P.kdf.execute(D,N.keySize,N.ivSize,P.salt,P.hasher);P.iv=M.iv;var $=k.encrypt.call(this,N,j,M.key,P);return $.mixIn(M),$},decrypt:function(N,j,D,P){P=this.cfg.extend(P),j=this._parse(j,P.format);var M=P.kdf.execute(D,N.keySize,N.ivSize,j.salt,P.hasher);P.iv=M.iv;var $=k.decrypt.call(this,N,j,M.key,P);return $}})}()})}(Hm)),Hm.exports}var Wm={exports:{}},Q_;function DO(){return Q_||(Q_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize;s.call(this,i,o,c,a),this._prevBlock=i.slice(o,o+c)}}),r.Decryptor=r.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize,u=i.slice(o,o+c);s.call(this,i,o,c,a),this._prevBlock=u}});function s(i,o,a,c){var u,d=this._iv;d?(u=d.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var f=0;f<a;f++)i[o+f]^=u[f]}return r}(),n.mode.CFB})}(Wm)),Wm.exports}var qm={exports:{}},X_;function RO(){return X_||(X_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0);var f=d.slice(0);a.encryptBlock(f,0),d[c-1]=d[c-1]+1|0;for(var m=0;m<c;m++)i[o+m]^=f[m]}});return r.Decryptor=s,r}(),n.mode.CTR})}(qm)),qm.exports}var Gm={exports:{}},J_;function MO(){return J_||(J_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function s(a){if((a>>24&255)===255){var c=a>>16&255,u=a>>8&255,d=a&255;c===255?(c=0,u===255?(u=0,d===255?d=0:++d):++u):++c,a=0,a+=c<<16,a+=u<<8,a+=d}else a+=1<<24;return a}function i(a){return(a[0]=s(a[0]))===0&&(a[1]=s(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,c){var u=this._cipher,d=u.blockSize,f=this._iv,m=this._counter;f&&(m=this._counter=f.slice(0),this._iv=void 0),i(m);var p=m.slice(0);u.encryptBlock(p,0);for(var x=0;x<d;x++)a[c+x]^=p[x]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(Gm)),Gm.exports}var Km={exports:{}},Z_;function OO(){return Z_||(Z_=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(i,o){var a=this._cipher,c=a.blockSize,u=this._iv,d=this._keystream;u&&(d=this._keystream=u.slice(0),this._iv=void 0),a.encryptBlock(d,0);for(var f=0;f<c;f++)i[o+f]^=d[f]}});return r.Decryptor=s,r}(),n.mode.OFB})}(Km)),Km.exports}var Ym={exports:{}},e2;function FO(){return e2||(e2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),r.Decryptor=r.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),r}(),n.mode.ECB})}(Ym)),Ym.exports}var Qm={exports:{}},t2;function BO(){return t2||(t2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.pad.AnsiX923={pad:function(r,s){var i=r.sigBytes,o=s*4,a=o-i%o,c=i+a-1;r.clamp(),r.words[c>>>2]|=a<<24-c%4*8,r.sigBytes+=a},unpad:function(r){var s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}},n.pad.Ansix923})}(Qm)),Qm.exports}var Xm={exports:{}},n2;function LO(){return n2||(n2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.pad.Iso10126={pad:function(r,s){var i=s*4,o=i-r.sigBytes%i;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}},n.pad.Iso10126})}(Xm)),Xm.exports}var Jm={exports:{}},r2;function VO(){return r2||(r2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.pad.Iso97971={pad:function(r,s){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,s)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(Jm)),Jm.exports}var Zm={exports:{}},s2;function UO(){return s2||(s2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.pad.ZeroPadding={pad:function(r,s){var i=s*4;r.clamp(),r.sigBytes+=i-(r.sigBytes%i||i)},unpad:function(r){for(var s=r.words,i=r.sigBytes-1,i=r.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){r.sigBytes=i+1;break}}},n.pad.ZeroPadding})}(Zm)),Zm.exports}var ep={exports:{}},i2;function zO(){return i2||(i2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(ep)),ep.exports}var tp={exports:{}},o2;function $O(){return o2||(o2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),St())})(ye,function(n){return function(r){var s=n,i=s.lib,o=i.CipherParams,a=s.enc,c=a.Hex,u=s.format;u.Hex={stringify:function(d){return d.ciphertext.toString(c)},parse:function(d){var f=c.parse(d);return o.create({ciphertext:f})}}}(),n.format.Hex})}(tp)),tp.exports}var np={exports:{}},a2;function HO(){return a2||(a2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),So(),No(),vi(),St())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.BlockCipher,o=r.algo,a=[],c=[],u=[],d=[],f=[],m=[],p=[],x=[],_=[],v=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var T=0,k=0,E=0;E<256;E++){var w=k^k<<1^k<<2^k<<3^k<<4;w=w>>>8^w&255^99,a[T]=w,c[w]=T;var g=b[T],A=b[g],N=b[A],j=b[w]*257^w*16843008;u[T]=j<<24|j>>>8,d[T]=j<<16|j>>>16,f[T]=j<<8|j>>>24,m[T]=j;var j=N*16843009^A*65537^g*257^T*16843008;p[w]=j<<24|j>>>8,x[w]=j<<16|j>>>16,_[w]=j<<8|j>>>24,v[w]=j,T?(T=g^b[b[b[N^g]]],k^=b[b[k]]):T=k=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=i.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,k=E.sigBytes/4,w=this._nRounds=k+6,g=(w+1)*4,A=this._keySchedule=[],N=0;N<g;N++)N<k?A[N]=T[N]:(b=A[N-1],N%k?k>6&&N%k==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=S[N/k|0]<<24),A[N]=A[N-k]^b);for(var j=this._invKeySchedule=[],D=0;D<g;D++){var N=g-D;if(D%4)var b=A[N];else var b=A[N-4];D<4||N<=4?j[D]=b:j[D]=p[a[b>>>24]]^x[a[b>>>16&255]]^_[a[b>>>8&255]]^v[a[b&255]]}}},encryptBlock:function(b,E){this._doCryptBlock(b,E,this._keySchedule,u,d,f,m,a)},decryptBlock:function(b,E){var T=b[E+1];b[E+1]=b[E+3],b[E+3]=T,this._doCryptBlock(b,E,this._invKeySchedule,p,x,_,v,c);var T=b[E+1];b[E+1]=b[E+3],b[E+3]=T},_doCryptBlock:function(b,E,T,k,w,g,A,N){for(var j=this._nRounds,D=b[E]^T[0],P=b[E+1]^T[1],M=b[E+2]^T[2],$=b[E+3]^T[3],G=4,X=1;X<j;X++){var H=k[D>>>24]^w[P>>>16&255]^g[M>>>8&255]^A[$&255]^T[G++],Q=k[P>>>24]^w[M>>>16&255]^g[$>>>8&255]^A[D&255]^T[G++],J=k[M>>>24]^w[$>>>16&255]^g[D>>>8&255]^A[P&255]^T[G++],V=k[$>>>24]^w[D>>>16&255]^g[P>>>8&255]^A[M&255]^T[G++];D=H,P=Q,M=J,$=V}var H=(N[D>>>24]<<24|N[P>>>16&255]<<16|N[M>>>8&255]<<8|N[$&255])^T[G++],Q=(N[P>>>24]<<24|N[M>>>16&255]<<16|N[$>>>8&255]<<8|N[D&255])^T[G++],J=(N[M>>>24]<<24|N[$>>>16&255]<<16|N[D>>>8&255]<<8|N[P&255])^T[G++],V=(N[$>>>24]<<24|N[D>>>16&255]<<16|N[P>>>8&255]<<8|N[M&255])^T[G++];b[E]=H,b[E+1]=Q,b[E+2]=J,b[E+3]=V},keySize:256/32});r.AES=i._createHelper(y)}(),n.AES})}(np)),np.exports}var rp={exports:{}},l2;function WO(){return l2||(l2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),So(),No(),vi(),St())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=s.BlockCipher,a=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=a.DES=o.extend({_doReset:function(){for(var S=this._key,y=S.words,b=[],E=0;E<56;E++){var T=c[E]-1;b[E]=y[T>>>5]>>>31-T%32&1}for(var k=this._subKeys=[],w=0;w<16;w++){for(var g=k[w]=[],A=d[w],E=0;E<24;E++)g[E/6|0]|=b[(u[E]-1+A)%28]<<31-E%6,g[4+(E/6|0)]|=b[28+(u[E+24]-1+A)%28]<<31-E%6;g[0]=g[0]<<1|g[0]>>>31;for(var E=1;E<7;E++)g[E]=g[E]>>>(E-1)*4+3;g[7]=g[7]<<5|g[7]>>>27}for(var N=this._invSubKeys=[],E=0;E<16;E++)N[E]=k[15-E]},encryptBlock:function(S,y){this._doCryptBlock(S,y,this._subKeys)},decryptBlock:function(S,y){this._doCryptBlock(S,y,this._invSubKeys)},_doCryptBlock:function(S,y,b){this._lBlock=S[y],this._rBlock=S[y+1],x.call(this,4,252645135),x.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),x.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=b[E],k=this._lBlock,w=this._rBlock,g=0,A=0;A<8;A++)g|=f[A][((w^T[A])&m[A])>>>0];this._lBlock=w,this._rBlock=k^g}var N=this._lBlock;this._lBlock=this._rBlock,this._rBlock=N,x.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),S[y]=this._lBlock,S[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(S,y){var b=(this._lBlock>>>S^this._rBlock)&y;this._rBlock^=b,this._lBlock^=b<<S}function _(S,y){var b=(this._rBlock>>>S^this._lBlock)&y;this._lBlock^=b,this._rBlock^=b<<S}r.DES=o._createHelper(p);var v=a.TripleDES=o.extend({_doReset:function(){var S=this._key,y=S.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=y.slice(0,2),E=y.length<4?y.slice(0,2):y.slice(2,4),T=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(i.create(b)),this._des2=p.createEncryptor(i.create(E)),this._des3=p.createEncryptor(i.create(T))},encryptBlock:function(S,y){this._des1.encryptBlock(S,y),this._des2.decryptBlock(S,y),this._des3.encryptBlock(S,y)},decryptBlock:function(S,y){this._des3.decryptBlock(S,y),this._des2.encryptBlock(S,y),this._des1.decryptBlock(S,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(v)}(),n.TripleDES})}(rp)),rp.exports}var sp={exports:{}},c2;function qO(){return c2||(c2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),So(),No(),vi(),St())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.StreamCipher,o=r.algo,a=o.RC4=i.extend({_doReset:function(){for(var d=this._key,f=d.words,m=d.sigBytes,p=this._S=[],x=0;x<256;x++)p[x]=x;for(var x=0,_=0;x<256;x++){var v=x%m,S=f[v>>>2]>>>24-v%4*8&255;_=(_+p[x]+S)%256;var y=p[x];p[x]=p[_],p[_]=y}this._i=this._j=0},_doProcessBlock:function(d,f){d[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var d=this._S,f=this._i,m=this._j,p=0,x=0;x<4;x++){f=(f+1)%256,m=(m+d[f])%256;var _=d[f];d[f]=d[m],d[m]=_,p|=d[(d[f]+d[m])%256]<<24-x*8}return this._i=f,this._j=m,p}r.RC4=i._createHelper(a);var u=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)c.call(this)}});r.RC4Drop=i._createHelper(u)}(),n.RC4})}(sp)),sp.exports}var ip={exports:{}},u2;function GO(){return u2||(u2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),So(),No(),vi(),St())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.StreamCipher,o=r.algo,a=[],c=[],u=[],d=o.Rabbit=i.extend({_doReset:function(){for(var m=this._key.words,p=this.cfg.iv,x=0;x<4;x++)m[x]=(m[x]<<8|m[x]>>>24)&16711935|(m[x]<<24|m[x]>>>8)&4278255360;var _=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],v=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var x=0;x<4;x++)f.call(this);for(var x=0;x<8;x++)v[x]^=_[x+4&7];if(p){var S=p.words,y=S[0],b=S[1],E=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,T=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|T&4294901760,w=T<<16|E&65535;v[0]^=E,v[1]^=k,v[2]^=T,v[3]^=w,v[4]^=E,v[5]^=k,v[6]^=T,v[7]^=w;for(var x=0;x<4;x++)f.call(this)}},_doProcessBlock:function(m,p){var x=this._X;f.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,m[p+_]^=a[_]},blockSize:128/32,ivSize:64/32});function f(){for(var m=this._X,p=this._C,x=0;x<8;x++)c[x]=p[x];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var _=m[x]+p[x],v=_&65535,S=_>>>16,y=((v*v>>>17)+v*S>>>15)+S*S,b=((_&4294901760)*_|0)+((_&65535)*_|0);u[x]=y^b}m[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,m[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,m[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,m[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,m[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,m[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,m[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,m[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=i._createHelper(d)}(),n.Rabbit})}(ip)),ip.exports}var op={exports:{}},d2;function KO(){return d2||(d2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),So(),No(),vi(),St())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.StreamCipher,o=r.algo,a=[],c=[],u=[],d=o.RabbitLegacy=i.extend({_doReset:function(){var m=this._key.words,p=this.cfg.iv,x=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],_=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var v=0;v<4;v++)f.call(this);for(var v=0;v<8;v++)_[v]^=x[v+4&7];if(p){var S=p.words,y=S[0],b=S[1],E=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,T=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|T&4294901760,w=T<<16|E&65535;_[0]^=E,_[1]^=k,_[2]^=T,_[3]^=w,_[4]^=E,_[5]^=k,_[6]^=T,_[7]^=w;for(var v=0;v<4;v++)f.call(this)}},_doProcessBlock:function(m,p){var x=this._X;f.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,m[p+_]^=a[_]},blockSize:128/32,ivSize:64/32});function f(){for(var m=this._X,p=this._C,x=0;x<8;x++)c[x]=p[x];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var _=m[x]+p[x],v=_&65535,S=_>>>16,y=((v*v>>>17)+v*S>>>15)+S*S,b=((_&4294901760)*_|0)+((_&65535)*_|0);u[x]=y^b}m[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,m[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,m[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,m[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,m[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,m[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,m[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,m[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=i._createHelper(d)}(),n.RabbitLegacy})}(op)),op.exports}var ap={exports:{}},h2;function YO(){return h2||(h2=1,function(t,e){(function(n,r,s){t.exports=r(Ee(),So(),No(),vi(),St())})(ye,function(n){return function(){var r=n,s=r.lib,i=s.BlockCipher,o=r.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function f(v,S){let y=S>>24&255,b=S>>16&255,E=S>>8&255,T=S&255,k=v.sbox[0][y]+v.sbox[1][b];return k=k^v.sbox[2][E],k=k+v.sbox[3][T],k}function m(v,S,y){let b=S,E=y,T;for(let k=0;k<a;++k)b=b^v.pbox[k],E=f(v,b)^E,T=b,b=E,E=T;return T=b,b=E,E=T,E=E^v.pbox[a],b=b^v.pbox[a+1],{left:b,right:E}}function p(v,S,y){let b=S,E=y,T;for(let k=a+1;k>1;--k)b=b^v.pbox[k],E=f(v,b)^E,T=b,b=E,E=T;return T=b,b=E,E=T,E=E^v.pbox[1],b=b^v.pbox[0],{left:b,right:E}}function x(v,S,y){for(let w=0;w<4;w++){v.sbox[w]=[];for(let g=0;g<256;g++)v.sbox[w][g]=u[w][g]}let b=0;for(let w=0;w<a+2;w++)v.pbox[w]=c[w]^S[b],b++,b>=y&&(b=0);let E=0,T=0,k=0;for(let w=0;w<a+2;w+=2)k=m(v,E,T),E=k.left,T=k.right,v.pbox[w]=E,v.pbox[w+1]=T;for(let w=0;w<4;w++)for(let g=0;g<256;g+=2)k=m(v,E,T),E=k.left,T=k.right,v.sbox[w][g]=E,v.sbox[w][g+1]=T;return!0}var _=o.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,S=v.words,y=v.sigBytes/4;x(d,S,y)}},encryptBlock:function(v,S){var y=m(d,v[S],v[S+1]);v[S]=y.left,v[S+1]=y.right},decryptBlock:function(v,S){var y=p(d,v[S],v[S+1]);v[S]=y.left,v[S+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=i._createHelper(_)}(),n.Blowfish})}(ap)),ap.exports}(function(t,e){(function(n,r,s){t.exports=r(Ee(),a0(),SO(),NO(),So(),AO(),No(),_T(),vv(),TO(),ET(),kO(),IO(),jO(),wv(),PO(),vi(),St(),DO(),RO(),MO(),OO(),FO(),BO(),LO(),VO(),UO(),zO(),$O(),HO(),WO(),qO(),GO(),KO(),YO())})(ye,function(n){return n})})(bT);var QO=bT.exports;const Yx=pg(QO),CT={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_ENCRYPTION_KEY||"opessocius-secure-key-2024",bv=async t=>await wT.hash(t,12),f2=async(t,e)=>!t||!e?!1:await wT.compare(t,e),XO=t=>{if(t==null)throw new Error("Data cannot be null or undefined");const e=Yx.AES.encrypt(t,CT).toString();return encodeURIComponent(e)},m2=t=>{try{if(!t)return null;const e=decodeURIComponent(t);return Yx.AES.decrypt(e,CT).toString(Yx.enc.Utf8)||null}catch(e){return console.error("Error decrypting URL parameter:",e),null}},JO=(t=32)=>{if(t==null)throw new Error("Length cannot be null or undefined");t<0&&(t=0);const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},ZO=t=>{let e=0;const n=[];return t.length>=8?e+=1:n.push("Password should be at least 8 characters long"),/[a-z]/.test(t)?e+=1:n.push("Password should contain at least one lowercase letter"),/[A-Z]/.test(t)?e+=1:n.push("Password should contain at least one uppercase letter"),/[0-9]/.test(t)?e+=1:n.push("Password should contain at least one number"),/[^A-Za-z0-9]/.test(t)?e+=1:n.push("Password should contain at least one special character"),{score:e,feedback:n}},ST=O.createContext(),ls=()=>{const t=O.useContext(ST);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},eF=({children:t})=>{const[e,n]=O.useState(()=>localStorage.getItem("isAuthenticated")==="true"),[r,s]=O.useState(()=>localStorage.getItem("userRole")||"admin"),[i,o]=O.useState(()=>localStorage.getItem("currentInvestorId")),[a,c]=O.useState(!1);O.useEffect(()=>{const v=()=>{try{const S=localStorage.getItem("isAuthenticated"),y=localStorage.getItem("userRole")||"admin",b=localStorage.getItem("currentInvestorId");n(S==="true"),s(y),o(b)}catch(S){console.error("Error handling localStorage change:",S)}};return window.addEventListener("storage",v),()=>window.removeEventListener("storage",v)},[]);const _={isAuthenticated:e,isLoading:a,login:async(v,S)=>{try{if(v==="admin"&&S==="CrudeNico")return n(!0),s("admin"),o(null),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userRole","admin"),localStorage.removeItem("currentInvestorId"),{success:!0,role:"admin"};{let y=null;try{y=JSON.parse(localStorage.getItem("investors")||"[]").find(E=>E.username===v),y&&(await f2(S,y.password)||(y=null))}catch(b){console.log("LocalStorage check failed:",b)}if(!y)try{y=(await Mn.getInvestors()).find(E=>E.username===v),y&&(await f2(S,y.password)||(y=null))}catch(b){console.log("Firebase investor check failed:",b)}if(y)return n(!0),s("investor"),o(y.id.toString()),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userRole","investor"),localStorage.setItem("currentInvestorId",y.id.toString()),{success:!0,role:"investor",investorId:y.id}}return{success:!1,error:"Invalid credentials"}}catch(y){return console.error("Login error:",y),{success:!1,error:"Authentication failed"}}},logout:()=>{n(!1),s("admin"),o(null),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userRole"),localStorage.removeItem("currentInvestorId")},getUserRole:()=>r,isViewer:()=>r==="viewer",isInvestor:()=>r==="investor",getCurrentInvestorId:()=>i};return a?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsx(ST.Provider,{value:_,children:t})},NT=O.createContext(),AT=()=>{const t=O.useContext(NT);if(!t)throw new Error("useChat must be used within a ChatProvider");return t},tF=({children:t})=>{const{getUserRole:e,getCurrentInvestorId:n}=ls(),[r,s]=O.useState([]),[i,o]=O.useState(null),[a,c]=O.useState([]),[u,d]=O.useState(!1),[f,m]=O.useState({});O.useEffect(()=>{(async()=>{try{const g=await pt.getConversations();s(g);const A=[];for(const N of g){const j=await pt.getMessages(N.id);A.push(...j)}c(A)}catch(g){console.error("Error loading chat data from Firebase:",g);const A=localStorage.getItem("chat_conversations"),N=localStorage.getItem("chat_messages");A&&s(JSON.parse(A)),N&&c(JSON.parse(N))}})()},[]),O.useEffect(()=>{const w=pt.onConversationsChange(A=>{console.log("Conversations updated:",A),s(A)}),g=pt.onAllMessagesChange(A=>{console.log("Messages updated:",A),c(A)});return()=>{w&&w(),g&&g()}},[]);const p=()=>{const w=e(),g=n();return w==="admin"?r:w==="investor"&&g?r.filter(A=>{var D;const N=(D=A.investorId)==null?void 0:D.toString(),j=g==null?void 0:g.toString();return N===j}):[]},x=w=>a.filter(g=>g.conversationId===w),_=async(w,g)=>{try{const A={id:Date.now().toString(),investorId:w,investorName:g,createdAt:new Date().toISOString(),lastMessageAt:new Date().toISOString(),isActive:!0};return await pt.createConversation(A),s(N=>[...N,A]),A}catch(A){console.error("Error creating conversation:",A);const N={id:Date.now().toString(),investorId:w,investorName:g,createdAt:new Date().toISOString(),lastMessageAt:new Date().toISOString(),isActive:!0};return s(j=>[...j,N]),N}},k={conversations:r,currentConversation:i,messages:a,isTyping:u,typingUsers:f,getConversations:p,getConversationMessages:x,createConversation:_,sendMessage:async(w,g,A="investor")=>{var N,j;try{console.log("Sending message:",{conversationId:w,content:g,senderType:A});const D=e(),P=n();let M,$;D==="admin"?(M="admin",$="Admin"):D==="investor"&&(M=P,$=((N=r.find(H=>{var V;const Q=(V=H.investorId)==null?void 0:V.toString(),J=P==null?void 0:P.toString();return Q===J}))==null?void 0:N.investorName)||"Investor");const G={conversationId:w,content:g,senderId:M,senderName:$,senderType:A,isRead:!1};console.log("Message data:",G);const X=await pt.sendMessage(G);console.log("Message sent successfully:",X);try{await pt.updateConversationLastMessage(w)}catch{console.log("Conversation update failed, but message was sent successfully")}return X}catch(D){console.error("Error sending message:",D);const P=e(),M=n();let $,G;P==="admin"?($="admin",G="Admin"):P==="investor"&&($=M,G=((j=r.find(H=>{var V;const Q=(V=H.investorId)==null?void 0:V.toString(),J=M==null?void 0:M.toString();return Q===J}))==null?void 0:j.investorName)||"Investor");const X={id:Date.now().toString(),conversationId:w,content:g,senderId:$,senderName:G,senderType:A,timestamp:new Date().toISOString(),isRead:!1};return c(H=>[...H,X]),s(H=>H.map(Q=>Q.id===w?{...Q,lastMessageAt:new Date().toISOString()}:Q)),X}},markMessagesAsRead:w=>{const g=e();c(A=>A.map(N=>N.conversationId===w&&(g==="admin"&&N.senderType==="investor"||g==="investor"&&N.senderType==="admin")?{...N,isRead:!0}:N))},deleteConversation:async w=>{try{return console.log("Deleting conversation:",w),await pt.deleteConversation(w),s(g=>g.filter(A=>A.id!==w)),c(g=>g.filter(A=>A.conversationId!==w)),console.log("Conversation deleted successfully"),!0}catch(g){return console.error("Error deleting conversation:",g),s(A=>A.filter(N=>N.id!==w)),c(A=>A.filter(N=>N.conversationId!==w)),!1}},getUnreadCount:w=>{const g=e();return n(),a.filter(N=>N.conversationId===w&&!N.isRead&&(g==="admin"&&N.senderType==="investor"||g==="investor"&&N.senderType==="admin")).length},getOrCreateInvestorConversation:async()=>{const w=e(),g=n();if(w!=="investor"||!g)return null;let A=r.find(N=>{var P;const j=(P=N.investorId)==null?void 0:P.toString(),D=g==null?void 0:g.toString();return j===D});return A||(A=await _(g,"Investor")),A},setTypingStatus:(w,g,A)=>{m(N=>({...N,[w]:g?A:null}))},setCurrentConversation:o};return l.jsx(NT.Provider,{value:k,children:t})};var nF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sF=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...c},u)=>O.createElement("svg",{ref:u,...nF,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${rF(t)}`,...c},[...e.map(([d,f])=>O.createElement(d,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var ae=sF;const TT=ae("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),kT=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),dt=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),IT=ae("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),iF=ae("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),_v=ae("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ji=ae("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),oF=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),aF=ae("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Ls=ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Qx=ae("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Hr=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),lF=ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ma=ae("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),ho=ae("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),li=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cF=ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Ev=ae("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Oa=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),uF=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ss=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),dF=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),hF=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),nn=ae("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),fF=ae("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),mF=ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),pF=ae("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),jT=ae("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),Cv=ae("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),PT=ae("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),_u=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),l0=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p2=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),xF=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),c0=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),gF=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),DT=ae("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),yF=ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),RT=ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Hc=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),gt=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),x2=ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ci=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fo=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),nf=ae("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ui=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vF=ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Bo=({isOpen:t,setIsOpen:e})=>{const n=vo(),{logout:r,getUserRole:s,isInvestor:i}=ls(),{getUnreadCount:o,getConversations:a}=AT(),c=[{name:i()?"My Dashboard":"Dashboard",href:"/dashboard",icon:_v},...i()?[]:[{name:"Investment Performance",href:"/performance",icon:gt},{name:"Investors",href:"/investors",icon:fo},{name:"Consultations",href:"/consultations",icon:Ji}],{name:"Market News",href:"/market-news",icon:jT},{name:"Chat",href:"/chat",icon:nn,badge:a().reduce((d,f)=>d+o(f.id),0)>0}],u=d=>n.pathname===d;return l.jsxs(l.Fragment,{children:[t&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden",onClick:()=>e(!1)}),l.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
        ${t?"translate-x-0":"-translate-x-full"}
      `,children:[l.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[l.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Opessocius"}),l.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-1 rounded-md text-gray-400 hover:text-gray-600",children:l.jsx(ui,{size:20})})]}),l.jsx("nav",{className:"mt-6 px-3",children:l.jsx("div",{className:"space-y-1",children:c.map(d=>{const f=d.icon;return l.jsxs(se,{to:d.href,className:`
                    group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200
                    ${u(d.href)?"bg-primary-100 text-primary-700 border-r-2 border-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                  `,onClick:()=>e(!1),children:[l.jsx(f,{size:20,className:`
                      mr-3 flex-shrink-0
                      ${u(d.href)?"text-primary-600":"text-gray-400 group-hover:text-gray-500"}
                    `}),l.jsx("span",{className:"flex-1",children:d.name}),d.badge&&l.jsx(Qx,{className:"h-4 w-4 text-green-500 flex-shrink-0"})]},d.name)})})}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:[l.jsx("div",{className:"mb-2 px-3 py-1 text-xs text-gray-500 bg-gray-100 rounded",children:s()==="admin"?"Admin Mode":s()==="investor"?"Investor Mode":"Viewer Mode"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(se,{to:"/",className:"flex items-center w-full px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-colors duration-200",children:[l.jsx(Ev,{size:20,className:"mr-3 text-gray-400"}),"Return to Main Page"]}),l.jsxs("button",{onClick:r,className:"flex items-center w-full px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-colors duration-200",children:[l.jsx(uF,{size:20,className:"mr-3 text-gray-400"}),"Logout"]})]})]})]}),l.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-40",children:l.jsx("button",{onClick:()=>e(!0),className:"p-2 rounded-md bg-white shadow-lg text-gray-600 hover:text-gray-900",children:l.jsx(hF,{size:20})})})]})},wF={INVESTMENT_DATA:"investmentData",INVESTORS:"investors",INVESTOR_PERFORMANCE:"investorPerformance",CHAT_CONVERSATIONS:"chatConversations",CHAT_MESSAGES:"chatMessages",USERS:"users"},MT=O.createContext(),Xa=()=>{const t=O.useContext(MT);if(!t)throw new Error("useData must be used within a DataProvider");return t},bF=({children:t})=>{const[e,n]=O.useState({startingBalance:0,performance:[]}),[r,s]=O.useState([]);O.useEffect(()=>{(async()=>{try{const T=await Oo.getInvestmentData();if(T)try{const g=he(ee,wF.INVESTMENT_DATA,T.id,"performance"),N=(await $e(g)).docs.map(j=>({id:j.id,...j.data()}));n({...T,performance:N})}catch(g){console.error("Error loading investment performance data:",g),n({...T,performance:[]})}const k=await Mn.getInvestors(),w=await Promise.all(k.map(async g=>{try{const A=await Mn.getInvestorPerformance(g.id);return{...g,performance:A||[]}}catch(A){return console.error(`Error loading performance for investor ${g.id}:`,A),{...g,performance:[]}}}));s(w);try{localStorage.setItem("investors",JSON.stringify(w))}catch(g){console.log("Failed to sync investors to localStorage:",g)}}catch(T){console.error("Error loading data from Firebase:",T);const k=localStorage.getItem("investmentData"),w=localStorage.getItem("investors");k&&n(JSON.parse(k)),w&&s(JSON.parse(w))}})()},[]),O.useEffect(()=>{const E=Oo.onInvestmentDataChange(k=>{if(k){const w={...k,performance:k.performance?k.performance.sort((g,A)=>g.year!==A.year?g.year-A.year:g.month-A.month):[]};n(w)}}),T=Mn.onInvestorsChange(async k=>{const w=k.filter((A,N,j)=>N===j.findIndex(D=>D.id===A.id)),g=await Promise.all(w.map(async A=>{try{const N=await Mn.getInvestorPerformance(A.id),j=N?N.sort((D,P)=>D.year!==P.year?D.year-P.year:D.month-P.month):[];return{...A,performance:j}}catch(N){return console.error(`Error loading performance for investor ${A.id}:`,N),{...A,performance:[]}}}));s(g)});return()=>{E(),T()}},[]),O.useEffect(()=>{try{localStorage.setItem("investmentData",JSON.stringify(e))}catch(E){console.error("Error saving investment data to localStorage:",E)}},[e]),O.useEffect(()=>{try{localStorage.setItem("investors",JSON.stringify(r))}catch(E){console.error("Error saving investors to localStorage:",E)}},[r]);const i=async E=>{try{const T={...e,startingBalance:parseFloat(E)};await Oo.saveInvestmentData(T),n(T)}catch(T){console.error("Error updating starting balance:",T),n(k=>({...k,startingBalance:parseFloat(E)}))}},o=async E=>{try{const T={year:parseInt(E.year),month:parseInt(E.month),growthAmount:parseFloat(E.growthAmount),growthPercentage:parseFloat(E.growthPercentage),deposit:parseFloat(E.deposit||0),withdrawal:parseFloat(E.withdrawal||0),date:new Date().toISOString()},k=await Oo.addPerformanceEntry(T);n(w=>({...w,performance:[...w.performance,k].sort((g,A)=>g.year!==A.year?g.year-A.year:g.month-A.month)}))}catch(T){console.error("Error adding performance entry:",T);const k={id:Date.now(),year:parseInt(E.year),month:parseInt(E.month),growthAmount:parseFloat(E.growthAmount),growthPercentage:parseFloat(E.growthPercentage),deposit:parseFloat(E.deposit||0),withdrawal:parseFloat(E.withdrawal||0),date:new Date().toISOString()};n(w=>({...w,performance:[...w.performance,k].sort((g,A)=>g.year!==A.year?g.year-A.year:g.month-A.month)}))}},a=async(E,T)=>{try{await Oo.updatePerformanceEntry(E,T),n(k=>({...k,performance:k.performance.map(w=>w.id===E?{...w,...T}:w).sort((w,g)=>w.year!==g.year?w.year-g.year:w.month-g.month)}))}catch(k){console.error("Error updating performance entry:",k),n(w=>({...w,performance:w.performance.map(g=>g.id===E?{...g,...T}:g).sort((g,A)=>g.year!==A.year?g.year-A.year:g.month-A.month)}))}},c=async E=>{try{await Oo.deletePerformanceEntry(E),n(T=>({...T,performance:T.performance.filter(k=>k.id!==E)}))}catch(T){console.error("Error deleting performance entry:",T),n(k=>({...k,performance:k.performance.filter(w=>w.id!==E)}))}},u=async(E,T,k)=>{try{await Mn.updateInvestorPerformance(E,T,k),s(w=>w.map(g=>g.id===E?{...g,performance:g.performance.map(A=>A.id===T?{...A,...k}:A).sort((A,N)=>A.year!==N.year?A.year-N.year:A.month-N.month)}:g))}catch(w){console.error("Error updating investor performance entry:",w),s(g=>g.map(A=>A.id===E?{...A,performance:A.performance.map(N=>N.id===T?{...N,...k}:N).sort((N,j)=>N.year!==j.year?N.year-j.year:N.month-j.month)}:A))}},d=async(E,T)=>{try{await Mn.deleteInvestorPerformance(E,T),s(k=>k.map(w=>w.id===E?{...w,performance:w.performance.filter(g=>g.id!==T)}:w))}catch(k){console.error("Error deleting investor performance entry:",k),s(w=>w.map(g=>g.id===E?{...g,performance:g.performance.filter(A=>A.id!==T)}:g))}},f=async E=>{try{const T={name:E.name,email:E.email,phone:E.phone,investmentAmount:parseFloat(E.investmentAmount),initiationDate:E.initiationDate,username:E.username||`${E.name.toLowerCase().replace(/\s+/g,"")}${Date.now()}`,password:E.password||`investor${Date.now()}`,performance:[],dateAdded:new Date().toISOString()},k=await Mn.addInvestor(T);try{const w={id:k.id,investorId:k.id,investorName:k.name,adminId:"admin",adminName:"Admin",lastMessage:"Welcome! Your investment account has been created.",lastMessageTime:new Date().toISOString(),unreadCount:0};await pt.createConversation(w);try{const g={conversationId:k.id,senderId:"admin",senderName:"Admin",content:`Welcome ${k.name}! Your investment account has been successfully created. You can now track your investment performance and communicate with us through this chat.`,timestamp:new Date().toISOString()};await pt.sendMessage(g),console.log("Welcome message sent to new investor:",k.name)}catch(g){console.error("Error sending welcome message:",g)}console.log("Chat conversation created for new investor:",k.name)}catch(w){console.error("Error creating chat conversation:",w)}}catch(T){console.error("Error adding investor:",T);const k={id:Date.now(),name:E.name,email:E.email,phone:E.phone,investmentAmount:parseFloat(E.investmentAmount),initiationDate:E.initiationDate,username:E.username||`${E.name.toLowerCase().replace(/\s+/g,"")}${Date.now()}`,password:E.password||`investor${Date.now()}`,performance:[],dateAdded:new Date().toISOString()};s(w=>[...w,k]);try{const w={id:k.id,investorId:k.id,investorName:k.name,adminId:"admin",adminName:"Admin",lastMessage:"Welcome! Your investment account has been created.",lastMessageTime:new Date().toISOString(),unreadCount:0};await pt.createConversation(w);try{const g={conversationId:k.id,senderId:"admin",senderName:"Admin",content:`Welcome ${k.name}! Your investment account has been successfully created. You can now track your investment performance and communicate with us through this chat.`,timestamp:new Date().toISOString()};await pt.sendMessage(g),console.log("Welcome message sent to new investor (fallback):",k.name)}catch(g){console.error("Error sending welcome message (fallback):",g)}console.log("Chat conversation created for new investor (fallback):",k.name)}catch(w){console.error("Error creating chat conversation (fallback):",w)}}},m=async(E,T)=>{console.log("DataContext: updateInvestor called with:",{id:E,updates:T});try{const k={...T,investmentAmount:parseFloat(T.investmentAmount||0)};console.log("DataContext: Updated data to save:",k),await Mn.updateInvestor(E,k),s(w=>w.map(g=>g.id===E?{...g,...T,investmentAmount:parseFloat(T.investmentAmount||g.investmentAmount)}:g));try{const g=JSON.parse(localStorage.getItem("investors")||"[]").map(A=>A.id===E?{...A,...T,investmentAmount:parseFloat(T.investmentAmount||A.investmentAmount)}:A);localStorage.setItem("investors",JSON.stringify(g))}catch(w){console.log("LocalStorage backup failed:",w)}}catch(k){console.error("Error updating investor:",k),console.log("Falling back to local state only"),s(w=>w.map(g=>g.id===E?{...g,...T,investmentAmount:parseFloat(T.investmentAmount||g.investmentAmount)}:g));try{const g=JSON.parse(localStorage.getItem("investors")||"[]").map(A=>A.id===E?{...A,...T,investmentAmount:parseFloat(T.investmentAmount||A.investmentAmount)}:A);localStorage.setItem("investors",JSON.stringify(g))}catch(w){console.log("LocalStorage backup failed:",w)}}},b={investmentData:e,investors:r,updateStartingBalance:i,addPerformanceEntry:o,updatePerformanceEntry:a,deletePerformanceEntry:c,addInvestor:f,updateInvestor:m,deleteInvestor:async E=>{try{await Mn.deleteInvestor(E);try{await pt.deleteConversation(E),console.log("Chat conversation deleted for investor:",E)}catch(T){console.error("Error deleting chat conversation:",T)}s(T=>T.filter(k=>k.id!==E))}catch(T){console.error("Error deleting investor:",T),s(k=>k.filter(w=>w.id!==E));try{await pt.deleteConversation(E),console.log("Chat conversation deleted for investor (fallback):",E)}catch(k){console.error("Error deleting chat conversation (fallback):",k)}}},addInvestorPerformance:async(E,T)=>{try{const k={year:parseInt(T.year),month:parseInt(T.month),growthAmount:parseFloat(T.growthAmount),growthPercentage:parseFloat(T.growthPercentage),deposit:parseFloat(T.deposit||0),withdrawal:parseFloat(T.withdrawal||0),date:new Date().toISOString()},w=await Mn.addInvestorPerformance(E,k);s(g=>g.map(A=>A.id===E?{...A,performance:[...A.performance,w].sort((N,j)=>N.year!==j.year?N.year-j.year:N.month-j.month)}:A))}catch(k){console.error("Error adding investor performance entry:",k);const w={id:Date.now(),year:parseInt(T.year),month:parseInt(T.month),growthAmount:parseFloat(T.growthAmount),growthPercentage:parseFloat(T.growthPercentage),deposit:parseFloat(T.deposit||0),withdrawal:parseFloat(T.withdrawal||0),date:new Date().toISOString()};s(g=>g.map(A=>A.id===E?{...A,performance:[...A.performance,w].sort((N,j)=>N.year!==j.year?N.year-j.year:N.month-j.month)}:A))}},updateInvestorPerformance:u,deleteInvestorPerformance:d,calculateTotalPerformance:()=>{if(e.performance.length===0)return null;const E=e.performance.reduce((j,D)=>j+(D.growthAmount||0),0),T=e.performance.reduce((j,D)=>j+(D.deposit||0),0),k=e.performance.reduce((j,D)=>j+(D.withdrawal||0),0),w=e.performance.reduce((j,D)=>j+(D.growthPercentage||0),0),g=w/e.performance.length,A=e.startingBalance+E+T-k;return{totalGrowthAmount:E,totalDeposits:T,totalWithdrawals:k,totalGrowthPercentage:w,averageGrowthPercentage:g,currentBalance:A,totalNetPercentage:w}},calculateInvestorPerformance:E=>{const T=r.find(P=>{var G;const M=(G=P.id)==null?void 0:G.toString(),$=E==null?void 0:E.toString();return M===$});if(!T||!T.performance||T.performance.length===0)return null;const k=T.performance.reduce((P,M)=>P+(M.growthAmount||0),0),w=T.performance.reduce((P,M)=>P+(M.deposit||0),0),g=T.performance.reduce((P,M)=>P+(M.withdrawal||0),0),A=T.performance.reduce((P,M)=>P+(M.growthPercentage||0),0),N=A/T.performance.length,j=T.investmentAmount+k+w-g;return{totalGrowthAmount:k,totalDeposits:w,totalWithdrawals:g,totalGrowthPercentage:A,averageGrowthPercentage:N,currentAmount:j,totalNetPercentage:A}},loadInvestorPerformance:async E=>{const T=r.find(w=>{var N;const g=(N=w.id)==null?void 0:N.toString(),A=E==null?void 0:E.toString();return g===A});if(!T)return null;let k=T.performance||[];if(!k||k.length===0)try{k=await Mn.getInvestorPerformance(T.id),s(w=>w.map(g=>g.id===T.id?{...g,performance:k}:g))}catch(w){return console.error(`Error loading performance for investor ${T.id}:`,w),null}return k},testPasswordUpdate:async(E,T)=>{try{console.log("Testing password update for investor:",E),await m(E,{password:T}),console.log("Password update test completed")}catch(k){console.error("Password update test failed:",k)}}};return l.jsx(MT.Provider,{value:b,children:t})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Eu(t){return t+.5|0}const Vs=(t,e,n)=>Math.max(Math.min(t,n),e);function Hl(t){return Vs(Eu(t*2.55),0,255)}function ni(t){return Vs(Eu(t*255),0,255)}function Fr(t){return Vs(Eu(t/2.55)/100,0,1)}function g2(t){return Vs(Eu(t*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xx=[..."0123456789ABCDEF"],_F=t=>Xx[t&15],EF=t=>Xx[(t&240)>>4]+Xx[t&15],yd=t=>(t&240)>>4===(t&15),CF=t=>yd(t.r)&&yd(t.g)&&yd(t.b)&&yd(t.a);function SF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Rn[t[1]]*17,g:255&Rn[t[2]]*17,b:255&Rn[t[3]]*17,a:e===5?Rn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Rn[t[1]]<<4|Rn[t[2]],g:Rn[t[3]]<<4|Rn[t[4]],b:Rn[t[5]]<<4|Rn[t[6]],a:e===9?Rn[t[7]]<<4|Rn[t[8]]:255})),n}const NF=(t,e)=>t<255?e(t):"";function AF(t){var e=CF(t)?_F:EF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+NF(t.a,e):void 0}const TF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function OT(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function kF(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function IF(t,e,n){const r=OT(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function jF(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Sv(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=a>.5?d/(2-i-o):d/(i+o),c=jF(n,r,s,d,i),c=c*60+.5),[c|0,u||0,a]}function Nv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ni)}function Av(t,e,n){return Nv(OT,t,e,n)}function PF(t,e,n){return Nv(IF,t,e,n)}function DF(t,e,n){return Nv(kF,t,e,n)}function FT(t){return(t%360+360)%360}function RF(t){const e=TF.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Hl(+e[5]):ni(+e[5]));const s=FT(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=PF(s,i,o):e[1]==="hsv"?r=DF(s,i,o):r=Av(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function MF(t,e){var n=Sv(t);n[0]=FT(n[0]+e),n=Av(n),t.r=n[0],t.g=n[1],t.b=n[2]}function OF(t){if(!t)return;const e=Sv(t),n=e[0],r=g2(e[1]),s=g2(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Fr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const y2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},v2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function FF(){const t={},e=Object.keys(v2),n=Object.keys(y2);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,y2[i]);i=parseInt(v2[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let vd;function BF(t){vd||(vd=FF(),vd.transparent=[0,0,0,0]);const e=vd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const LF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function VF(t){const e=LF.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Hl(o):Vs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Hl(r):Vs(r,0,255)),s=255&(e[4]?Hl(s):Vs(s,0,255)),i=255&(e[6]?Hl(i):Vs(i,0,255)),{r,g:s,b:i,a:n}}}function UF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Fr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const lp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Lo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function zF(t,e,n){const r=Lo(Fr(t.r)),s=Lo(Fr(t.g)),i=Lo(Fr(t.b));return{r:ni(lp(r+n*(Lo(Fr(e.r))-r))),g:ni(lp(s+n*(Lo(Fr(e.g))-s))),b:ni(lp(i+n*(Lo(Fr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function wd(t,e,n){if(t){let r=Sv(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Av(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function BT(t,e){return t&&Object.assign(e||{},t)}function w2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ni(t[3]))):(e=BT(t,{r:0,g:0,b:0,a:1}),e.a=ni(e.a)),e}function $F(t){return t.charAt(0)==="r"?VF(t):RF(t)}class Wc{constructor(e){if(e instanceof Wc)return e;const n=typeof e;let r;n==="object"?r=w2(e):n==="string"&&(r=SF(e)||BF(e)||$F(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=BT(this._rgb);return e&&(e.a=Fr(e.a)),e}set rgb(e){this._rgb=w2(e)}rgbString(){return this._valid?UF(this._rgb):void 0}hexString(){return this._valid?AF(this._rgb):void 0}hslString(){return this._valid?OF(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,c=r.a-s.a,u=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=zF(this._rgb,e._rgb,n)),this}clone(){return new Wc(this.rgb)}alpha(e){return this._rgb.a=ni(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Eu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return wd(this._rgb,2,e),this}darken(e){return wd(this._rgb,2,-e),this}saturate(e){return wd(this._rgb,1,e),this}desaturate(e){return wd(this._rgb,1,-e),this}rotate(e){return MF(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Pr(){}const HF=(()=>{let t=0;return()=>t++})();function Pe(t){return t==null}function Ge(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ne(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function tt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _n(t,e){return tt(t)?t:e}function we(t,e){return typeof t>"u"?e:t}const WF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Fe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function je(t,e,n,r){let s,i,o;if(Ge(t))if(i=t.length,r)for(s=i-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<i;s++)e.call(n,t[s],s);else if(Ne(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function rf(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function sf(t){if(Ge(t))return t.map(sf);if(Ne(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=sf(t[n[s]]);return e}return t}function LT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function qF(t,e,n,r){if(!LT(t))return;const s=e[t],i=n[t];Ne(s)&&Ne(i)?qc(s,i,r):e[t]=sf(i)}function qc(t,e,n){const r=Ge(e)?e:[e],s=r.length;if(!Ne(t))return t;n=n||{};const i=n.merger||qF;let o;for(let a=0;a<s;++a){if(o=r[a],!Ne(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],t,o,n)}return t}function lc(t,e){return qc(t,e,{merger:GF})}function GF(t,e,n){if(!LT(t))return;const r=e[t],s=n[t];Ne(r)&&Ne(s)?lc(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=sf(s))}const b2={"":t=>t,x:t=>t.x,y:t=>t.y};function KF(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function YF(t){const e=KF(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function of(t,e){return(b2[e]||(b2[e]=YF(e)))(t)}function Tv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const af=t=>typeof t<"u",di=t=>typeof t=="function",_2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function QF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ht=Math.PI,In=2*ht,XF=In+ht,lf=Number.POSITIVE_INFINITY,JF=ht/180,An=ht/2,Ii=ht/4,E2=ht*2/3,Us=Math.log10,Fa=Math.sign;function cc(t,e,n){return Math.abs(t-e)<n}function C2(t){const e=Math.round(t);t=cc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Us(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function ZF(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function eB(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gc(t){return!eB(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function tB(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function VT(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function zs(t){return t*(ht/180)}function kv(t){return t*(180/ht)}function S2(t){if(!tt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nB(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*ht&&(i+=In),{angle:i,distance:s}}function Jx(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rB(t,e){return(t-e+XF)%In-ht}function Cn(t){return(t%In+In)%In}function UT(t,e,n,r){const s=Cn(t),i=Cn(e),o=Cn(n),a=Cn(i-s),c=Cn(o-s),u=Cn(s-i),d=Cn(s-o);return s===i||s===o||r&&i===o||a>c&&u<d}function Ln(t,e,n){return Math.max(e,Math.min(n,t))}function sB(t){return Ln(t,-32768,32767)}function sa(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Iv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const qi=(t,e,n,r)=>Iv(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),iB=(t,e,n)=>Iv(t,n,r=>t[r][e]>=n);function oB(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const zT=["push","pop","shift","splice","unshift"];function aB(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),zT.forEach(n=>{const r="_onData"+Tv(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function N2(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(zT.forEach(i=>{delete t[i]}),delete t._chartjs)}function lB(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const $T=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function HT(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,$T.call(window,()=>{r=!1,t.apply(e,n)}))}}function cB(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const jv=t=>t==="start"?"left":t==="end"?"right":"center",$t=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,uB=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function dB(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:c}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:f,max:m,minDefined:p,maxDefined:x}=o.getUserBounds();if(p){if(s=Math.min(qi(c,d,f).lo,n?r:qi(e,d,o.getPixelForValue(f)).lo),u){const _=c.slice(0,s+1).reverse().findIndex(v=>!Pe(v[a.axis]));s-=Math.max(0,_)}s=Ln(s,0,r-1)}if(x){let _=Math.max(qi(c,o.axis,m,!0).hi+1,n?0:qi(e,d,o.getPixelForValue(m),!0).hi+1);if(u){const v=c.slice(_-1).findIndex(S=>!Pe(S[a.axis]));_+=Math.max(0,v)}i=Ln(_,s,r)-s}else i=r-s}return{start:s,count:i}}function hB(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const bd=t=>t===0||t===1,A2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*In/n)),T2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*In/n)+1,uc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*An)+1,easeOutSine:t=>Math.sin(t*An),easeInOutSine:t=>-.5*(Math.cos(ht*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>bd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>bd(t)?t:A2(t,.075,.3),easeOutElastic:t=>bd(t)?t:T2(t,.075,.3),easeInOutElastic(t){return bd(t)?t:t<.5?.5*A2(t*2,.1125,.45):.5+.5*T2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-uc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?uc.easeInBounce(t*2)*.5:uc.easeOutBounce(t*2-1)*.5+.5};function Pv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function k2(t){return Pv(t)?t:new Wc(t)}function cp(t){return Pv(t)?t:new Wc(t).saturate(.5).darken(.1).hexString()}const fB=["x","y","borderWidth","radius","tension"],mB=["color","borderColor","backgroundColor"];function pB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:mB},numbers:{type:"number",properties:fB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const I2=new Map;function gB(t,e){e=e||{};const n=t+JSON.stringify(e);let r=I2.get(n);return r||(r=new Intl.NumberFormat(t,e),I2.set(n,r)),r}function Dv(t,e,n){return gB(e,n).format(t)}const WT={values(t){return Ge(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=yB(t,n)}const o=Us(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Dv(t,r,c)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Us(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?WT.numeric.call(this,t,e,n):""}};function yB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var u0={formatters:WT};function vB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:u0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const mo=Object.create(null),Zx=Object.create(null);function dc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function up(t,e,n){return typeof e=="string"?qc(dc(t,e),n):qc(dc(t,""),e)}class wB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>cp(s.backgroundColor),this.hoverBorderColor=(r,s)=>cp(s.borderColor),this.hoverColor=(r,s)=>cp(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return up(this,e,n)}get(e){return dc(this,e)}describe(e,n){return up(Zx,e,n)}override(e,n){return up(mo,e,n)}route(e,n,r,s){const i=dc(this,e),o=dc(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[a],u=o[s];return Ne(c)?Object.assign({},u,c):we(c,u)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}}var nt=new wB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pB,xB,vB]);function bB(t){return!t||Pe(t.size)||Pe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function cf(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function _B(t,e,n,r){r=r||{};let s=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(s=r.data={},i=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,u,d,f,m;for(c=0;c<a;c++)if(f=n[c],f!=null&&!Ge(f))o=cf(t,s,i,o,f);else if(Ge(f))for(u=0,d=f.length;u<d;u++)m=f[u],m!=null&&!Ge(m)&&(o=cf(t,s,i,o,m));t.restore();const p=i.length/2;if(p>n.length){for(c=0;c<p;c++)delete s[i[c]];i.splice(0,p)}return o}function ji(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function j2(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function eg(t,e,n,r){qT(t,e,n,r,null)}function qT(t,e,n,r,s){let i,o,a,c,u,d,f,m;const p=e.pointStyle,x=e.rotation,_=e.radius;let v=(x||0)*JF;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,_,0,0,In):t.arc(n,r,_,0,In),t.closePath();break;case"triangle":d=s?s/2:_,t.moveTo(n+Math.sin(v)*d,r-Math.cos(v)*_),v+=E2,t.lineTo(n+Math.sin(v)*d,r-Math.cos(v)*_),v+=E2,t.lineTo(n+Math.sin(v)*d,r-Math.cos(v)*_),t.closePath();break;case"rectRounded":u=_*.516,c=_-u,o=Math.cos(v+Ii)*c,f=Math.cos(v+Ii)*(s?s/2-u:c),a=Math.sin(v+Ii)*c,m=Math.sin(v+Ii)*(s?s/2-u:c),t.arc(n-f,r-a,u,v-ht,v-An),t.arc(n+m,r-o,u,v-An,v),t.arc(n+f,r+a,u,v,v+An),t.arc(n-m,r+o,u,v+An,v+ht),t.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*_,d=s?s/2:c,t.rect(n-d,r-c,2*d,2*c);break}v+=Ii;case"rectRot":f=Math.cos(v)*(s?s/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,m=Math.sin(v)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":v+=Ii;case"cross":f=Math.cos(v)*(s?s/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,m=Math.sin(v)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(v)*(s?s/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,m=Math.sin(v)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),v+=Ii,f=Math.cos(v)*(s?s/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,m=Math.sin(v)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(v)*_,a=Math.sin(v)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(s?s/2:_),r+Math.sin(v)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Wr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function d0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function h0(t){t.restore()}function EB(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function CB(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function SB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Pe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function NB(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function AB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function po(t,e,n,r,s,i={}){const o=Ge(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(t.save(),t.font=s.string,SB(t,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&AB(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Pe(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),NB(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function uf(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ht,ht,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,ht,An,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,An,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-An,!0),t.lineTo(n+o.topLeft,r)}const TB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function IB(t,e){const n=(""+t).match(TB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const jB=t=>+t||0;function GT(t,e){const n={},r=Ne(e),s=r?Object.keys(e):e,i=Ne(t)?r?o=>we(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=jB(i(o));return n}function PB(t){return GT(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xa(t){return GT(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xt(t){const e=PB(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yt(t,e){t=t||{},e=e||nt.font;let n=we(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=we(t.style,e.style);r&&!(""+r).match(kB)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:we(t.family,e.family),lineHeight:IB(we(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:we(t.weight,e.weight),string:""};return s.string=bB(s),s}function _d(t,e,n,r){let s=!0,i,o,a;for(i=0,o=t.length;i<o;++i)if(a=t[i],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Ge(a)&&(a=a[n%a.length],s=!1),a!==void 0))return r&&!s&&(r.cacheable=!1),a}function DB(t,e,n){const{min:r,max:s}=t,i=WF(e,(s-r)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function wi(t,e){return Object.assign(Object.create(t),e)}function Rv(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=XT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Rv([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return YT(a,c,()=>UB(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return D2(a).includes(c)},ownKeys(a){return D2(a)},set(a,c,u){const d=a._storage||(a._storage=s());return a[c]=d[c]=u,delete a._keys,!0}})}function Ba(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:KT(t,r),setContext:i=>Ba(t,i,n,r),override:i=>Ba(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return YT(i,o,()=>MB(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function KT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:di(n)?n:()=>n,isIndexable:di(r)?r:()=>r}}const RB=(t,e)=>t?t+Tv(e):e,Mv=(t,e)=>Ne(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function YT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function MB(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return di(a)&&o.isScriptable(e)&&(a=OB(e,a,t,n)),Ge(a)&&a.length&&(a=FB(e,a,t,o.isIndexable)),Mv(e,a)&&(a=Ba(a,s,i&&i[e],o)),a}function OB(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(i,o||r);return a.delete(t),Mv(t,c)&&(c=Ov(s._scopes,s,t,c)),c}function FB(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Ne(e[0])){const c=e,u=s._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=Ov(u,s,t,d);e.push(Ba(f,i,o&&o[t],a))}}return e}function QT(t,e,n){return di(t)?t(e,n):t}const BB=(t,e)=>t===!0?e:typeof t=="string"?of(e,t):void 0;function LB(t,e,n,r,s){for(const i of e){const o=BB(n,i);if(o){t.add(o);const a=QT(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Ov(t,e,n,r){const s=e._rootScopes,i=QT(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let c=P2(a,o,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=P2(a,o,i,c,r),c===null)?!1:Rv(Array.from(a),[""],s,i,()=>VB(e,n,r))}function P2(t,e,n,r,s){for(;n;)n=LB(t,e,n,r,s);return n}function VB(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ge(s)&&Ne(n)?n:s||{}}function UB(t,e,n,r){let s;for(const i of e)if(s=XT(RB(i,t),n),typeof s<"u")return Mv(t,s)?Ov(n,r,t,s):s}function XT(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function D2(t){let e=t._keys;return e||(e=t._keys=zB(t._scopes)),e}function zB(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const $B=Number.EPSILON||1e-14,La=(t,e)=>e<t.length&&!t[e].skip&&t[e],JT=t=>t==="x"?"y":"x";function HB(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Jx(i,s),c=Jx(o,i);let u=a/(a+c),d=c/(a+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=r*u,m=r*d;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function WB(t,e,n){const r=t.length;let s,i,o,a,c,u=La(t,0);for(let d=0;d<r-1;++d)if(c=u,u=La(t,d+1),!(!c||!u)){if(cc(e[d],0,$B)){n[d]=n[d+1]=0;continue}s=n[d]/e[d],i=n[d+1]/e[d],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=s*o*e[d],n[d+1]=i*o*e[d])}}function qB(t,e,n="x"){const r=JT(n),s=t.length;let i,o,a,c=La(t,0);for(let u=0;u<s;++u){if(o=a,a=c,c=La(t,u+1),!a)continue;const d=a[n],f=a[r];o&&(i=(d-o[n])/3,a[`cp1${n}`]=d-i,a[`cp1${r}`]=f-i*e[u]),c&&(i=(c[n]-d)/3,a[`cp2${n}`]=d+i,a[`cp2${r}`]=f+i*e[u])}}function GB(t,e="x"){const n=JT(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,c,u=La(t,0);for(o=0;o<r;++o)if(a=c,c=u,u=La(t,o+1),!!c){if(u){const d=u[e]-c[e];s[o]=d!==0?(u[n]-c[n])/d:0}i[o]=a?u?Fa(s[o-1])!==Fa(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}WB(t,s,i),qB(t,i,e)}function Ed(t,e,n){return Math.max(Math.min(t,n),e)}function KB(t,e){let n,r,s,i,o,a=Wr(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Wr(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Ed(s.cp1x,e.left,e.right),s.cp1y=Ed(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ed(s.cp2x,e.left,e.right),s.cp2y=Ed(s.cp2y,e.top,e.bottom)))}function YB(t,e,n,r,s){let i,o,a,c;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")GB(t,s);else{let u=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],c=HB(u,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,u=a}e.capBezierPoints&&KB(t,n)}function Fv(){return typeof window<"u"&&typeof document<"u"}function Bv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function df(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const f0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function QB(t,e){return f0(t).getPropertyValue(e)}const XB=["top","right","bottom","left"];function Zi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=XB[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const JB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ZB(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,c;if(JB(s,i,t.target))a=s,c=i;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:a,y:c,box:o}}function Bi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=f0(n),i=s.boxSizing==="border-box",o=Zi(s,"padding"),a=Zi(s,"border","width"),{x:c,y:u,box:d}=ZB(t,n),f=o.left+(d&&a.left),m=o.top+(d&&a.top);let{width:p,height:x}=e;return i&&(p-=o.width+a.width,x-=o.height+a.height),{x:Math.round((c-f)/p*n.width/r),y:Math.round((u-m)/x*n.height/r)}}function eL(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Bv(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=f0(i),c=Zi(a,"border","width"),u=Zi(a,"padding");e=o.width-u.width-c.width,n=o.height-u.height-c.height,r=df(a.maxWidth,i,"clientWidth"),s=df(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||lf,maxHeight:s||lf}}const Cd=t=>Math.round(t*10)/10;function tL(t,e,n,r){const s=f0(t),i=Zi(s,"margin"),o=df(s.maxWidth,t,"clientWidth")||lf,a=df(s.maxHeight,t,"clientHeight")||lf,c=eL(t,e,n);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const m=Zi(s,"border","width"),p=Zi(s,"padding");u-=p.width+m.width,d-=p.height+m.height}return u=Math.max(0,u-i.width),d=Math.max(0,r?u/r:d-i.height),u=Cd(Math.min(u,o,c.maxWidth)),d=Cd(Math.min(d,a,c.maxHeight)),u&&!d&&(d=Cd(u/2)),(e!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=Cd(Math.floor(d*r))),{width:u,height:d}}function R2(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const nL=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Fv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function M2(t,e){const n=QB(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Li(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rL(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function sL(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Li(t,s,n),a=Li(s,i,n),c=Li(i,e,n),u=Li(o,a,n),d=Li(a,c,n);return Li(u,d,n)}const iL=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},oL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ga(t,e,n){return t?iL(e,n):oL()}function ZT(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function ek(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function tk(t){return t==="angle"?{between:UT,compare:rB,normalize:Cn}:{between:sa,compare:(e,n)=>e-n,normalize:e=>e}}function O2({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function aL(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=tk(r),c=e.length;let{start:u,end:d,loop:f}=t,m,p;if(f){for(u+=c,d+=c,m=0,p=c;m<p&&o(a(e[u%c][r]),s,i);++m)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:t.style}}function nk(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:c,normalize:u}=tk(r),{start:d,end:f,loop:m,style:p}=aL(t,e,n),x=[];let _=!1,v=null,S,y,b;const E=()=>c(s,b,S)&&a(s,b)!==0,T=()=>a(i,S)===0||c(i,b,S),k=()=>_||E(),w=()=>!_||T();for(let g=d,A=d;g<=f;++g)y=e[g%o],!y.skip&&(S=u(y[r]),S!==b&&(_=c(S,s,i),v===null&&k()&&(v=a(S,s)===0?g:A),v!==null&&w()&&(x.push(O2({start:v,end:g,loop:m,count:o,style:p})),v=null),A=g,b=S));return v!==null&&x.push(O2({start:v,end:f,loop:m,count:o,style:p})),x}function rk(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=nk(r[s],t.points,e);i.length&&n.push(...i)}return n}function lL(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function cL(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],c;for(c=e+1;c<=n;++c){const u=t[c%s];u.skip||u.stop?a.skip||(r=!1,i.push({start:e%s,end:(c-1)%s,loop:r}),e=o=u.stop?c:null):(o=c,a.skip&&(e=c)),a=u}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function uL(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=lL(n,s,i,r);if(r===!0)return F2(t,[{start:o,end:a,loop:i}],n,e);const c=a<o?a+s:a,u=!!t._fullLoop&&o===0&&a===s-1;return F2(t,cL(n,o,c,u),n,e)}function F2(t,e,n,r){return!r||!r.setContext||!n?e:dL(t,e,n,r)}function dL(t,e,n,r){const s=t._chart.getContext(),i=B2(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,u=[];let d=i,f=e[0].start,m=f;function p(x,_,v,S){const y=a?-1:1;if(x!==_){for(x+=c;n[x%c].skip;)x-=y;for(;n[_%c].skip;)_+=y;x%c!==_%c&&(u.push({start:x%c,end:_%c,loop:v,style:S}),d=S,f=_%c)}}for(const x of e){f=a?f:x.start;let _=n[f%c],v;for(m=f+1;m<=x.end;m++){const S=n[m%c];v=B2(r.setContext(wi(s,{type:"segment",p0:_,p1:S,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),hL(v,d)&&p(f,m-1,x.loop,d),_=S,d=v}f<m-1&&p(f,m-1,x.loop,d)}return u}function B2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hL(t,e){if(!e)return!1;const n=[],r=function(s,i){return Pv(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Sd(t,e,n){return t.options.clip?t[n]:e[n]}function fL(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Sd(n,e,"left"),right:Sd(n,e,"right"),top:Sd(r,e,"top"),bottom:Sd(r,e,"bottom")}:e}function sk(t,e){const n=e._clip;if(n.disabled)return!1;const r=fL(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$T.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Dr=new mL;const L2="transparent",pL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=k2(t||L2),s=r.valid&&k2(e||L2);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class xL{constructor(e,n,r,s){const i=n[r];s=_d([e.to,s,i,e.from]);const o=_d([e.from,i,s]);this._active=!0,this._fn=e.fn||pL[e.type||typeof o],this._easing=uc[e.easing]||uc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=_d([e.to,n,s,e.from]),this._from=_d([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let c;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,a,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class ik{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ne(e))return;const n=Object.keys(nt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Ne(i))return;const o={};for(const a of n)o[a]=i[a];(Ge(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=yL(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&gL(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const d=n[u];let f=i[u];const m=r.get(u);if(f)if(m&&f.active()){f.update(m,d,a);continue}else f.cancel();if(!m||!m.duration){e[u]=d;continue}i[u]=f=new xL(m,e,u,d),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Dr.add(this._chart,r),!0}}function gL(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function yL(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function V2(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function vL(t,e,n){if(n===!1)return!1;const r=V2(t,n),s=V2(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function wL(t){let e,n,r,s;return Ne(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function ok(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function U2(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,c,u;if(e===null)return;let d=!1;for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===n){if(d=!0,r.all)continue;break}u=t.values[c],tt(u)&&(i||e===0||Fa(e)===Fa(u))&&(e+=u)}return!d&&!r.all?0:e}function bL(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],a[c]={[s]:d,[i]:t[d]};return a}function dp(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function _L(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function EL(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function CL(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function z2(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function $2(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,c=i.axis,u=o.axis,d=_L(i,o,r),f=e.length;let m;for(let p=0;p<f;++p){const x=e[p],{[c]:_,[u]:v}=x,S=x._stacks||(x._stacks={});m=S[u]=CL(s,d,_),m[a]=v,m._top=z2(m,o,!0,r.type),m._bottom=z2(m,o,!1,r.type);const y=m._visualValues||(m._visualValues={});y[a]=v}}function hp(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function SL(t,e){return wi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function NL(t,e,n){return wi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Al(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const fp=t=>t==="reset"||t==="none",H2=(t,e)=>e?t:Object.assign({},t),AL=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:ok(n,!0),values:null};class hc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Al(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,p,x)=>f==="x"?m:f==="r"?x:p,i=n.xAxisID=we(r.xAxisID,hp(e,"x")),o=n.yAxisID=we(r.yAxisID,hp(e,"y")),a=n.rAxisID=we(r.rAxisID,hp(e,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,o,a),d=n.vAxisID=s(c,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&N2(this._data,this),e._stacked&&Al(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ne(n)){const s=this._cachedMeta;this._data=bL(n,s)}else if(r!==n){if(r){N2(r,this);const s=this._cachedMeta;Al(s),s._parsed=[]}n&&Object.isExtensible(n)&&aB(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=dp(n.vScale,n),n.stack!==r.stack&&(s=!0,Al(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&($2(this,n._parsed),n._stacked=dp(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let c=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],d,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Ge(s[e])?m=this.parseArrayData(r,s,e,n):Ne(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const p=()=>f[a]===null||u&&f[a]<u[a];for(d=0;d<n;++d)r._parsed[d+e]=f=m[d],c&&(p()&&(c=!1),u=f);r._sorted=c}o&&$2(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,c=o.axis,u=i.getLabels(),d=i===o,f=new Array(s);let m,p,x;for(m=0,p=s;m<p;++m)x=m+r,f[m]={[a]:d||i.parse(u[x],x),[c]:o.parse(n[x],x)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let c,u,d,f;for(c=0,u=s;c<u;++c)d=c+r,f=n[d],a[c]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,f,m,p;for(d=0,f=s;d<f;++d)m=d+r,p=n[m],u[d]={x:i.parse(of(p,a),m),y:o.parse(of(p,c),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:ok(s,!0),values:n._stacks[e.axis]._visualValues};return U2(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=U2(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),c=AL(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=EL(a);let m,p;function x(){p=s[m];const _=p[a.axis];return!tt(p[e.axis])||d>_||f<_}for(m=0;m<o&&!(!x()&&(this.updateRangeFromParsed(u,e,p,c),i));++m);if(i){for(m=o-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],tt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=wL(we(this.options.clip,vL(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,i,a,c),d=a;d<a+c;++d){const f=s[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=NL(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=SL(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],c=this.enableOptionSharing&&af(r);if(a)return H2(a,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),d),p=Object.keys(nt.elements[e]),x=()=>this.getContext(r,s,n),_=u.resolveNamedOptions(m,p,x,f);return _.$shared&&(_.$shared=c,i[o]=Object.freeze(H2(_,c))),_}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let c;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),m=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(m,this.getContext(e,r,n))}const u=new ik(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||fp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){fp(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!fp(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,c,u]of this._syncList)this[a](c,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const c=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(c(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Al(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(hc,"defaults",{}),ce(hc,"datasetElementType",null),ce(hc,"dataElementType",null);class sh extends hc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:c}=dB(n,s,o);this._drawStart=a,this._drawCount=c,hB(n)&&(a=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,a,c,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,p=a.axis,{spanGaps:x,segment:_}=this.options,v=Gc(x)?x:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||i||s==="none",y=n+r,b=e.length;let E=n>0&&this.getParsed(n-1);for(let T=0;T<b;++T){const k=e[T],w=S?k:{};if(T<n||T>=y){w.skip=!0;continue}const g=this.getParsed(T),A=Pe(g[p]),N=w[m]=o.getPixelForValue(g[m],T),j=w[p]=i||A?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,g,c):g[p],T);w.skip=isNaN(N)||isNaN(j)||A,w.stop=T>0&&Math.abs(g[m]-E[m])>v,_&&(w.parsed=g,w.raw=u.data[T]),f&&(w.options=d||this.resolveDataElementOptions(T,k.active?"active":s)),S||this.updateElement(k,T,w,s),E=g}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ce(sh,"id","line"),ce(sh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ce(sh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Pi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Lv{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(Lv.prototype,e)}init(){}formats(){return Pi()}parse(){return Pi()}format(){return Pi()}add(){return Pi()}diff(){return Pi()}startOf(){return Pi()}endOf(){return Pi()}}var TL={_date:Lv};function kL(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?iB:qi;if(r){if(s._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const m=u(i,e,n-f),p=u(i,e,n+f);return{lo:m.lo,hi:p.hi}}}}else{const d=u(i,e,n);if(c){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,p=m.slice(0,d.lo+1).reverse().findIndex(_=>!Pe(_[f.axis]));d.lo-=Math.max(0,p);const x=m.slice(d.hi).findIndex(_=>!Pe(_[f.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:i.length-1}}function Cu(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=i.length;a<c;++a){const{index:u,data:d}=i[a],{lo:f,hi:m}=kL(i[a],e,o,s);for(let p=f;p<=m;++p){const x=d[p];x.skip||r(x,u,p)}}}function IL(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function mp(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Cu(t,n,e,function(a,c,u){!s&&!Wr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:c,index:u})},!0),i}function jL(t,e,n,r){let s=[];function i(o,a,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:f}=nB(o,{x:e.x,y:e.y});UT(f,u,d)&&s.push({element:o,datasetIndex:a,index:c})}return Cu(t,n,e,i),s}function PL(t,e,n,r,s,i){let o=[];const a=IL(n);let c=Number.POSITIVE_INFINITY;function u(d,f,m){const p=d.inRange(e.x,e.y,s);if(r&&!p)return;const x=d.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!p)return;const v=a(e,x);v<c?(o=[{element:d,datasetIndex:f,index:m}],c=v):v===c&&o.push({element:d,datasetIndex:f,index:m})}return Cu(t,n,e,u),o}function pp(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?jL(t,e,n,s):PL(t,e,n,r,s,i)}function W2(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Cu(t,n,e,(c,u,d)=>{c[o]&&c[o](e[n],s)&&(i.push({element:c,datasetIndex:u,index:d}),a=a||c.inRange(e.x,e.y,s))}),r&&!a?[]:i}var DL={evaluateInteractionItems:Cu,modes:{index(t,e,n,r){const s=Bi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mp(t,s,i,r,o):pp(t,s,i,!1,r,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=a[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(t,e,n,r){const s=Bi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mp(t,s,i,r,o):pp(t,s,i,!1,r,o);if(a.length>0){const c=a[0].datasetIndex,u=t.getDatasetMeta(c).data;a=[];for(let d=0;d<u.length;++d)a.push({element:u[d],datasetIndex:c,index:d})}return a},point(t,e,n,r){const s=Bi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return mp(t,s,i,r,o)},nearest(t,e,n,r){const s=Bi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return pp(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Bi(e,t);return W2(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Bi(e,t);return W2(t,s,"y",n.intersect,r)}}};const ak=["left","top","right","bottom"];function Tl(t,e){return t.filter(n=>n.pos===e)}function q2(t,e){return t.filter(n=>ak.indexOf(n.pos)===-1&&n.box.axis===e)}function kl(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function RL(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function ML(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!ak.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function OL(t,e){const n=ML(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:c}=a.box,u=n[a.stack],d=u&&a.stackWeight/u.weight;a.horizontal?(a.width=d?d*r:c&&e.availableWidth,a.height=s):(a.width=r,a.height=d?d*s:c&&e.availableHeight)}return n}function FL(t){const e=RL(t),n=kl(e.filter(u=>u.box.fullSize),!0),r=kl(Tl(e,"left"),!0),s=kl(Tl(e,"right")),i=kl(Tl(e,"top"),!0),o=kl(Tl(e,"bottom")),a=q2(e,"x"),c=q2(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:Tl(e,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(o).concat(a)}}function G2(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function lk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function BL(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Ne(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&lk(o,i.getPadding());const a=Math.max(0,e.outerWidth-G2(o,t,"left","right")),c=Math.max(0,e.outerHeight-G2(o,t,"top","bottom")),u=a!==t.w,d=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function LL(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function VL(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Wl(t,e,n,r){const s=[];let i,o,a,c,u,d;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],c=a.box,c.update(a.width||e.w,a.height||e.h,VL(a.horizontal,e));const{same:f,other:m}=BL(e,n,a,r);u|=f&&s.length,d=d||m,c.fullSize||s.push(a)}return u&&Wl(s,e,n,r)||d}function Nd(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function K2(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const c=a.box,u=r[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/u.weight||1;if(a.horizontal){const f=e.w*d,m=u.size||c.height;af(u.start)&&(o=u.start),c.fullSize?Nd(c,s.left,o,n.outerWidth-s.right-s.left,m):Nd(c,e.left+u.placed,o,f,m),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,m=u.size||c.width;af(u.start)&&(i=u.start),c.fullSize?Nd(c,i,s.top,m,n.outerHeight-s.bottom-s.top):Nd(c,i,e.top+u.placed,m,f),u.start=i,u.placed+=f,i=c.right}}e.x=i,e.y=o}var Vn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Xt(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=FL(t.boxes),c=a.vertical,u=a.horizontal;je(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const d=c.reduce((_,v)=>v.box.options&&v.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),m=Object.assign({},s);lk(m,Xt(r));const p=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),x=OL(c.concat(u),f);Wl(a.fullSize,p,f,x),Wl(c,p,f,x),Wl(u,p,f,x)&&Wl(c,p,f,x),LL(p),K2(a.leftAndTop,p,f,x),p.x+=p.w,p.y+=p.h,K2(a.rightAndBottom,p,f,x),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},je(a.chartArea,_=>{const v=_.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class ck{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class UL extends ck{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ih="$chartjs",zL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Y2=t=>t===null||t==="";function $L(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[ih]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Y2(s)){const i=M2(t,"width");i!==void 0&&(t.width=i)}if(Y2(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=M2(t,"height");i!==void 0&&(t.height=i)}return t}const uk=nL?{passive:!0}:!1;function HL(t,e,n){t&&t.addEventListener(e,n,uk)}function WL(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,uk)}function qL(t,e){const n=zL[t.type]||t.type,{x:r,y:s}=Bi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function hf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function GL(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||hf(a.addedNodes,r),o=o&&!hf(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function KL(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||hf(a.removedNodes,r),o=o&&!hf(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Kc=new Map;let Q2=0;function dk(){const t=window.devicePixelRatio;t!==Q2&&(Q2=t,Kc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function YL(t,e){Kc.size||window.addEventListener("resize",dk),Kc.set(t,e)}function QL(t){Kc.delete(t),Kc.size||window.removeEventListener("resize",dk)}function XL(t,e,n){const r=t.canvas,s=r&&Bv(r);if(!s)return;const i=HT((a,c)=>{const u=s.clientWidth;n(a,c),u<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const c=a[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(s),YL(t,i),o}function xp(t,e,n){n&&n.disconnect(),e==="resize"&&QL(t)}function JL(t,e,n){const r=t.canvas,s=HT(i=>{t.ctx!==null&&n(qL(i,t))},t);return HL(r,e,s),s}class ZL extends ck{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?($L(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[ih])return!1;const r=n[ih].initial;["height","width"].forEach(i=>{const o=r[i];Pe(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[ih],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:GL,detach:KL,resize:XL}[n]||JL;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:xp,detach:xp,resize:xp}[n]||WL)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return tL(e,n,r,s)}isAttached(e){const n=e&&Bv(e);return!!(n&&n.isConnected)}}function eV(t){return!Fv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?UL:ZL}class is{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Gc(this.x)&&Gc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}ce(is,"defaults",{}),ce(is,"defaultRoutes");function tV(t,e){const n=t.options.ticks,r=nV(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?sV(e):[],o=i.length,a=i[0],c=i[o-1],u=[];if(o>s)return iV(e,u,i,o/s),u;const d=rV(i,e,s);if(o>0){let f,m;const p=o>1?Math.round((c-a)/(o-1)):null;for(Ad(e,u,d,Pe(p)?0:a-p,a),f=0,m=o-1;f<m;f++)Ad(e,u,d,i[f],i[f+1]);return Ad(e,u,d,c,Pe(p)?e.length:c+p),u}return Ad(e,u,d),u}function nV(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function rV(t,e,n){const r=oV(t),s=e.length/n;if(!r)return Math.max(s,1);const i=ZF(r);for(let o=0,a=i.length-1;o<a;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function sV(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function iV(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Ad(t,e,n,r,s){const i=we(r,0),o=Math.min(we(s,t.length),t.length);let a=0,c,u,d;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),a++,d=Math.round(i+a*n))}function oV(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const aV=t=>t==="left"?"right":t==="right"?"left":t,X2=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,J2=(t,e)=>Math.min(e||t,t);function Z2(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function lV(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let c=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<i-a||c>o+a)))return c}function cV(t,e){je(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Il(t){return t.drawTicks?t.tickLength:0}function eE(t,e){if(!t.display)return 0;const n=yt(t.font,e),r=Xt(t.padding);return(Ge(t.text)?t.text.length:1)*n.lineHeight+r.height}function uV(t,e){return wi(t,{scale:e,type:"scale"})}function dV(t,e,n){return wi(t,{tick:n,index:e,type:"tick"})}function hV(t,e,n){let r=jv(t);return(n&&e!=="right"||!n&&e==="right")&&(r=aV(r)),r}function fV(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:c}=t,{chartArea:u,scales:d}=c;let f=0,m,p,x;const _=o-s,v=a-i;if(t.isHorizontal()){if(p=$t(r,i,a),Ne(n)){const S=Object.keys(n)[0],y=n[S];x=d[S].getPixelForValue(y)+_-e}else n==="center"?x=(u.bottom+u.top)/2+_-e:x=X2(t,n,e);m=a-i}else{if(Ne(n)){const S=Object.keys(n)[0],y=n[S];p=d[S].getPixelForValue(y)-v+e}else n==="center"?p=(u.left+u.right)/2-v+e:p=X2(t,n,e);x=$t(r,o,s),f=n==="left"?-An:An}return{titleX:p,titleY:x,maxWidth:m,rotation:f}}class Ao extends is{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=_n(e,Number.POSITIVE_INFINITY),n=_n(n,Number.NEGATIVE_INFINITY),r=_n(r,Number.POSITIVE_INFINITY),s=_n(s,Number.NEGATIVE_INFINITY),{min:_n(e,r),max:_n(n,s),minDefined:tt(e),maxDefined:tt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let c=0,u=a.length;c<u;++c)o=a[c].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:_n(n,_n(r,n)),max:_n(r,_n(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=DB(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?Z2(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=tV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fe(this.options.afterUpdate,[this])}beforeSetDimensions(){Fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Fe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Fe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=J2(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,m=d.highest.height,p=Ln(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),f+6>a&&(a=p/(r-(e.offset?.5:1)),c=this.maxHeight-Il(e.grid)-n.padding-eE(e.title,this.chart.options.font),u=Math.sqrt(f*f+m*m),o=kv(Math.min(Math.asin(Ln((d.highest.height+6)/a,-1,1)),Math.asin(Ln(c/u,-1,1))-Math.asin(Ln(m/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=eE(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Il(i)+c):(e.height=this.maxHeight,e.width=Il(i)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:m}=this._getLabelSizes(),p=r.padding*2,x=zs(this.labelRotation),_=Math.cos(x),v=Math.sin(x);if(a){const S=r.mirror?0:v*f.width+_*m.height;e.height=Math.min(this.maxHeight,e.height+S+p)}else{const S=r.mirror?0:_*f.width+v*m.height;e.width=Math.min(this.maxWidth,e.width+S+p)}this._calculatePadding(u,d,v,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,c=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;c?u?(m=s*e.width,p=r*n.height):(m=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,p=n.width/2),this.paddingLeft=Math.max((m-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let d=n.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=n.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Pe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Z2(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],c=Math.floor(n/J2(n,r));let u=0,d=0,f,m,p,x,_,v,S,y,b,E,T;for(f=0;f<n;f+=c){if(x=e[f].label,_=this._resolveTickFontOptions(f),s.font=v=_.string,S=i[v]=i[v]||{data:{},gc:[]},y=_.lineHeight,b=E=0,!Pe(x)&&!Ge(x))b=cf(s,S.data,S.gc,b,x),E=y;else if(Ge(x))for(m=0,p=x.length;m<p;++m)T=x[m],!Pe(T)&&!Ge(T)&&(b=cf(s,S.data,S.gc,b,T),E+=y);o.push(b),a.push(E),u=Math.max(b,u),d=Math.max(E,d)}cV(i,n);const k=o.indexOf(u),w=a.indexOf(d),g=A=>({width:o[A]||0,height:a[A]||0});return{first:g(0),last:g(n-1),widest:g(k),highest:g(w),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return sB(this._alignToPixels?ji(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=dV(this.getContext(),e,r))}return this.$context||(this.$context=uV(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=zs(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>a*s?a/r:c/s:c*s<a*r?c/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,c=i.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),m=Il(i),p=[],x=a.setContext(this.getContext()),_=x.display?x.width:0,v=_/2,S=function(G){return ji(r,G,_)};let y,b,E,T,k,w,g,A,N,j,D,P;if(o==="top")y=S(this.bottom),w=this.bottom-m,A=y-v,j=S(e.top)+v,P=e.bottom;else if(o==="bottom")y=S(this.top),j=e.top,P=S(e.bottom)-v,w=y+v,A=this.top+m;else if(o==="left")y=S(this.right),k=this.right-m,g=y-v,N=S(e.left)+v,D=e.right;else if(o==="right")y=S(this.left),N=e.left,D=S(e.right)-v,k=y+v,g=this.left+m;else if(n==="x"){if(o==="center")y=S((e.top+e.bottom)/2+.5);else if(Ne(o)){const G=Object.keys(o)[0],X=o[G];y=S(this.chart.scales[G].getPixelForValue(X))}j=e.top,P=e.bottom,w=y+v,A=w+m}else if(n==="y"){if(o==="center")y=S((e.left+e.right)/2);else if(Ne(o)){const G=Object.keys(o)[0],X=o[G];y=S(this.chart.scales[G].getPixelForValue(X))}k=y-v,g=k-m,N=e.left,D=e.right}const M=we(s.ticks.maxTicksLimit,f),$=Math.max(1,Math.ceil(f/M));for(b=0;b<f;b+=$){const G=this.getContext(b),X=i.setContext(G),H=a.setContext(G),Q=X.lineWidth,J=X.color,V=H.dash||[],F=H.dashOffset,L=X.tickWidth,W=X.tickColor,oe=X.tickBorderDash||[],le=X.tickBorderDashOffset;E=lV(this,b,c),E!==void 0&&(T=ji(r,E,Q),u?k=g=N=D=T:w=A=j=P=T,p.push({tx1:k,ty1:w,tx2:g,ty2:A,x1:N,y1:j,x2:D,y2:P,width:Q,color:J,borderDash:V,borderDashOffset:F,tickWidth:L,tickColor:W,tickBorderDash:oe,tickBorderDashOffset:le}))}return this._ticksLength=f,this._borderValue=y,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=i,m=Il(r.grid),p=m+d,x=f?-d:p,_=-zs(this.labelRotation),v=[];let S,y,b,E,T,k,w,g,A,N,j,D,P="middle";if(s==="top")k=this.bottom-x,w=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+x,w=this._getXAxisLabelAlignment();else if(s==="left"){const $=this._getYAxisLabelAlignment(m);w=$.textAlign,T=$.x}else if(s==="right"){const $=this._getYAxisLabelAlignment(m);w=$.textAlign,T=$.x}else if(n==="x"){if(s==="center")k=(e.top+e.bottom)/2+p;else if(Ne(s)){const $=Object.keys(s)[0],G=s[$];k=this.chart.scales[$].getPixelForValue(G)+p}w=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")T=(e.left+e.right)/2-p;else if(Ne(s)){const $=Object.keys(s)[0],G=s[$];T=this.chart.scales[$].getPixelForValue(G)}w=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(c==="start"?P="top":c==="end"&&(P="bottom"));const M=this._getLabelSizes();for(S=0,y=a.length;S<y;++S){b=a[S],E=b.label;const $=i.setContext(this.getContext(S));g=this.getPixelForTick(S)+i.labelOffset,A=this._resolveTickFontOptions(S),N=A.lineHeight,j=Ge(E)?E.length:1;const G=j/2,X=$.color,H=$.textStrokeColor,Q=$.textStrokeWidth;let J=w;o?(T=g,w==="inner"&&(S===y-1?J=this.options.reverse?"left":"right":S===0?J=this.options.reverse?"right":"left":J="center"),s==="top"?u==="near"||_!==0?D=-j*N+N/2:u==="center"?D=-M.highest.height/2-G*N+N:D=-M.highest.height+N/2:u==="near"||_!==0?D=N/2:u==="center"?D=M.highest.height/2-G*N:D=M.highest.height-j*N,f&&(D*=-1),_!==0&&!$.showLabelBackdrop&&(T+=N/2*Math.sin(_))):(k=g,D=(1-j)*N/2);let V;if($.showLabelBackdrop){const F=Xt($.backdropPadding),L=M.heights[S],W=M.widths[S];let oe=D-F.top,le=0-F.left;switch(P){case"middle":oe-=L/2;break;case"bottom":oe-=L;break}switch(w){case"center":le-=W/2;break;case"right":le-=W;break;case"inner":S===y-1?le-=W:S>0&&(le-=W/2);break}V={left:le,top:oe,width:W+F.width,height:L+F.height,color:$.backdropColor}}v.push({label:E,font:A,textOffset:D,options:{rotation:_,color:X,strokeColor:H,strokeWidth:Q,textAlign:J,textBaseline:P,translation:[T,k],backdrop:V}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-zs(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,c=o.widest.width;let u,d;return n==="left"?s?(d=this.right+i,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-a,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+a,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const c=s[i];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,m;this.isHorizontal()?(u=ji(e,this.left,o)-o/2,d=ji(e,this.right,a)+a/2,f=m=c):(f=ji(e,this.top,o)-o/2,m=ji(e,this.bottom,a)+a/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,f),n.lineTo(d,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&d0(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,c=o.font,u=o.label,d=o.textOffset;po(r,u,0,d,c,a)}s&&h0(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=yt(r.font),o=Xt(r.padding),a=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Ne(n)?(c+=o.bottom,Ge(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:m}=fV(this,c,n,a);po(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:hV(a,n,s),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=we(e.grid&&e.grid.z,-1),s=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ao.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Td{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;xV(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,mV(e,o,r),this.override&&nt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in nt[s]&&(delete nt[s][r],this.override&&delete mo[r])}}function mV(t,e,n){const r=qc(Object.create(null),[n?nt.get(n):{},nt.get(e),t.defaults]);nt.set(e,r),t.defaultRoutes&&pV(e,t.defaultRoutes),t.descriptors&&nt.describe(e,t.descriptors)}function pV(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");nt.route(i,s,c,a)})}function xV(t){return"id"in t&&"defaults"in t}class gV{constructor(){this.controllers=new Td(hc,"datasets",!0),this.elements=new Td(is,"elements"),this.plugins=new Td(Object,"plugins"),this.scales=new Td(Ao,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):je(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Tv(e);Fe(r["before"+s],[],r),n[e](r),Fe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var mr=new gV;class yV{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],c=[n,s,i.options];if(Fe(a,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Pe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=we(r.options&&r.options.plugins,{}),i=vV(r);return s===!1&&!n?[]:bV(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function vV(t){const e={},n=[],r=Object.keys(mr.plugins.items);for(let i=0;i<r.length;i++)n.push(mr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function wV(t,e){return!e&&t===!1?null:t===!0?{}:t}function bV(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const c=a.id,u=wV(r[c],s);u!==null&&i.push({plugin:a,options:_V(t.config,{plugin:a,local:n[c]},u,o)})}return i}function _V(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tg(t,e){const n=nt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function EV(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function CV(t,e){return t===e?"_index_":"_value_"}function tE(t){if(t==="x"||t==="y"||t==="r")return t}function SV(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ng(t,...e){if(tE(t))return t;for(const n of e){const r=n.axis||SV(n.position)||t.length>1&&tE(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function nE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function NV(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return nE(t,"x",n[0])||nE(t,"y",n[0])}return{}}function AV(t,e){const n=mo[t.type]||{scales:{}},r=e.scales||{},s=tg(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ne(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=ng(o,a,NV(o,t),nt.scales[a.type]),u=CV(c,s),d=n.scales||{};i[o]=lc(Object.create(null),[{axis:c},a,d[c],d[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,c=o.indexAxis||tg(a,e),d=(mo[a]||{}).scales||{};Object.keys(d).forEach(f=>{const m=EV(f,c),p=o[m+"AxisID"]||m;i[p]=i[p]||Object.create(null),lc(i[p],[{axis:m},r[p],d[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];lc(a,[nt.scales[a.type],nt.scale])}),i}function hk(t){const e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=AV(t,e)}function fk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function TV(t){return t=t||{},t.data=fk(t.data),hk(t),t}const rE=new Map,mk=new Set;function kd(t,e){let n=rE.get(t);return n||(n=e(),rE.set(t,n),mk.add(n)),n}const jl=(t,e,n)=>{const r=of(e,n);r!==void 0&&t.add(r)};class kV{constructor(e){this._config=TV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=fk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),hk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return kd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return kd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return kd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return kd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const c=new Set;n.forEach(d=>{e&&(c.add(e),d.forEach(f=>jl(c,e,f))),d.forEach(f=>jl(c,s,f)),d.forEach(f=>jl(c,mo[i]||{},f)),d.forEach(f=>jl(c,nt,f)),d.forEach(f=>jl(c,Zx,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),mk.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,mo[n]||{},nt.datasets[n]||{},{type:n},nt,Zx]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=sE(this._resolverCache,e,s);let c=o;if(jV(o,n)){i.$shared=!1,r=di(r)?r():r;const u=this.createResolver(e,r,a);c=Ba(o,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=sE(this._resolverCache,e,r);return Ne(n)?Ba(i,n,void 0,s):i}}function sE(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Rv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const IV=t=>Ne(t)&&Object.getOwnPropertyNames(t).some(e=>di(t[e]));function jV(t,e){const{isScriptable:n,isIndexable:r}=KT(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(di(a)||IV(a))||o&&Ge(a))return!0}return!1}var PV="4.5.0";const DV=["top","bottom","left","right","chartArea"];function iE(t,e){return t==="top"||t==="bottom"||DV.indexOf(t)===-1&&e==="x"}function oE(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function aE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Fe(n&&n.onComplete,[t],e)}function RV(t){const e=t.chart,n=e.options.animation;Fe(n&&n.onProgress,[t],e)}function pk(t){return Fv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const oh={},lE=t=>{const e=pk(t);return Object.values(oh).filter(n=>n.canvas===e).pop()};function MV(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function OV(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Ss;let Ja=(Ss=class{static register(...e){mr.add(...e),cE()}static unregister(...e){mr.remove(...e),cE()}constructor(e,n){const r=this.config=new kV(n),s=pk(e),i=lE(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||eV(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),c=a&&a.canvas,u=c&&c.height,d=c&&c.width;if(this.id=HF(),this.ctx=a,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cB(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],oh[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Dr.listen(this,"complete",aE),Dr.listen(this,"progress",RV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Pe(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return mr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():R2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j2(this.canvas,this.ctx),this}stop(){return Dr.stop(this),this}resize(e,n){Dr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,R2(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Fe(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};je(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],c=ng(o,a),u=c==="r",d=c==="x";return{options:a,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),je(i,o=>{const a=o.options,c=a.id,u=ng(c,a),d=we(a.type,o.dtype);(a.position===void 0||iE(a.position,u)!==iE(o.dposition))&&(a.position=o.dposition),s[c]=!0;let f=null;if(c in r&&r[c].type===d)f=r[c];else{const m=mr.getScale(d);f=new m({id:c,type:d,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),je(s,(o,a)=>{o||delete r[a]}),je(r,o=>{Vn.configure(this,o,o.options),Vn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(oE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||tg(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=mr.getController(a),{datasetElementType:u,dataElementType:d}=nt.datasets[a];Object.assign(c,{dataElementType:mr.getElement(d),datasetElementType:u&&mr.getElement(u)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){je(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||je(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(oE("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){je(this.scales,e=>{Vn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!_2(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;MV(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!_2(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],je(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,di(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Dr.has(this)?this.attached&&!Dr.running(this)&&Dr.start(this):(this.draw(),aE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=sk(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&d0(n,s),e.controller.draw(),s&&h0(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Wr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=DL.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);af(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Dr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),j2(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete oh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};je(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(n.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){je(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},je(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,c;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!rf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),c=QF(e),u=OV(e,this._lastEvent,r,c);r&&(this._lastEvent=null,Fe(i.onHover,[e,a,this],this),c&&Fe(i.onClick,[e,a,this],this));const d=!rf(a,s);return(d||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=u,d}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},ce(Ss,"defaults",nt),ce(Ss,"instances",oh),ce(Ss,"overrides",mo),ce(Ss,"registry",mr),ce(Ss,"version",PV),ce(Ss,"getChart",lE),Ss);function cE(){return je(Ja.instances,t=>t._plugins.invalidate())}function xk(t,e,n=e){t.lineCap=we(n.borderCapStyle,e.borderCapStyle),t.setLineDash(we(n.borderDash,e.borderDash)),t.lineDashOffset=we(n.borderDashOffset,e.borderDashOffset),t.lineJoin=we(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(n.borderWidth,e.borderWidth),t.strokeStyle=we(n.borderColor,e.borderColor)}function FV(t,e,n){t.lineTo(n.x,n.y)}function BV(t){return t.stepped?EB:t.tension||t.cubicInterpolationMode==="monotone"?CB:FV}function gk(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,c=Math.max(s,o),u=Math.min(i,a),d=s<o&&i<o||s>a&&i>a;return{count:r,start:c,loop:e.loop,ilen:u<c&&!d?r+u-c:u-c}}function LV(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:c,ilen:u}=gk(s,n,r),d=BV(i);let{move:f=!0,reverse:m}=r||{},p,x,_;for(p=0;p<=u;++p)x=s[(a+(m?u-p:p))%o],!x.skip&&(f?(t.moveTo(x.x,x.y),f=!1):d(t,_,x,m,i.stepped),_=x);return c&&(x=s[(a+(m?u:0))%o],d(t,_,x,m,i.stepped)),!!c}function VV(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=gk(s,n,r),{move:c=!0,reverse:u}=r||{};let d=0,f=0,m,p,x,_,v,S;const y=E=>(o+(u?a-E:E))%i,b=()=>{_!==v&&(t.lineTo(d,v),t.lineTo(d,_),t.lineTo(d,S))};for(c&&(p=s[y(0)],t.moveTo(p.x,p.y)),m=0;m<=a;++m){if(p=s[y(m)],p.skip)continue;const E=p.x,T=p.y,k=E|0;k===x?(T<_?_=T:T>v&&(v=T),d=(f*d+E)/++f):(b(),t.lineTo(E,T),x=k,f=0,_=v=T),S=T}b()}function rg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?VV:LV}function UV(t){return t.stepped?rL:t.tension||t.cubicInterpolationMode==="monotone"?sL:Li}function zV(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),xk(t,e.options),t.stroke(s)}function $V(t,e,n,r){const{segments:s,options:i}=e,o=rg(e);for(const a of s)xk(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const HV=typeof Path2D=="function";function WV(t,e,n,r){HV&&!e.options.segment?zV(t,e,n,r):$V(t,e,n,r)}class xr extends is{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;YB(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=rk(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],c=UV(r);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:m}=o[u],p=i[f],x=i[m];if(p===x){a.push(p);continue}const _=Math.abs((s-p[n])/(x[n]-p[n])),v=c(p,x,_,r.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,r){return rg(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=rg(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),WV(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(xr,"id","line"),ce(xr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(xr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(xr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function uE(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class ya extends is{constructor(n){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return uE(this,n,"x",r)}inYRange(n,r){return uE(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Wr(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,eg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ce(ya,"id","point"),ce(ya,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(ya,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function qV(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:c,end:u}=a;u=m0(c,u,s);const d=sg(n,s[c],s[u],a.loop);if(!e.segments){o.push({source:a,target:d,start:s[c],end:s[u]});continue}const f=rk(e,d);for(const m of f){const p=sg(n,i[m.start],i[m.end],m.loop),x=nk(a,s,p);for(const _ of x)o.push({source:_,target:m,start:{[n]:dE(d,p,"start",Math.max)},end:{[n]:dE(d,p,"end",Math.min)}})}}return o}function sg(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=Cn(s),i=Cn(i)),{property:t,start:s,end:i}}function GV(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=m0(o,a,s);const c=s[o],u=s[a];r!==null?(i.push({x:c.x,y:r}),i.push({x:u.x,y:r})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function m0(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function dE(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function yk(t,e){let n=[],r=!1;return Ge(t)?(r=!0,n=t):n=GV(t,e),n.length?new xr({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function hE(t){return t&&t.fill!==!1}function KV(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!tt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function YV(t,e,n){const r=ZV(t);if(Ne(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return tt(s)&&Math.floor(s)===s?QV(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function QV(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function XV(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ne(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function JV(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ne(t)?r=t.value:r=e.getBaseValue(),r}function ZV(t){const e=t.options,n=e.fill;let r=we(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function eU(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=tU(e,n);a.push(yk({x:null,y:e.bottom},r));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)nU(s,o[d],a)}return new xr({points:s,options:{}})}function tU(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function nU(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:c}=rU(i,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(t.push(c),!a)break}}t.push(...r)}function rU(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],f=o[d.start][n],m=o[d.end][n];if(sa(s,f,m)){a=s===f,c=s===m;break}}return{first:a,last:c,point:r}}class vk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:In},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function sU(t){const{chart:e,fill:n,line:r}=t;if(tt(n))return iU(e,n);if(n==="stack")return eU(t);if(n==="shape")return!0;const s=oU(t);return s instanceof vk?s:yk(s,r)}function iU(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function oU(t){return(t.scale||{}).getPointPositionForValue?lU(t):aU(t)}function aU(t){const{scale:e={},fill:n}=t,r=XV(n,e);if(tt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function lU(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=JV(n,e,i),a=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,i);return new vk({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)a.push(e.getPointPositionForValue(c,o));return a}function gp(t,e,n){const r=sU(e),{chart:s,index:i,line:o,scale:a,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:m=f,below:p=f}=d||{},x=s.getDatasetMeta(i),_=sk(s,x);r&&o.points.length&&(d0(t,n),cU(t,{line:o,target:r,above:m,below:p,area:n,scale:a,axis:c,clip:_}),h0(t))}function cU(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:c}=e,u=n._loop?"angle":e.axis;t.save();let d=i;i!==s&&(u==="x"?(fE(t,r,o.top),yp(t,{line:n,target:r,color:s,scale:a,property:u,clip:c}),t.restore(),t.save(),fE(t,r,o.bottom)):u==="y"&&(mE(t,r,o.left),yp(t,{line:n,target:r,color:i,scale:a,property:u,clip:c}),t.restore(),t.save(),mE(t,r,o.right),d=s)),yp(t,{line:n,target:r,color:d,scale:a,property:u,clip:c}),t.restore()}function fE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:c,end:u}=a,d=s[c],f=s[m0(c,u,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function mE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:c,end:u}=a,d=s[c],f=s[m0(c,u,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(n,d.y),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function yp(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,c=qV(n,r,s);for(const{source:u,target:d,start:f,end:m}of c){const{style:{backgroundColor:p=i}={}}=u,x=r!==!0;t.save(),t.fillStyle=p,uU(t,o,a,x&&sg(s,f,m)),t.beginPath();const _=!!n.pathSegment(t,u);let v;if(x){_?t.closePath():pE(t,r,m,s);const S=!!r.pathSegment(t,d,{move:_,reverse:!0});v=_&&S,v||pE(t,r,f,s)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function uU(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let c,u,d,f;i==="x"?(c=o,u=s.top,d=a,f=s.bottom):(c=s.left,u=o,d=s.right,f=a),t.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),f=Math.min(f,n.bottom)),t.rect(c,u,d-c,f-u),t.clip()}}function pE(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var Vv={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,c;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,c=null,a&&a.options&&a instanceof xr&&(c={visible:t.isDatasetVisible(o),index:o,fill:YV(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=c,s.push(c);for(o=0;o<r;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=KV(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&gp(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;hE(i)&&gp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!hE(r)||n.drawTime!=="beforeDatasetDraw"||gp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const xE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},dU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class gE extends is{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Fe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=yt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=xE(r,i);let u,d;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,a,c)+10):(d=this.maxHeight,u=this._fitCols(o,s,a,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,p=-d;return this.legendItems.forEach((x,_)=>{const v=r+n/2+i.measureText(x.text).width;(_===0||u[u.length-1]+v+2*a>o)&&(f+=d,u[u.length-(_>0?0:1)]=0,p+=d,m++),c[_]={left:0,top:p,row:m,width:v,height:s},u[u.length-1]+=v+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let f=a,m=0,p=0,x=0,_=0;return this.legendItems.forEach((v,S)=>{const{itemWidth:y,itemHeight:b}=hU(r,n,i,v,s);S>0&&p+b+2*a>d&&(f+=m+a,u.push({width:m,height:p}),x+=m+a,_++,m=p=0),c[S]={left:x,top:p,col:_,width:y,height:b},m=Math.max(m,y),p+=b+a}),f+=m,u.push({width:m,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=ga(i,this.left,this.width);if(this.isHorizontal()){let a=0,c=$t(r,this.left+s,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,c=$t(r,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let a=0,c=$t(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,c=$t(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;d0(e,this),this._draw(),h0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=nt.color,c=ga(e.rtl,this.left,this.width),u=yt(o.font),{padding:d}=o,f=u.size,m=f/2;let p;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:x,boxHeight:_,itemHeight:v}=xE(o,f),S=function(k,w,g){if(isNaN(x)||x<=0||isNaN(_)||_<0)return;s.save();const A=we(g.lineWidth,1);if(s.fillStyle=we(g.fillStyle,a),s.lineCap=we(g.lineCap,"butt"),s.lineDashOffset=we(g.lineDashOffset,0),s.lineJoin=we(g.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=we(g.strokeStyle,a),s.setLineDash(we(g.lineDash,[])),o.usePointStyle){const N={radius:_*Math.SQRT2/2,pointStyle:g.pointStyle,rotation:g.rotation,borderWidth:A},j=c.xPlus(k,x/2),D=w+m;qT(s,N,j,D,o.pointStyleWidth&&x)}else{const N=w+Math.max((f-_)/2,0),j=c.leftForLtr(k,x),D=xa(g.borderRadius);s.beginPath(),Object.values(D).some(P=>P!==0)?uf(s,{x:j,y:N,w:x,h:_,radius:D}):s.rect(j,N,x,_),s.fill(),A!==0&&s.stroke()}s.restore()},y=function(k,w,g){po(s,g.text,k,w+v/2,u,{strikethrough:g.hidden,textAlign:c.textAlign(g.textAlign)})},b=this.isHorizontal(),E=this._computeTitleHeight();b?p={x:$t(i,this.left+d,this.right-r[0]),y:this.top+d+E,line:0}:p={x:this.left+d,y:$t(i,this.top+E+d,this.bottom-n[0].height),line:0},ZT(this.ctx,e.textDirection);const T=v+d;this.legendItems.forEach((k,w)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;const g=s.measureText(k.text).width,A=c.textAlign(k.textAlign||(k.textAlign=o.textAlign)),N=x+m+g;let j=p.x,D=p.y;c.setWidth(this.width),b?w>0&&j+N+d>this.right&&(D=p.y+=T,p.line++,j=p.x=$t(i,this.left+d,this.right-r[p.line])):w>0&&D+T>this.bottom&&(j=p.x=j+n[p.line].width+d,p.line++,D=p.y=$t(i,this.top+E+d,this.bottom-n[p.line].height));const P=c.x(j);if(S(P,D,k),j=uB(A,j+x+m,b?j+N:this.right,e.rtl),y(c.x(j),D,k),b)p.x+=N+d;else if(typeof k.text!="string"){const M=u.lineHeight;p.y+=wk(k,M)+d}else p.y+=T}),ek(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=yt(n.font),s=Xt(n.padding);if(!n.display)return;const i=ga(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=r.size/2,u=s.top+c;let d,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+u,f=$t(e.align,f,this.right-m);else{const x=this.columnSizes.reduce((_,v)=>Math.max(_,v.height),0);d=u+$t(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const p=$t(a,f,f+m);o.textAlign=i.textAlign(jv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,po(o,n.text,p,d,r)}_computeTitleHeight(){const e=this.options.title,n=yt(e.font),r=Xt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(sa(e,this.left,this.right)&&sa(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],sa(e,s.left,s.left+s.width)&&sa(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!pU(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=dU(s,r);s&&!i&&Fe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Fe(n.onHover,[e,r,this],this)}else r&&Fe(n.onClick,[e,r,this],this)}}function hU(t,e,n,r,s){const i=fU(r,t,e,n),o=mU(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function fU(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function mU(t,e,n){let r=t;return typeof e.text!="string"&&(r=wk(e,n)),r}function wk(t,e){const n=t.text?t.text.length:0;return e*n}function pU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Uv={id:"legend",_element:gE,start(t,e,n){const r=t.legend=new gE({ctx:t.ctx,options:n,chart:t});Vn.configure(t,r,n),Vn.addBox(t,r)},stop(t){Vn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Vn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=Xt(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bk extends is{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Ge(r.text)?r.text.length:1;this._padding=Xt(r.padding);const i=s*yt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let c=0,u,d,f;return this.isHorizontal()?(d=$t(a,r,i),f=n+e,u=i-r):(o.position==="left"?(d=r+e,f=$t(a,s,n),c=ht*-.5):(d=i-e,f=$t(a,n,s),c=ht*.5),u=s-n),{titleX:d,titleY:f,maxWidth:u,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=yt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:u}=this._drawArgs(i);po(e,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:jv(n.align),textBaseline:"middle",translation:[o,a]})}}function xU(t,e){const n=new bk({ctx:t.ctx,options:e,chart:t});Vn.configure(t,n,e),Vn.addBox(t,n),t.titleBlock=n}var zv={id:"title",_element:bk,start(t,e,n){xU(t,n)},stop(t){const e=t.titleBlock;Vn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Vn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ql={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const c=a.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Jx(e,u);d<s&&(s=d,a=c)}}if(a){const c=a.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function hr(t,e){return e&&(Ge(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Rr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function gU(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function yE(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,c=yt(e.bodyFont),u=yt(e.titleFont),d=yt(e.footerFont),f=i.length,m=s.length,p=r.length,x=Xt(e.padding);let _=x.height,v=0,S=r.reduce((E,T)=>E+T.before.length+T.lines.length+T.after.length,0);if(S+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),S){const E=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;_+=p*E+(S-p)*c.lineHeight+(S-1)*e.bodySpacing}m&&(_+=e.footerMarginTop+m*d.lineHeight+(m-1)*e.footerSpacing);let y=0;const b=function(E){v=Math.max(v,n.measureText(E).width+y)};return n.save(),n.font=u.string,je(t.title,b),n.font=c.string,je(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?o+2+e.boxPadding:0,je(r,E=>{je(E.before,b),je(E.lines,b),je(E.after,b)}),y=0,n.font=d.string,je(t.footer,b),n.restore(),v+=x.width,{width:v,height:_}}function yU(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function vU(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function wU(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:c}}=t;let u="center";return r==="center"?u=s<=(a+c)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),vU(u,t,e,n)&&(u="center"),u}function vE(t,e,n){const r=n.yAlign||e.yAlign||yU(t,n);return{xAlign:n.xAlign||e.xAlign||wU(t,e,n,r),yAlign:r}}function bU(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function _U(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function wE(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,u=s+i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:p}=xa(o);let x=bU(e,a);const _=_U(e,c,u);return c==="center"?a==="left"?x+=u:a==="right"&&(x-=u):a==="left"?x-=Math.max(d,m)+s:a==="right"&&(x+=Math.max(f,p)+s),{x:Ln(x,0,r.width-e.width),y:Ln(_,0,r.height-e.height)}}function Id(t,e,n){const r=Xt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function bE(t){return hr([],Rr(t))}function EU(t,e,n){return wi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function _E(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const _k={beforeTitle:Pr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Pr,beforeBody:Pr,beforeLabel:Pr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Pe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Pr,afterBody:Pr,beforeFooter:Pr,footer:Pr,afterFooter:Pr};function dn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?_k[e].call(n,r):s}class ig extends is{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new ik(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=EU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=dn(r,"beforeTitle",this,e),i=dn(r,"title",this,e),o=dn(r,"afterTitle",this,e);let a=[];return a=hr(a,Rr(s)),a=hr(a,Rr(i)),a=hr(a,Rr(o)),a}getBeforeBody(e,n){return bE(dn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return je(e,i=>{const o={before:[],lines:[],after:[]},a=_E(r,i);hr(o.before,Rr(dn(a,"beforeLabel",this,i))),hr(o.lines,dn(a,"label",this,i)),hr(o.after,Rr(dn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return bE(dn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=dn(r,"beforeFooter",this,e),i=dn(r,"footer",this,e),o=dn(r,"afterFooter",this,e);let a=[];return a=hr(a,Rr(s)),a=hr(a,Rr(i)),a=hr(a,Rr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],c,u;for(c=0,u=n.length;c<u;++c)a.push(gU(this.chart,n[c]));return e.filter&&(a=a.filter((d,f,m)=>e.filter(d,f,m,r))),e.itemSort&&(a=a.sort((d,f)=>e.itemSort(d,f,r))),je(a,d=>{const f=_E(e.callbacks,d);s.push(dn(f,"labelColor",this,d)),i.push(dn(f,"labelPointStyle",this,d)),o.push(dn(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=ql[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=yE(this,r),u=Object.assign({},a,c),d=vE(this.chart,r,u),f=wE(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=xa(a),{x:m,y:p}=e,{width:x,height:_}=n;let v,S,y,b,E,T;return i==="center"?(E=p+_/2,s==="left"?(v=m,S=v-o,b=E+o,T=E-o):(v=m+x,S=v+o,b=E-o,T=E+o),y=v):(s==="left"?S=m+Math.max(c,d)+o:s==="right"?S=m+x-Math.max(u,f)-o:S=this.caretX,i==="top"?(b=p,E=b-o,v=S-o,y=S+o):(b=p+_,E=b+o,v=S+o,y=S-o),T=b),{x1:v,x2:S,x3:y,y1:b,y2:E,y3:T}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,c;if(i){const u=ga(r.rtl,this.x,this.width);for(e.x=Id(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=yt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(s[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,d=yt(i.bodyFont),f=Id(this,"left",i),m=s.x(f),p=c<d.lineHeight?(d.lineHeight-c)/2:0,x=n.y+p;if(i.usePointStyle){const _={radius:Math.min(u,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(m,u)+u/2,S=x+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,eg(e,_,v,S),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,eg(e,_,v,S)}else{e.lineWidth=Ne(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(m,u),v=s.leftForLtr(s.xPlus(m,1),u-2),S=xa(o.borderRadius);Object.values(S).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,uf(e,{x:_,y:x,w:u,h:c,radius:S}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),uf(e,{x:v,y:x+1,w:u-2,h:c-2,radius:S}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(_,x,u,c),e.strokeRect(_,x,u,c),e.fillStyle=o.backgroundColor,e.fillRect(v,x+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:u,boxPadding:d}=r,f=yt(r.bodyFont);let m=f.lineHeight,p=0;const x=ga(r.rtl,this.x,this.width),_=function(g){n.fillText(g,x.x(e.x+p),e.y+m/2),e.y+=m+i},v=x.textAlign(o);let S,y,b,E,T,k,w;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Id(this,v,r),n.fillStyle=r.bodyColor,je(this.beforeBody,_),p=a&&v!=="right"?o==="center"?u/2+d:u+2+d:0,E=0,k=s.length;E<k;++E){for(S=s[E],y=this.labelTextColors[E],n.fillStyle=y,je(S.before,_),b=S.lines,a&&b.length&&(this._drawColorBox(n,e,E,x,r),m=Math.max(f.lineHeight,c)),T=0,w=b.length;T<w;++T)_(b[T]),m=f.lineHeight;je(S.after,_)}p=0,m=f.lineHeight,je(this.afterBody,_),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const c=ga(r.rtl,this.x,this.width);for(e.x=Id(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=yt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:c}=e,{width:u,height:d}=r,{topLeft:f,topRight:m,bottomLeft:p,bottomRight:x}=xa(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,c),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+u-m,c),n.quadraticCurveTo(a+u,c,a+u,c+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+u,c+d-x),n.quadraticCurveTo(a+u,c+d,a+u-x,c+d),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+p,c+d),n.quadraticCurveTo(a,c+d,a,c+d-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,c+f),n.quadraticCurveTo(a,c,a+f,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=ql[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=yE(this,e),c=Object.assign({},o,this._size),u=vE(n,e,c),d=wE(e,c,u,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Xt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),ZT(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),ek(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:c})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[c],index:c}}),i=!rf(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),c=n||!rf(o,i)||a;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=ql[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}ce(ig,"positioners",ql);var $v={id:"tooltip",_element:ig,positioners:ql,afterInit(t,e,n){n&&(t.tooltip=new ig({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:_k},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const CU=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function SU(t,e,n,r){const s=t.indexOf(e);if(s===-1)return CU(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const NU=(t,e)=>t===null?null:Ln(Math.round(t),0,e);function EE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yc extends Ao{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Pe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:SU(r,e,we(n,e),this._addedLabels),NU(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return EE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ce(Yc,"id","category"),ce(Yc,"defaults",{ticks:{callback:EE}});function AU(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:m}=t,p=i||1,x=d-1,{min:_,max:v}=e,S=!Pe(o),y=!Pe(a),b=!Pe(u),E=(v-_)/(f+1);let T=C2((v-_)/x/p)*p,k,w,g,A;if(T<1e-14&&!S&&!y)return[{value:_},{value:v}];A=Math.ceil(v/T)-Math.floor(_/T),A>x&&(T=C2(A*T/x/p)*p),Pe(c)||(k=Math.pow(10,c),T=Math.ceil(T*k)/k),s==="ticks"?(w=Math.floor(_/T)*T,g=Math.ceil(v/T)*T):(w=_,g=v),S&&y&&i&&tB((a-o)/i,T/1e3)?(A=Math.round(Math.min((a-o)/T,d)),T=(a-o)/A,w=o,g=a):b?(w=S?o:w,g=y?a:g,A=u-1,T=(g-w)/A):(A=(g-w)/T,cc(A,Math.round(A),T/1e3)?A=Math.round(A):A=Math.ceil(A));const N=Math.max(S2(T),S2(w));k=Math.pow(10,Pe(c)?N:c),w=Math.round(w*k)/k,g=Math.round(g*k)/k;let j=0;for(S&&(m&&w!==o?(n.push({value:o}),w<o&&j++,cc(Math.round((w+j*T)*k)/k,o,CE(o,E,t))&&j++):w<o&&j++);j<A;++j){const D=Math.round((w+j*T)*k)/k;if(y&&D>a)break;n.push({value:D})}return y&&m&&g!==a?n.length&&cc(n[n.length-1].value,a,CE(a,E,t))?n[n.length-1].value=a:n.push({value:a}):(!y||g===a)&&n.push({value:g}),n}function CE(t,e,{horizontal:n,minRotation:r}){const s=zs(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class ff extends Ao{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Pe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=n?s:c,a=c=>i=r?i:c;if(e){const c=Fa(s),u=Fa(i);c<0&&u<0?a(0):c>0&&u>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);a(i+c),e||o(s-c)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=AU(s,i);return e.bounds==="ticks"&&VT(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Dv(e,this.chart.options.locale,this.options.ticks.format)}}class Qc extends ff{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=tt(e)?e:0,this.max=tt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=zs(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ce(Qc,"id","linear"),ce(Qc,"defaults",{ticks:{callback:u0.formatters.numeric}});const Xc=t=>Math.floor(Us(t)),Di=(t,e)=>Math.pow(10,Xc(t)+e);function SE(t){return t/Math.pow(10,Xc(t))===1}function NE(t,e,n){const r=Math.pow(10,n),s=Math.floor(t/r);return Math.ceil(e/r)-s}function TU(t,e){const n=e-t;let r=Xc(n);for(;NE(t,e,r)>10;)r++;for(;NE(t,e,r)<10;)r--;return Math.min(r,Xc(t))}function kU(t,{min:e,max:n}){e=_n(t.min,e);const r=[],s=Xc(e);let i=TU(e,n),o=i<0?Math.pow(10,Math.abs(i)):1;const a=Math.pow(10,i),c=s>i?Math.pow(10,s):0,u=Math.round((e-c)*o)/o,d=Math.floor((e-c)/a/10)*a*10;let f=Math.floor((u-d)/Math.pow(10,i)),m=_n(t.min,Math.round((c+d+f*Math.pow(10,i))*o)/o);for(;m<n;)r.push({value:m,major:SE(m),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(i++,f=2,o=i>=0?1:o),m=Math.round((c+d+f*Math.pow(10,i))*o)/o;const p=_n(t.max,m);return r.push({value:p,major:SE(p),significand:f}),r}class AE extends Ao{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ff.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return tt(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=tt(e)?Math.max(0,e):null,this.max=tt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!tt(this._userMin)&&(this.min=e===Di(this.min,0)?Di(this.min,-1):Di(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,s=this.max;const i=a=>r=e?r:a,o=a=>s=n?s:a;r===s&&(r<=0?(i(1),o(10)):(i(Di(r,-1)),o(Di(s,1)))),r<=0&&i(Di(s,-1)),s<=0&&o(Di(r,1)),this.min=r,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=kU(n,this);return e.bounds==="ticks"&&VT(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Dv(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Us(e),this._valueRange=Us(this.max)-Us(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Us(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}ce(AE,"id","logarithmic"),ce(AE,"defaults",{ticks:{callback:u0.formatters.logarithmic,major:{enabled:!0}}});function og(t){const e=t.ticks;if(e.display&&t.display){const n=Xt(e.backdropPadding);return we(e.font&&e.font.size,nt.font.size)+n.height}return 0}function IU(t,e,n){return n=Ge(n)?n:[n],{w:_B(t,e.string,n),h:n.length*e.lineHeight}}function TE(t,e,n,r,s){return t===r||t===s?{start:e-n/2,end:e+n/2}:t<r||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function jU(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],s=[],i=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ht/i:0;for(let c=0;c<i;c++){const u=o.setContext(t.getPointLabelContext(c));s[c]=u.padding;const d=t.getPointPosition(c,t.drawingArea+s[c],a),f=yt(u.font),m=IU(t.ctx,f,t._pointLabels[c]);r[c]=m;const p=Cn(t.getIndexAngle(c)+a),x=Math.round(kv(p)),_=TE(x,d.x,m.w,0,180),v=TE(x,d.y,m.h,90,270);PU(n,e,p,_,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=MU(t,r,s)}function PU(t,e,n,r,s){const i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;r.start<e.l?(a=(e.l-r.start)/i,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/i,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(c=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-c)):s.end>e.b&&(c=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function DU(t,e,n){const r=t.drawingArea,{extra:s,additionalAngle:i,padding:o,size:a}=n,c=t.getPointPosition(e,r+s+o,i),u=Math.round(kv(Cn(c.angle+An))),d=BU(c.y,a.h,u),f=OU(u),m=FU(c.x,a.w,f);return{visible:!0,x:c.x,y:d,textAlign:f,left:m,top:d,right:m+a.w,bottom:d+a.h}}function RU(t,e){if(!e)return!0;const{left:n,top:r,right:s,bottom:i}=t;return!(Wr({x:n,y:r},e)||Wr({x:n,y:i},e)||Wr({x:s,y:r},e)||Wr({x:s,y:i},e))}function MU(t,e,n){const r=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:a}=i.pointLabels,c={extra:og(i)/2,additionalAngle:o?ht/s:0};let u;for(let d=0;d<s;d++){c.padding=n[d],c.size=e[d];const f=DU(t,d,c);r.push(f),a==="auto"&&(f.visible=RU(f,u),f.visible&&(u=f))}return r}function OU(t){return t===0||t===180?"center":t<180?"left":"right"}function FU(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function BU(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function LU(t,e,n){const{left:r,top:s,right:i,bottom:o}=n,{backdropColor:a}=e;if(!Pe(a)){const c=xa(e.borderRadius),u=Xt(e.backdropPadding);t.fillStyle=a;const d=r-u.left,f=s-u.top,m=i-r+u.width,p=o-s+u.height;Object.values(c).some(x=>x!==0)?(t.beginPath(),uf(t,{x:d,y:f,w:m,h:p,radius:c}),t.fill()):t.fillRect(d,f,m,p)}}function VU(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const o=r.setContext(t.getPointLabelContext(s));LU(n,o,i);const a=yt(o.font),{x:c,y:u,textAlign:d}=i;po(n,t._pointLabels[s],c,u+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function Ek(t,e,n,r){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,In);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=t.getPointPosition(o,e),s.lineTo(i.x,i.y)}}function UU(t,e,n,r,s){const i=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||n<0||(i.save(),i.strokeStyle=a,i.lineWidth=c,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),Ek(t,n,o,r),i.closePath(),i.stroke(),i.restore())}function zU(t,e,n){return wi(t,{label:n,index:e,type:"pointLabel"})}class jd extends ff{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Xt(og(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=tt(e)&&!isNaN(e)?e:0,this.max=tt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/og(this.options))}generateTickLabels(e){ff.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const s=Fe(this.options.pointLabels.callback,[n,r],this);return s||s===0?s:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?jU(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,s))}getIndexAngle(e){const n=In/(this._pointLabels.length||1),r=this.options.startAngle||0;return Cn(e*n+zs(r))}getDistanceFromCenterForValue(e){if(Pe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Pe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return zU(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const s=this.getIndexAngle(e)-An+r;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:s,bottom:i}=this._pointLabelItems[e];return{left:n,top:r,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),Ek(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:s,border:i}=n,o=this._pointLabels.length;let a,c,u;if(n.pointLabels.display&&VU(this,o),s.display&&this.ticks.forEach((d,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const m=this.getContext(f),p=s.setContext(m),x=i.setContext(m);UU(this,p,c,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:m}=d;!m||!f||(e.lineWidth=m,e.strokeStyle=f,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),u=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!n.reverse)return;const u=r.setContext(this.getContext(c)),d=yt(u.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const f=Xt(u.backdropPadding);e.fillRect(-o/2-f.left,-i-d.size/2-f.top,o+f.width,d.size+f.height)}po(e,a.label,0,-i,d,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}ce(jd,"id","radialLinear"),ce(jd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:u0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ce(jd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ce(jd,"descriptors",{angleLines:{_fallback:"grid"}});const p0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mn=Object.keys(p0);function kE(t,e){return t-e}function IE(t,e){if(Pe(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),tt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Gc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function jE(t,e,n,r){const s=mn.length;for(let i=mn.indexOf(t);i<s-1;++i){const o=p0[mn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return mn[i]}return mn[s-1]}function $U(t,e,n,r,s){for(let i=mn.length-1;i>=mn.indexOf(n);i--){const o=mn[i];if(p0[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return mn[n?mn.indexOf(n):0]}function HU(t){for(let e=mn.indexOf(t)+1,n=mn.length;e<n;++e)if(p0[mn[e]].common)return mn[e]}function PE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Iv(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function WU(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,c;for(a=i;a<=o;a=+s.add(a,1,r))c=n[a],c>=0&&(e[c].major=!0);return e}function DE(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:WU(t,r,s,n)}class mf extends Ao{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new TL._date(e.adapters.date);s.init(n),lc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:IE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=tt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=tt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=oB(s,i,o);return this._unit=n.unit||(r.autoSkip?jE(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):$U(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:HU(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),DE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ln(n,0,o),r=Ln(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||jE(i.minUnit,n,r,this._getLabelCapacity(n)),a=we(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Gc(c)||c===!0,d={};let f=n,m,p;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,p=0;m<r;m=+e.add(m,a,o),p++)PE(d,m,x);return(m===r||s.bounds==="ticks"||p===1)&&PE(d,m,x),Object.keys(d).sort(kE).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Fe(o,[e,n,r],this);const a=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&a[c],f=u&&a[u],m=r[n],p=u&&f&&m&&m.major;return this._adapter.format(e,s||(p?f:d))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=zs(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,DE(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(IE(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lB(e.sort(kE))}}ce(mf,"id","time"),ce(mf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Pd(t,e,n){let r=0,s=t.length-1,i,o,a,c;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=qi(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:c}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=qi(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:c}=t[s]);const u=o-i;return u?a+(c-a)*(e-i)/u:a}class RE extends mf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Pd(n,this.min),this._tableRange=Pd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,c,u,d;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],c=s[o-1],u=s[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Pd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Pd(this._table,r*this._tableRange+this._minPos,!0)}}ce(RE,"id","timeseries"),ce(RE,"defaults",mf.defaults);const Ck="label";function ME(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function qU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Sk(t,e){t.labels=e}function Nk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ck;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function GU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ck;const n={labels:[],datasets:[]};return Sk(n,t.labels),Nk(n,t.datasets,e),n}function KU(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...m}=t,p=O.useRef(null),x=O.useRef(null),_=()=>{p.current&&(x.current=new Ja(p.current,{type:o,data:GU(a,i),options:c&&{...c},plugins:u}),ME(e,x.current))},v=()=>{ME(e,null),x.current&&(x.current.destroy(),x.current=null)};return O.useEffect(()=>{!s&&x.current&&c&&qU(x.current,c)},[s,c]),O.useEffect(()=>{!s&&x.current&&Sk(x.current.config.data,a.labels)},[s,a.labels]),O.useEffect(()=>{!s&&x.current&&a.datasets&&Nk(x.current.config.data,a.datasets,i)},[s,a.datasets]),O.useEffect(()=>{x.current&&(s?(v(),setTimeout(_)):x.current.update(f))},[s,c,a.labels,a.datasets,f]),O.useEffect(()=>{x.current&&(v(),setTimeout(_))},[o]),O.useEffect(()=>(_(),()=>v()),[]),nu.createElement("canvas",{ref:p,role:"img",height:n,width:r,...m},d)}const YU=O.forwardRef(KU);function QU(t,e){return Ja.register(e),O.forwardRef((n,r)=>nu.createElement(YU,{...n,ref:r,type:t}))}const Hv=QU("line",sh);Ja.register(Yc,Qc,ya,xr,zv,$v,Uv,Vv);const Ak=({data:t,title:e="Performance Over Time",height:n=400})=>{const[r,s]=O.useState(""),[i,o]=O.useState(!1),{chartData:a,projectionData:c}=O.useMemo(()=>{var k,w;if(!t||t.length===0)return{chartData:null,projectionData:null};const d=t.map(g=>g.growthPercentage||0).filter(g=>!isNaN(g)),f=d.length>0?d.reduce((g,A)=>g+A,0)/d.length:0,m=t.map(g=>g.deposit||0).filter(g=>!isNaN(g)),p=m.length>0?m.reduce((g,A)=>g+A,0)/m.length:0,x=t[t.length-1];if(!x||typeof x.balance!="number")return{chartData:null,projectionData:null};const _=[];let v=x.balance;for(let g=1;g<=12;g++)v=v*(1+f/100),v+=p,_.push({date:`Projected ${g}`,balance:v,isProjection:!0});const S=[];if(i&&r&&!isNaN(parseFloat(r))){let g=x.balance;const A=parseFloat(r);for(let N=1;N<=12;N++)g=g*(1+f/100),g+=A,S.push({date:`Projected ${N}`,balance:g,isCustomProjection:!0})}const y=t.map(g=>({...g,isProjection:!1})),b=[...y,..._],E={labels:b.map(g=>g.date),datasets:[{label:"Actual Performance",data:y.map(g=>g.balance),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointRadius:6,pointHoverRadius:8,pointBackgroundColor:"#3b82f6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointHoverBackgroundColor:"#3b82f6",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:3},{label:"1-Year Projection",data:b.map(g=>g.isProjection?g.balance:null),borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:2,borderDash:[5,5],fill:!1,tension:.4,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#22c55e",pointBorderColor:"#ffffff",pointBorderWidth:2,pointHoverBackgroundColor:"#22c55e",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:3},...i&&S.length>0?[{label:`Custom Projection (€${r}/month)`,data:[...y.map(()=>null),..._.map((g,A)=>{var N;return((N=S[A])==null?void 0:N.balance)||null})],borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",borderWidth:2,borderDash:[3,3],fill:!1,tension:.4,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#f59e0b",pointBorderColor:"#ffffff",pointBorderWidth:2,pointHoverBackgroundColor:"#f59e0b",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:3}]:[]]},T={avgGrowthRate:f,projectedBalance:(k=_[_.length-1])==null?void 0:k.balance,customProjectedBalance:S.length>0?(w=S[S.length-1])==null?void 0:w.balance:null};return{chartData:E,projectionData:T}},[t,r,i]),u=O.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"600"}},onClick:(d,f,m)=>{const p=f.index,x=m.chart,_=x.getDatasetMeta(p);_.hidden=!_.hidden,x.update()}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#1f2937",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!0,padding:12,titleFont:{size:14,weight:"600"},bodyFont:{size:13},callbacks:{title:d=>d[0].label,label:d=>{const f=d.dataset.label||"",m=d.parsed.y;return`${f}: ${new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(m)}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:11,weight:"500"},maxRotation:45,minRotation:45},border:{display:!1}},y:{grid:{color:"#f3f4f6",drawBorder:!1},ticks:{color:"#6b7280",font:{size:11,weight:"500"},callback:d=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)},border:{display:!1}}},interaction:{intersect:!1,mode:"index"},elements:{point:{hoverRadius:8}}}),[]);return a?l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),c&&l.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[l.jsxs("span",{children:["Avg Growth Rate: ",c.avgGrowthRate.toFixed(2),"%"]}),l.jsx("span",{children:"•"}),l.jsxs("span",{children:["Projected: ",new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(c.projectedBalance)]}),i&&c.customProjectedBalance&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"•"}),l.jsxs("span",{className:"text-orange-600 font-medium",children:["Custom: ",new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(c.customProjectedBalance)]}),l.jsx("span",{children:"•"}),l.jsxs("span",{className:`font-medium ${c.customProjectedBalance>c.projectedBalance?"text-green-600":"text-red-600"}`,children:["Diff: ",new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(c.customProjectedBalance-c.projectedBalance)]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Custom Monthly Deposit:"}),l.jsx("input",{type:"number",value:r,onChange:d=>s(d.target.value),placeholder:"500",className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.01"}),l.jsx("span",{className:"text-sm text-gray-600",children:"€"})]}),l.jsxs("button",{onClick:()=>o(!i),className:`px-3 py-1 text-xs rounded transition-colors ${i?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:!r||isNaN(parseFloat(r)),children:[i?"Hide":"Show"," Projection"]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{style:{height:`${n}px`},children:l.jsx(Hv,{data:a,options:u})})})]}):l.jsx("div",{className:"flex items-center justify-center h-80 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Loading chart..."})]})})},XU=({message:t="Loading..."})=>l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:t})]})}),JU=()=>{const[t,e]=O.useState(!0),{investmentData:n,investors:r,calculateTotalPerformance:s,calculateInvestorPerformance:i}=Xa();O.useEffect(()=>{const x=setTimeout(()=>{e(!1)},1e3);return()=>clearTimeout(x)},[n,r]);const o=s(),a=r.reduce((x,_)=>x+_.investmentAmount,0);r.reduce((x,_)=>{const v=i(_.id);return x+(v?v.totalGrowthAmount:0)},0);const c=()=>{if(n.performance.length===0)return null;const x=new Date().getFullYear(),_=new Date().getMonth()+1;return n.performance.find(S=>S.year===x&&S.month===_)||n.performance[n.performance.length-1]},u=O.useMemo(()=>{if(n.performance.length===0)return[];let x=n.startingBalance;const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return n.performance.map(v=>(x+=(v.growthAmount||0)+(v.deposit||0)-(v.withdrawal||0),{date:`${_[v.month-1]} ${v.year}`,balance:x,growth:v.growthAmount||0,growthPercentage:v.growthPercentage||0,deposit:v.deposit||0,withdrawal:v.withdrawal||0}))},[n.performance,n.startingBalance]),d=x=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(x),f=x=>`${x.toFixed(2)}%`,m=x=>x>=0?"text-success-600":"text-danger-600",p=x=>x>=0?l.jsx(IT,{className:"h-5 w-5 text-success-600"}):l.jsx(TT,{className:"h-5 w-5 text-danger-600"});return t?l.jsx(XU,{message:"Loading dashboard..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-gray-600",children:"Overview of your investment portfolio and investor performance"})]}),l.jsxs(se,{to:"/",className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[l.jsx(Ev,{className:"h-4 w-4"}),l.jsx("span",{children:"Return to Main Page"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:l.jsx(Ma,{className:"h-5 w-5 text-primary-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Starting Balance"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(n.startingBalance)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center",children:l.jsx(gt,{className:"h-5 w-5 text-success-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Growth"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(o?o.totalGrowthAmount:0)}),o&&l.jsxs("div",{className:"flex items-center mt-1",children:[p(o.totalNetPercentage),l.jsx("span",{className:`text-sm font-medium ml-1 ${m(o.totalNetPercentage)}`,children:f(o.totalNetPercentage)})]})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center",children:l.jsx(fo,{className:"h-5 w-5 text-warning-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Investors"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[d(a)," invested"]})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center",children:l.jsx(gt,{className:"h-5 w-5 text-success-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Deposits"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(o?o.totalDeposits:0)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-danger-100 rounded-lg flex items-center justify-center",children:l.jsx(gt,{className:"h-5 w-5 text-danger-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Withdrawals"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(o?o.totalWithdrawals:0)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:l.jsx(PT,{className:"h-5 w-5 text-primary-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Current Monthly Growth"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(()=>{const x=c();return x?f(x.growthPercentage):"0.00%"})()}),l.jsx("p",{className:"text-sm text-gray-500",children:(()=>{const x=c();return d(x?x.growthAmount:0)})()})]})]})})]}),o&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Summary"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Current Balance"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:d(o.currentBalance)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Net Profit"}),l.jsx("p",{className:`text-xl font-bold ${m(o.totalNetPercentage)}`,children:d(o.totalGrowthAmount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Net Percentage"}),l.jsx("p",{className:`text-xl font-bold ${m(o.totalNetPercentage)}`,children:f(o.totalNetPercentage)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Performance Entries"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:n.performance.length})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Performance Entries"})}),n.performance.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth %"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.performance.slice(-5).reverse().map(x=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.month,"/",x.year]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(x.growthAmount)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(x.growthPercentage)})]},x.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No performance entries yet. Add your first entry in the Investment Performance section."})]}),l.jsx(Ak,{data:u,title:"Performance Over Time",height:400})]})},ZU=()=>{const{isViewer:t}=ls(),{investmentData:e,updateStartingBalance:n,addPerformanceEntry:r,updatePerformanceEntry:s,deletePerformanceEntry:i,calculateTotalPerformance:o}=Xa(),[a,c]=O.useState(!1),[u,d]=O.useState(!1),[f,m]=O.useState(null),[p,x]=O.useState(!1),[_,v]=O.useState(!1),[S,y]=O.useState(null),[b,E]=O.useState({startingBalance:e.startingBalance,year:new Date().getFullYear(),month:new Date().getMonth()+1,growthAmount:"",growthPercentage:"",deposit:"",withdrawal:""}),T=o(),k=M=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(M),w=M=>`${M.toFixed(2)}%`,g=M=>M>=0?"text-success-600":"text-danger-600",A=async M=>{if(M.preventDefault(),!b.growthAmount||!b.growthPercentage){alert("Please fill in all required fields (Growth Amount and Growth Percentage)");return}if(isNaN(parseFloat(b.growthAmount))||isNaN(parseFloat(b.growthPercentage))){alert("Please enter valid numeric values for Growth Amount and Growth Percentage");return}if(!b.year||!b.month){alert("Please select a valid year and month");return}x(!0);try{if(f){const $={year:parseInt(b.year),month:parseInt(b.month),growthAmount:parseFloat(b.growthAmount),growthPercentage:parseFloat(b.growthPercentage),deposit:parseFloat(b.deposit)||0,withdrawal:parseFloat(b.withdrawal)||0};console.log("Updating performance entry with data:",$),await s(f.id,$),m(null)}else console.log("Adding performance entry with data:",b),await r(b);E({startingBalance:e.startingBalance,year:new Date().getFullYear(),month:new Date().getMonth()+1,growthAmount:"",growthPercentage:"",deposit:"",withdrawal:""}),d(!1)}catch($){console.error("Error saving performance entry:",$),alert("Failed to save performance entry. Please try again.")}finally{x(!1)}},N=M=>{m(M),E({startingBalance:e.startingBalance,year:M.year,month:M.month,growthAmount:M.growthAmount.toString(),growthPercentage:M.growthPercentage.toString(),deposit:(M.deposit||0).toString(),withdrawal:(M.withdrawal||0).toString()}),d(!0)},j=async M=>{if(window.confirm("Are you sure you want to delete this performance entry?")){y(M);try{await i(M)}catch($){console.error("Error deleting performance entry:",$),alert("Failed to delete performance entry. Please try again.")}finally{y(null)}}},D=async M=>{M.preventDefault(),v(!0);try{await n(parseFloat(b.startingBalance)),c(!1)}catch($){console.error("Error updating starting balance:",$),alert("Failed to update starting balance. Please try again.")}finally{v(!1)}},P=["January","February","March","April","May","June","July","August","September","October","November","December"];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Investment Performance"}),l.jsx("p",{className:"text-gray-600",children:"Track and manage your investment growth over time"})]}),!t()&&l.jsxs("button",{onClick:()=>d(!0),className:"btn-primary flex items-center",children:[l.jsx(l0,{className:"h-4 w-4 mr-2"}),"Add Entry"]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ma,{className:"h-6 w-6 text-primary-600 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Starting Balance"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k(e.startingBalance)})]})]}),!t()&&l.jsx("button",{onClick:()=>c(!a),className:"btn-secondary text-xs px-2 py-1",children:a?"Cancel":"Edit"})]}),a&&l.jsxs("form",{onSubmit:D,className:"mt-4 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Starting Balance (€)"}),l.jsx("input",{type:"number",step:"0.01",value:b.startingBalance,onChange:M=>E({...b,startingBalance:M.target.value}),className:"input-field mt-1",required:!0})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{type:"submit",className:"btn-success text-sm px-3 py-1 flex items-center",disabled:_,children:_?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save"}),l.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary text-sm px-3 py-1",disabled:_,children:"Cancel"})]})]})]}),T&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(gt,{className:"h-8 w-8 text-success-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Growth"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(T.totalGrowthAmount)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(gt,{className:"h-8 w-8 text-success-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Deposits"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(T.totalDeposits)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(gt,{className:"h-8 w-8 text-danger-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Withdrawals"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(T.totalWithdrawals)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(PT,{className:"h-8 w-8 text-primary-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Net %"}),l.jsx("p",{className:`text-xl font-bold ${g(T.totalNetPercentage)}`,children:w(T.totalNetPercentage)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(gt,{className:"h-8 w-8 text-warning-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Avg. Return"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:w(T.averageGrowthPercentage)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ma,{className:"h-8 w-8 text-primary-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Current Balance"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(T.currentBalance)})]})]})})]}),u&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f?"Edit Performance Entry":"Add Performance Entry"})}),l.jsxs("form",{onSubmit:A,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),l.jsx("input",{type:"number",value:b.year,onChange:M=>E({...b,year:M.target.value}),className:"input-field mt-1",min:"2000",max:"2100",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Month"}),l.jsx("select",{value:b.month,onChange:M=>E({...b,month:M.target.value}),className:"input-field mt-1",required:!0,children:P.map((M,$)=>l.jsx("option",{value:$+1,children:M},$+1))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Growth Amount (€)"}),l.jsx("input",{type:"number",step:"0.01",value:b.growthAmount,onChange:M=>E({...b,growthAmount:M.target.value}),className:"input-field mt-1",placeholder:"Enter growth amount",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Growth Percentage (%)"}),l.jsx("input",{type:"number",step:"0.01",value:b.growthPercentage,onChange:M=>E({...b,growthPercentage:M.target.value}),className:"input-field mt-1",placeholder:"Enter growth percentage",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deposit (€)"}),l.jsx("input",{type:"number",step:"0.01",value:b.deposit,onChange:M=>E({...b,deposit:M.target.value}),className:"input-field mt-1",placeholder:"Enter deposit amount (optional)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Withdrawal (€)"}),l.jsx("input",{type:"number",step:"0.01",value:b.withdrawal,onChange:M=>E({...b,withdrawal:M.target.value}),className:"input-field mt-1",placeholder:"Enter withdrawal amount (optional)"})]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"submit",className:"btn-success flex items-center",disabled:p,children:p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),f?"Updating...":"Adding..."]}):f?"Update Entry":"Add Entry"}),l.jsx("button",{type:"button",onClick:()=>{d(!1),m(null)},className:"btn-secondary",disabled:p,children:"Cancel"})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Entries"})}),e.performance.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth %"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deposit"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Withdrawal"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.performance.map(M=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ji,{className:"h-4 w-4 text-gray-400 mr-2"}),P[M.month-1]," ",M.year]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k(M.growthAmount)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(M.growthPercentage)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.deposit>0?k(M.deposit):"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.withdrawal>0?k(M.withdrawal):"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:!t()&&l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>N(M),className:"text-primary-600 hover:text-primary-900",children:l.jsx(Cv,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>j(M.id),className:"text-danger-600 hover:text-danger-900",disabled:S===M.id,children:S===M.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(Hc,{className:"h-4 w-4"})})]})})]},M.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No performance entries yet. Add your first entry to start tracking your investment growth."})]})]})},ez=()=>{const{isViewer:t,isInvestor:e}=ls(),{investors:n,addInvestor:r,updateInvestor:s,deleteInvestor:i,addInvestorPerformance:o,calculateInvestorPerformance:a}=Xa(),[c,u]=O.useState(!1),[d,f]=O.useState(null),[m,p]=O.useState(null),[x,_]=O.useState(!1),[v,S]=O.useState({name:"",email:"",phone:"",investmentAmount:"",initiationDate:new Date().toISOString().split("T")[0],username:"",password:""}),[y,b]=O.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,growthAmount:"",growthPercentage:"",deposit:"",withdrawal:""}),E=M=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(M),T=M=>M==null?"0.00%":`${M.toFixed(2)}%`,k=M=>M>=0?"text-success-600":"text-danger-600",w=M=>{if(M.preventDefault(),!v.name||!v.email||!v.investmentAmount){alert("Please fill in all required fields (Name, Email, and Investment Amount)");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.email)){alert("Please enter a valid email address");return}if(isNaN(parseFloat(v.investmentAmount))||parseFloat(v.investmentAmount)<=0){alert("Please enter a valid investment amount (greater than 0)");return}if(v.phone&&!/^[\+]?[0-9\s\-\(\)]+$/.test(v.phone)){alert("Please enter a valid phone number");return}d?(console.log("Updating investor with data:",{name:v.name,email:v.email,phone:v.phone,investmentAmount:parseFloat(v.investmentAmount),initiationDate:v.initiationDate,username:v.username,password:v.password}),s(d.id,{name:v.name,email:v.email,phone:v.phone,investmentAmount:parseFloat(v.investmentAmount),initiationDate:v.initiationDate,username:v.username,password:v.password}),f(null)):r(v),S({name:"",email:"",phone:"",investmentAmount:"",initiationDate:new Date().toISOString().split("T")[0],username:"",password:""}),u(!1)},g=M=>{M.preventDefault(),o(m.id,y),b({year:new Date().getFullYear(),month:new Date().getMonth()+1,growthAmount:"",growthPercentage:"",deposit:"",withdrawal:""}),_(!1)},A=M=>{f(M),S({name:M.name,email:M.email,phone:M.phone,investmentAmount:M.investmentAmount.toString(),initiationDate:M.initiationDate||new Date().toISOString().split("T")[0],username:M.username||"",password:M.password||""}),u(!0)},N=M=>{window.confirm("Are you sure you want to delete this investor?")&&i(M)},j=["January","February","March","April","May","June","July","August","September","October","November","December"],D=n.reduce((M,$)=>M+$.investmentAmount,0),P=n.reduce((M,$)=>{const G=a($.id);return M+(G?G.totalGrowthAmount:0)},0);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Investors"}),l.jsx("p",{className:"text-gray-600",children:"Manage your investors and track their performance"})]}),!t()&&!e()&&l.jsxs("button",{onClick:()=>u(!0),className:"btn-primary flex items-center",children:[l.jsx(l0,{className:"h-4 w-4 mr-2"}),"Add Investor"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(fo,{className:"h-8 w-8 text-primary-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Investors"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ma,{className:"h-8 w-8 text-success-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Invested"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E(D)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(gt,{className:"h-8 w-8 text-warning-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Growth"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E(P)})]})]})})]}),c&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d?"Edit Investor":"Add New Investor"})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),l.jsx("input",{type:"text",value:v.name,onChange:M=>S({...v,name:M.target.value}),className:"input-field mt-1",placeholder:"Enter investor name",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),l.jsx("input",{type:"email",value:v.email,onChange:M=>S({...v,email:M.target.value}),className:"input-field mt-1",placeholder:"Enter email address",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),l.jsx("input",{type:"tel",value:v.phone,onChange:M=>S({...v,phone:M.target.value}),className:"input-field mt-1",placeholder:"Enter phone number",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Investment Amount (€)"}),l.jsx("input",{type:"number",step:"0.01",value:v.investmentAmount,onChange:M=>S({...v,investmentAmount:M.target.value}),className:"input-field mt-1",placeholder:"Enter investment amount",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Initiation Date"}),l.jsx("input",{type:"date",value:v.initiationDate,onChange:M=>S({...v,initiationDate:M.target.value}),className:"input-field mt-1",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),l.jsx("input",{type:"text",value:v.username,onChange:M=>S({...v,username:M.target.value}),className:"input-field mt-1",placeholder:"Auto-generated if empty"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),l.jsx("input",{type:"text",value:v.password,onChange:M=>S({...v,password:M.target.value}),className:"input-field mt-1",placeholder:"Auto-generated if empty"})]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"submit",className:"btn-success",children:d?"Update Investor":"Add Investor"}),l.jsx("button",{type:"button",onClick:()=>{u(!1),f(null)},className:"btn-secondary",children:"Cancel"})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Investors List"})}),n.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investor"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((M,$)=>{const G=a(M.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:l.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-primary-100 flex items-center justify-center",children:M.profilePicture?l.jsx("img",{src:M.profilePicture,alt:`${M.name}'s profile`,className:"w-full h-full object-cover"}):l.jsx(ci,{className:"h-5 w-5 text-primary-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.name}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Initiated: ",M.initiationDate?new Date(M.initiationDate).toLocaleDateString():"Not set"]}),l.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Login: ",M.username," / ",M.password]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm text-gray-900",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ss,{className:"h-4 w-4 text-gray-400 mr-2"}),M.email]}),l.jsxs("div",{className:"flex items-center mt-1",children:[l.jsx(_u,{className:"h-4 w-4 text-gray-400 mr-2"}),M.phone]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm text-gray-900",children:[l.jsx("div",{className:"font-medium",children:E(M.investmentAmount)}),l.jsx("div",{className:"text-gray-500",children:"Initial investment"})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G?l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:`font-medium ${k(G.totalNetPercentage)}`,children:E(G.currentAmount)}),l.jsx("div",{className:`text-gray-500 ${k(G.totalNetPercentage)}`,children:T(G.totalNetPercentage)})]}):l.jsx("div",{className:"text-sm text-gray-500",children:"No performance data"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:!t()&&!e()&&l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>{p(M),_(!0)},className:"text-primary-600 hover:text-primary-900",title:"Add Performance",children:l.jsx(gt,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>A(M),className:"text-primary-600 hover:text-primary-900",title:"Edit Investor",children:l.jsx(Cv,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>N(M.id),className:"text-danger-600 hover:text-danger-900",title:"Delete Investor",children:l.jsx(Hc,{className:"h-4 w-4"})})]})})]},`${M.id}-${$}`)})})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No investors yet. Add your first investor to start tracking their performance."})]}),x&&m&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Add Performance for ",m.name]})}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),l.jsx("input",{type:"number",value:y.year,onChange:M=>b({...y,year:M.target.value}),className:"input-field mt-1",min:"2000",max:"2100",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Month"}),l.jsx("select",{value:y.month,onChange:M=>b({...y,month:M.target.value}),className:"input-field mt-1",required:!0,children:j.map((M,$)=>l.jsx("option",{value:$+1,children:M},$+1))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Growth Amount (€)"}),l.jsx("input",{type:"number",step:"0.01",value:y.growthAmount,onChange:M=>b({...y,growthAmount:M.target.value}),className:"input-field mt-1",placeholder:"Enter growth amount",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Growth Percentage (%)"}),l.jsx("input",{type:"number",step:"0.01",value:y.growthPercentage,onChange:M=>b({...y,growthPercentage:M.target.value}),className:"input-field mt-1",placeholder:"Enter growth percentage",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deposit (€)"}),l.jsx("input",{type:"number",step:"0.01",value:y.deposit,onChange:M=>b({...y,deposit:M.target.value}),className:"input-field mt-1",placeholder:"Enter deposit amount (optional)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Withdrawal (€)"}),l.jsx("input",{type:"number",step:"0.01",value:y.withdrawal,onChange:M=>b({...y,withdrawal:M.target.value}),className:"input-field mt-1",placeholder:"Enter withdrawal amount (optional)"})]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"submit",className:"btn-success",children:"Add Performance"}),l.jsx("button",{type:"button",onClick:()=>{_(!1),p(null)},className:"btn-secondary",children:"Cancel"})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"All Investors Performance Overview"})}),n.length>0?l.jsx("div",{className:"space-y-6",children:n.map((M,$)=>{const G=a(M.id);return l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 border-2 border-gray-200 flex-shrink-0",children:M.profilePicture?l.jsx("img",{src:M.profilePicture,alt:`${M.name}'s profile`,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(ci,{className:"h-6 w-6 text-gray-400"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M.name}),l.jsx("p",{className:"text-sm text-gray-500",children:M.email})]})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Initial: ",E(M.investmentAmount)]})]}),G&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Current Amount"}),l.jsx("p",{className:"text-lg font-bold text-gray-900",children:E(G.currentAmount)})]}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Growth"}),l.jsx("p",{className:"text-lg font-bold text-success-600",children:E(G.totalGrowthAmount)})]}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Deposits"}),l.jsx("p",{className:"text-lg font-bold text-success-600",children:E(G.totalDeposits)})]}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Withdrawals"}),l.jsx("p",{className:"text-lg font-bold text-danger-600",children:E(G.totalWithdrawals)})]})]}),M.performance.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth %"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deposit"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Withdrawal"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.performance.map(X=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:[j[X.month-1]," ",X.year]}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:E(X.growthAmount)}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:T(X.growthPercentage)}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:X.deposit>0?E(X.deposit):"-"}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:X.withdrawal>0?E(X.withdrawal):"-"})]},X.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-4",children:"No performance data for this investor yet."})]},`${M.id}-overview-${$}`)})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No investors yet. Add your first investor to start tracking their performance."})]})]})};var Wv={exports:{}},qv={exports:{}};/*! Axios v1.11.0 Copyright (c) 2025 Matt Zabriskie and contributors */function Tk(t,e){return function(){return t.apply(e,arguments)}}const{toString:tz}=Object.prototype,{getPrototypeOf:Gv}=Object,{iterator:x0,toStringTag:kk}=Symbol,g0=(t=>e=>{const n=tz.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ar=t=>(t=t.toLowerCase(),e=>g0(e)===t),y0=t=>e=>typeof e===t,{isArray:Za}=Array,Jc=y0("undefined");function Su(t){return t!==null&&!Jc(t)&&t.constructor!==null&&!Jc(t.constructor)&&wn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ik=ar("ArrayBuffer");function nz(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ik(t.buffer),e}const rz=y0("string"),wn=y0("function"),jk=y0("number"),Nu=t=>t!==null&&typeof t=="object",sz=t=>t===!0||t===!1,ah=t=>{if(g0(t)!=="object")return!1;const e=Gv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(kk in t)&&!(x0 in t)},iz=t=>{if(!Nu(t)||Su(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},oz=ar("Date"),az=ar("File"),lz=ar("Blob"),cz=ar("FileList"),uz=t=>Nu(t)&&wn(t.pipe),dz=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||wn(t.append)&&((e=g0(t))==="formdata"||e==="object"&&wn(t.toString)&&t.toString()==="[object FormData]"))},hz=ar("URLSearchParams"),[fz,mz,pz,xz]=["ReadableStream","Request","Response","Headers"].map(ar),gz=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Au(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Za(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Su(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function Pk(t,e){if(Su(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Gi=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ye)(),Dk=t=>!Jc(t)&&t!==Gi;function ag(){const{caseless:t}=Dk(this)&&this||{},e={},n=(r,s)=>{const i=t&&Pk(e,s)||s;ah(e[i])&&ah(r)?e[i]=ag(e[i],r):ah(r)?e[i]=ag({},r):Za(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Au(arguments[r],n);return e}const yz=(t,e,n,{allOwnKeys:r}={})=>(Au(e,(s,i)=>{n&&wn(s)?t[i]=Tk(s,n):t[i]=s},{allOwnKeys:r}),t),vz=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),wz=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},bz=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Gv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},_z=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Ez=t=>{if(!t)return null;if(Za(t))return t;let e=t.length;if(!jk(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Cz=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Gv(Uint8Array)),Sz=(t,e)=>{const r=(t&&t[x0]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Nz=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Az=ar("HTMLFormElement"),Tz=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),OE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),kz=ar("RegExp"),Rk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Au(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},Iz=t=>{Rk(t,(e,n)=>{if(wn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(wn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jz=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Za(t)?r(t):r(String(t).split(e)),n},Pz=()=>{},Dz=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Rz(t){return!!(t&&wn(t.append)&&t[kk]==="FormData"&&t[x0])}const Mz=t=>{const e=new Array(10),n=(r,s)=>{if(Nu(r)){if(e.indexOf(r)>=0)return;if(Su(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Za(r)?[]:{};return Au(r,(o,a)=>{const c=n(o,s+1);!Jc(c)&&(i[a]=c)}),e[s]=void 0,i}}return r};return n(t,0)},Oz=ar("AsyncFunction"),Fz=t=>t&&(Nu(t)||wn(t))&&wn(t.then)&&wn(t.catch),Mk=((t,e)=>t?setImmediate:e?((n,r)=>(Gi.addEventListener("message",({source:s,data:i})=>{s===Gi&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Gi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wn(Gi.postMessage)),Bz=typeof queueMicrotask<"u"?queueMicrotask.bind(Gi):typeof process<"u"&&process.nextTick||Mk,Lz=t=>t!=null&&wn(t[x0]);var z={isArray:Za,isArrayBuffer:Ik,isBuffer:Su,isFormData:dz,isArrayBufferView:nz,isString:rz,isNumber:jk,isBoolean:sz,isObject:Nu,isPlainObject:ah,isEmptyObject:iz,isReadableStream:fz,isRequest:mz,isResponse:pz,isHeaders:xz,isUndefined:Jc,isDate:oz,isFile:az,isBlob:lz,isRegExp:kz,isFunction:wn,isStream:uz,isURLSearchParams:hz,isTypedArray:Cz,isFileList:cz,forEach:Au,merge:ag,extend:yz,trim:gz,stripBOM:vz,inherits:wz,toFlatObject:bz,kindOf:g0,kindOfTest:ar,endsWith:_z,toArray:Ez,forEachEntry:Sz,matchAll:Nz,isHTMLForm:Az,hasOwnProperty:OE,hasOwnProp:OE,reduceDescriptors:Rk,freezeMethods:Iz,toObjectSet:jz,toCamelCase:Tz,noop:Pz,toFiniteNumber:Dz,findKey:Pk,global:Gi,isContextDefined:Dk,isSpecCompliantForm:Rz,toJSONObject:Mz,isAsyncFn:Oz,isThenable:Fz,setImmediate:Mk,asap:Bz,isIterable:Lz};function xe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}z.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const Ok=xe.prototype,Fk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Fk[t]={value:t}});Object.defineProperties(xe,Fk);Object.defineProperty(Ok,"isAxiosError",{value:!0});xe.from=(t,e,n,r,s,i)=>{const o=Object.create(Ok);return z.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),xe.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};var Vz=null;function lg(t){return z.isPlainObject(t)||z.isArray(t)}function Bk(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function FE(t,e,n){return t?t.concat(e).map(function(s,i){return s=Bk(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Uz(t){return z.isArray(t)&&!t.some(lg)}const zz=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function v0(t,e,n){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,v){return!z.isUndefined(v[_])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(s))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(z.isDate(x))return x.toISOString();if(z.isBoolean(x))return x.toString();if(!c&&z.isBlob(x))throw new xe("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(x)||z.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,_,v){let S=x;if(x&&!v&&typeof x=="object"){if(z.endsWith(_,"{}"))_=r?_:_.slice(0,-2),x=JSON.stringify(x);else if(z.isArray(x)&&Uz(x)||(z.isFileList(x)||z.endsWith(_,"[]"))&&(S=z.toArray(x)))return _=Bk(_),S.forEach(function(b,E){!(z.isUndefined(b)||b===null)&&e.append(o===!0?FE([_],E,i):o===null?_:_+"[]",u(b))}),!1}return lg(x)?!0:(e.append(FE(v,_,i),u(x)),!1)}const f=[],m=Object.assign(zz,{defaultVisitor:d,convertValue:u,isVisitable:lg});function p(x,_){if(!z.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(x),z.forEach(x,function(S,y){(!(z.isUndefined(S)||S===null)&&s.call(e,S,z.isString(y)?y.trim():y,_,m))===!0&&p(S,_?_.concat(y):[y])}),f.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return p(t),e}function BE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Kv(t,e){this._pairs=[],t&&v0(t,this,e)}const Lk=Kv.prototype;Lk.append=function(e,n){this._pairs.push([e,n])};Lk.toString=function(e){const n=e?function(r){return e.call(this,r,BE)}:BE;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function $z(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vk(t,e,n){if(!e)return t;const r=n&&n.encode||$z;z.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=z.isURLSearchParams(e)?e.toString():new Kv(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Hz{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(r){r!==null&&e(r)})}}var LE=Hz,Uk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wz=typeof URLSearchParams<"u"?URLSearchParams:Kv,qz=typeof FormData<"u"?FormData:null,Gz=typeof Blob<"u"?Blob:null,Kz={isBrowser:!0,classes:{URLSearchParams:Wz,FormData:qz,Blob:Gz},protocols:["http","https","file","blob","url","data"]};const Yv=typeof window<"u"&&typeof document<"u",cg=typeof navigator=="object"&&navigator||void 0,Yz=Yv&&(!cg||["ReactNative","NativeScript","NS"].indexOf(cg.product)<0),Qz=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Xz=Yv&&window.location.href||"http://localhost";var Jz=Object.freeze({__proto__:null,hasBrowserEnv:Yv,hasStandardBrowserWebWorkerEnv:Qz,hasStandardBrowserEnv:Yz,navigator:cg,origin:Xz}),Gt={...Jz,...Kz};function Zz(t,e){return v0(t,new Gt.classes.URLSearchParams,{visitor:function(n,r,s,i){return Gt.isNode&&z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function e$(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function t$(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function zk(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&z.isArray(s)?s.length:o,c?(z.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!z.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&z.isArray(s[o])&&(s[o]=t$(s[o])),!a)}if(z.isFormData(t)&&z.isFunction(t.entries)){const n={};return z.forEachEntry(t,(r,s)=>{e(e$(r),s,n,0)}),n}return null}function n$(t,e,n){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qv={transitional:Uk,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=z.isObject(e);if(i&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return s?JSON.stringify(zk(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Zz(e,this.formSerializer).toString();if((a=z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return v0(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),n$(e)):e}],transformResponse:[function(e){const n=this.transitional||Qv.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xe.from(a,xe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{Qv.headers[t]={}});var Xv=Qv;const r$=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var s$=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&r$[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e};const VE=Symbol("internals");function Pl(t){return t&&String(t).trim().toLowerCase()}function lh(t){return t===!1||t==null?t:z.isArray(t)?t.map(lh):String(t)}function i$(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const o$=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vp(t,e,n,r,s){if(z.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!z.isString(e)){if(z.isString(r))return e.indexOf(r)!==-1;if(z.isRegExp(r))return r.test(e)}}function a$(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function l$(t,e){const n=z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class w0{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,c,u){const d=Pl(c);if(!d)throw new Error("header name must be a non-empty string");const f=z.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=lh(a))}const o=(a,c)=>z.forEach(a,(u,d)=>i(u,d,c));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(z.isString(e)&&(e=e.trim())&&!o$(e))o(s$(e),n);else if(z.isObject(e)&&z.isIterable(e)){let a={},c,u;for(const d of e){if(!z.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(c=a[u])?z.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Pl(e),e){const r=z.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return i$(s);if(z.isFunction(n))return n.call(this,s,r);if(z.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Pl(e),e){const r=z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||vp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Pl(o),o){const a=z.findKey(r,o);a&&(!n||vp(r,r[a],a,n))&&(delete r[a],s=!0)}}return z.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||vp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return z.forEach(this,(s,i)=>{const o=z.findKey(r,i);if(o){n[o]=lh(s),delete n[i];return}const a=e?a$(i):String(i).trim();a!==i&&delete n[i],n[a]=lh(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return z.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[VE]=this[VE]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Pl(o);r[a]||(l$(s,o),r[a]=!0)}return z.isArray(e)?e.forEach(i):i(e),this}}w0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(w0.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});z.freezeMethods(w0);var nr=w0;function wp(t,e){const n=this||Xv,r=e||n,s=nr.from(r.headers);let i=r.data;return z.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function $k(t){return!!(t&&t.__CANCEL__)}function el(t,e,n){xe.call(this,t??"canceled",xe.ERR_CANCELED,e,n),this.name="CanceledError"}z.inherits(el,xe,{__CANCEL__:!0});function Hk(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function c$(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function u$(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[i];o||(o=u),n[s]=c,r[s]=u;let f=i,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(m*1e3/p):void 0}}function d$(t,e){let n=0,r=1e3/e,s,i;const o=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?o(u,d):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-f)))},()=>s&&o(s)]}const pf=(t,e,n=3)=>{let r=0;const s=u$(50,250);return d$(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-r,u=s(c),d=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},UE=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},zE=t=>(...e)=>z.asap(()=>t(...e));var h$=Gt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Gt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,f$=Gt.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];z.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),z.isString(r)&&o.push("path="+r),z.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function m$(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function p$(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Wk(t,e,n){let r=!m$(e);return t&&(r||n==!1)?p$(t,e):e}const $E=t=>t instanceof nr?{...t}:t;function xo(t,e){e=e||{};const n={};function r(u,d,f,m){return z.isPlainObject(u)&&z.isPlainObject(d)?z.merge.call({caseless:m},u,d):z.isPlainObject(d)?z.merge({},d):z.isArray(d)?d.slice():d}function s(u,d,f,m){if(z.isUndefined(d)){if(!z.isUndefined(u))return r(void 0,u,f,m)}else return r(u,d,f,m)}function i(u,d){if(!z.isUndefined(d))return r(void 0,d)}function o(u,d){if(z.isUndefined(d)){if(!z.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,f)=>s($E(u),$E(d),f,!0)};return z.forEach(Object.keys({...t,...e}),function(d){const f=c[d]||s,m=f(t[d],e[d],d);z.isUndefined(m)&&f!==a||(n[d]=m)}),n}var qk=t=>{const e=xo({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=nr.from(o),e.url=Vk(Wk(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(z.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Gt.hasStandardBrowserEnv&&(r&&z.isFunction(r)&&(r=r(e)),r||r!==!1&&h$(e.url))){const u=s&&i&&f$.read(i);u&&o.set(s,u)}return e};const x$=typeof XMLHttpRequest<"u";var g$=x$&&function(t){return new Promise(function(n,r){const s=qk(t);let i=s.data;const o=nr.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,d,f,m,p,x;function _(){p&&p(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function S(){if(!v)return;const b=nr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:t,request:v};Hk(function(w){n(w),_()},function(w){r(w),_()},T),v=null}"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(S)},v.onabort=function(){v&&(r(new xe("Request aborted",xe.ECONNABORTED,t,v)),v=null)},v.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||Uk;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),r(new xe(E,T.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,t,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&z.forEach(o.toJSON(),function(E,T){v.setRequestHeader(T,E)}),z.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),a&&a!=="json"&&(v.responseType=s.responseType),u&&([m,x]=pf(u,!0),v.addEventListener("progress",m)),c&&v.upload&&([f,p]=pf(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=b=>{v&&(r(!b||b.type?new el(null,t,v):b),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const y=c$(s.url);if(y&&Gt.protocols.indexOf(y)===-1){r(new xe("Unsupported protocol "+y+":",xe.ERR_BAD_REQUEST,t));return}v.send(i||null)})};const y$=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const d=u instanceof Error?u:this.reason;r.abort(d instanceof xe?d:new el(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>z.asap(a),c}};var v$=y$;const w$=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},b$=async function*(t,e){for await(const n of _$(t))yield*w$(n,e)},_$=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},HE=(t,e,n,r)=>{const s=b$(t,e);let i=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){a(),c.close();return}let f=d.byteLength;if(n){let m=i+=f;n(m)}c.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},b0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Gk=b0&&typeof ReadableStream=="function",E$=b0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Kk=(t,...e)=>{try{return!!t(...e)}catch{return!1}},C$=Gk&&Kk(()=>{let t=!1;const e=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),WE=64*1024,ug=Gk&&Kk(()=>z.isReadableStream(new Response("").body)),xf={stream:ug&&(t=>t.body)};b0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xf[e]&&(xf[e]=z.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,r)})})})(new Response);const S$=async t=>{if(t==null)return 0;if(z.isBlob(t))return t.size;if(z.isSpecCompliantForm(t))return(await new Request(Gt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(z.isArrayBufferView(t)||z.isArrayBuffer(t))return t.byteLength;if(z.isURLSearchParams(t)&&(t=t+""),z.isString(t))return(await E$(t)).byteLength},N$=async(t,e)=>{const n=z.toFiniteNumber(t.getContentLength());return n??S$(e)};var A$=b0&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:m}=qk(t);u=u?(u+"").toLowerCase():"text";let p=v$([s,i&&i.toAbortSignal()],o),x;const _=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(c&&C$&&n!=="get"&&n!=="head"&&(v=await N$(d,r))!==0){let T=new Request(e,{method:"POST",body:r,duplex:"half"}),k;if(z.isFormData(r)&&(k=T.headers.get("content-type"))&&d.setContentType(k),T.body){const[w,g]=UE(v,pf(zE(c)));r=HE(T.body,WE,w,g)}}z.isString(f)||(f=f?"include":"omit");const S="credentials"in Request.prototype;x=new Request(e,{...m,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:S?f:void 0});let y=await fetch(x,m);const b=ug&&(u==="stream"||u==="response");if(ug&&(a||b&&_)){const T={};["status","statusText","headers"].forEach(A=>{T[A]=y[A]});const k=z.toFiniteNumber(y.headers.get("content-length")),[w,g]=a&&UE(k,pf(zE(a),!0))||[];y=new Response(HE(y.body,WE,w,()=>{g&&g(),_&&_()}),T)}u=u||"text";let E=await xf[z.findKey(xf,u)||"text"](y,t);return!b&&_&&_(),await new Promise((T,k)=>{Hk(T,k,{data:E,headers:nr.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:x})})}catch(S){throw _&&_(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,t,x),{cause:S.cause||S}):xe.from(S,S&&S.code,t,x)}});const dg={http:Vz,xhr:g$,fetch:A$};z.forEach(dg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const qE=t=>`- ${t}`,T$=t=>z.isFunction(t)||t===null||t===!1;var Yk={getAdapter:t=>{t=z.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!T$(n)&&(r=dg[(o=String(n)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(qE).join(`
`):" "+qE(i[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:dg};function bp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new el(null,t)}function GE(t){return bp(t),t.headers=nr.from(t.headers),t.data=wp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Yk.getAdapter(t.adapter||Xv.adapter)(t).then(function(r){return bp(t),r.data=wp.call(t,t.transformResponse,r),r.headers=nr.from(r.headers),r},function(r){return $k(r)||(bp(t),r&&r.response&&(r.response.data=wp.call(t,t.transformResponse,r.response),r.response.headers=nr.from(r.response.headers))),Promise.reject(r)})}const Qk="1.11.0",_0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{_0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const KE={};_0.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Qk+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new xe(s(o," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!KE[o]&&(KE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};_0.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function k$(t,e,n){if(typeof t!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new xe("option "+i+" must be "+c,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+i,xe.ERR_BAD_OPTION)}}var ch={assertOptions:k$,validators:_0};const dr=ch.validators;class gf{constructor(e){this.defaults=e||{},this.interceptors={request:new LE,response:new LE}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=xo(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ch.assertOptions(r,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),s!=null&&(z.isFunction(s)?n.paramsSerializer={serialize:s}:ch.assertOptions(s,{encode:dr.function,serialize:dr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ch.assertOptions(n,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&z.merge(i.common,i[n.method]);i&&z.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),n.headers=nr.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let d,f=0,m;if(!c){const x=[GE.bind(this),void 0];for(x.unshift(...a),x.push(...u),m=x.length,d=Promise.resolve(n);f<m;)d=d.then(x[f++],x[f++]);return d}m=a.length;let p=n;for(f=0;f<m;){const x=a[f++],_=a[f++];try{p=x(p)}catch(v){_.call(this,v);break}}try{d=GE.call(this,p)}catch(x){return Promise.reject(x)}for(f=0,m=u.length;f<m;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=xo(this.defaults,e);const n=Wk(e.baseURL,e.url,e.allowAbsoluteUrls);return Vk(n,e.params,e.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(e){gf.prototype[e]=function(n,r){return this.request(xo(r||{},{method:e,url:n,data:(r||{}).data}))}});z.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(xo(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}gf.prototype[e]=n(),gf.prototype[e+"Form"]=n(!0)});var uh=gf;class Jv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new el(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Jv(function(s){e=s}),cancel:e}}}var I$=Jv;function j$(t){return function(n){return t.apply(null,n)}}function P$(t){return z.isObject(t)&&t.isAxiosError===!0}const hg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hg).forEach(([t,e])=>{hg[e]=t});var D$=hg;function Xk(t){const e=new uh(t),n=Tk(uh.prototype.request,e);return z.extend(n,uh.prototype,e,{allOwnKeys:!0}),z.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Xk(xo(t,s))},n}const ft=Xk(Xv);ft.Axios=uh;ft.CanceledError=el;ft.CancelToken=I$;ft.isCancel=$k;ft.VERSION=Qk;ft.toFormData=v0;ft.AxiosError=xe;ft.Cancel=ft.CanceledError;ft.all=function(e){return Promise.all(e)};ft.spread=j$;ft.isAxiosError=P$;ft.mergeConfig=xo;ft.AxiosHeaders=nr;ft.formToJSON=t=>zk(z.isHTMLForm(t)?new FormData(t):t);ft.getAdapter=Yk.getAdapter;ft.HttpStatusCode=D$;ft.default=ft;var R$=ft;const M$="@sendgrid/client",O$="Twilio SendGrid NodeJS API client",F$="8.1.5",B$="Twilio SendGrid <help@twilio.com> (sendgrid.com)",L$=["Kyle Partridge <kyle.partridge@sendgrid.com>","David Tomberlin <david.tomberlin@sendgrid.com>","Swift <swift@sendgrid.com>","Brandon West <brandon.west@sendgrid.com>","Scott Motte <scott.motte@sendgrid.com>","Robert Acosta <robert.acosta@sendgrid.com>","Elmer Thomas <ethomas@twilio.com>","Adam Reis <adam@reis.nz>"],V$="MIT",U$="https://sendgrid.com",z$={type:"git",url:"git://github.com/sendgrid/sendgrid-nodejs.git"},$$={access:"public"},H$="index.js",W$={node:">=12.*"},q$={"@sendgrid/helpers":"^8.0.0",axios:"^1.8.2"},G$={chai:"4.2.0",nock:"^10.0.6"},K$={chai:"4.2.0"},Y$=["http","rest","api","mail","sendgrid"],Q$="2bac86884f71be3fb19f96a10c02a1fb616b81fc",X$={name:M$,description:O$,version:F$,author:B$,contributors:L$,license:V$,homepage:U$,repository:z$,publishConfig:$$,main:H$,engines:W$,dependencies:q$,devDependencies:G$,resolutions:K$,tags:Y$,gitHead:Q$};var Zv=function t(e,n,r){if(typeof e!="object"||e===null)throw new Error("Non object passed to convertKeys: "+e);if(Array.isArray(e))return e;Array.isArray(r)||(r=[]);for(const s in e)if(e.hasOwnProperty(s)){const i=n(s);typeof e[s]=="object"&&e[s]!==null&&!r.includes(s)&&!r.includes(i)&&(e[s]=t(e[s],n,r)),i!==s&&(e[i]=e[s],delete e[s])}return e},J$=function(e){if(typeof e!="string")throw new Error("String expected for conversion to snake case");return e.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(n,r){return Number(n)===0?"":r===0?n.toLowerCase():n.toUpperCase()})};const Z$=Zv,eH=J$;var Tu=function(e,n){return Z$(e,eH,n)},tH=function(e){if(typeof e!="string")throw new Error("String expected for conversion to snake case");return e.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(n){return n=n.trim().toLowerCase().replace("-",""),(n[0]==="_"?"":"_")+n}).slice(1)};const nH=Zv,rH=tH;var E0=function(e,n){return nH(e,rH,n)},ku=function(e){return JSON.parse(JSON.stringify(e))};const sH=Tu,iH=E0,oH=ku,aH=yv,lH=yv;let cH=class{constructor(e){e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Mail data");e=oH(e),e=sH(e);const{content:n,filename:r,type:s,disposition:i,contentId:o,filePath:a}=e;if(typeof n<"u"&&typeof a<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(r),this.setType(s),this.setDisposition(i),this.setContentId(o),this.setContent(a?this.readFile(a):n)}readFile(e){return aH.readFileSync(lH.resolve(e))}setContent(e){if(typeof e=="string"){this.content=e;return}else if(e instanceof Buffer&&e.toString!==void 0){this.content=e.toString(),this.disposition==="attachment"&&(this.content=e.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(e){if(e instanceof Buffer&&e.toString!==void 0){this.content=e.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(e){if(!(typeof e>"u")){if(e&&typeof e!="string")throw new Error("String expected for `filename`");this.filename=e}}setType(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `type`");this.type=e}}setDisposition(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `disposition`");this.disposition=e}}setContentId(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `contentId`");this.contentId=e}}toJSON(){const{content:e,filename:n,type:r,disposition:s,contentId:i}=this,o={content:e,filename:n};return typeof r<"u"&&(o.type=r),typeof s<"u"&&(o.disposition=s),typeof i<"u"&&(o.contentId=i),iH(o)}};var uH=cH,Jk=function(e){if(e.indexOf("<")===-1)return["",e];let[n,r]=e.split("<");return n=n.trim(),r=r.replace(">","").trim(),[n,r]};const dH=Jk;let hH=class fg{constructor(e){e&&this.fromData(e)}fromData(e){if(typeof e=="string"){const[s,i]=dH(e);e={name:s,email:i}}if(typeof e!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:n,email:r}=e;this.setEmail(r),this.setName(n)}setName(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `name`");this.name=e}}setEmail(e){if(typeof e>"u")throw new Error("Must provide `email`");if(typeof e!="string")throw new Error("String expected for `email`");this.email=e}toJSON(){const{email:e,name:n}=this,r={email:e};return n!==""&&(r.name=n),r}static create(e){return Array.isArray(e)?e.filter(n=>!!n).map(n=>this.create(n)):e instanceof fg?e:new fg(e)}};var e1=hH,fH=function(e){return mH(e)&&!pH(e)};function mH(t){return!!t&&typeof t=="object"}function pH(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||yH(t)}var xH=typeof Symbol=="function"&&Symbol.for,gH=xH?Symbol.for("react.element"):60103;function yH(t){return t.$$typeof===gH}function vH(t){return Array.isArray(t)?[]:{}}function Zc(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Va(vH(t),t,e):t}function wH(t,e,n){return t.concat(e).map(function(r){return Zc(r,n)})}function bH(t,e){if(!e.customMerge)return Va;var n=e.customMerge(t);return typeof n=="function"?n:Va}function _H(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function YE(t){return Object.keys(t).concat(_H(t))}function Zk(t,e){try{return e in t}catch{return!1}}function EH(t,e){return Zk(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function CH(t,e,n){var r={};return n.isMergeableObject(t)&&YE(t).forEach(function(s){r[s]=Zc(t[s],n)}),YE(e).forEach(function(s){EH(t,s)||(Zk(t,s)&&n.isMergeableObject(e[s])?r[s]=bH(s,n)(t[s],e[s],n):r[s]=Zc(e[s],n))}),r}function Va(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||wH,n.isMergeableObject=n.isMergeableObject||fH,n.cloneUnlessOtherwiseSpecified=Zc;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):CH(t,e,n):Zc(e,n)}Va.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return Va(r,s,n)},{})};var SH=Va,NH=SH,eI=function t(e,n="{{",r="}}"){if(Array.isArray(e))return e.map(i=>t(i,n,r));const s={};for(const i in e)e.hasOwnProperty(i)&&(s[n+i+r]=String(e[i]));return s};const Ri=e1,AH=Tu,TH=E0,kH=ku,IH=NH,jH=eI;let PH=class{constructor(e){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Mail data");e=kH(e),e=AH(e,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:n,from:r,cc:s,bcc:i,subject:o,headers:a,customArgs:c,sendAt:u,substitutions:d,substitutionWrappers:f,dynamicTemplateData:m}=e;this.setTo(n),this.setFrom(r),this.setCc(s),this.setBcc(i),this.setSubject(o),this.setHeaders(a),this.setSubstitutions(d),this.setSubstitutionWrappers(f),this.setCustomArgs(c),this.setDynamicTemplateData(m),this.setSendAt(u)}setSubject(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `subject`");this.subject=e}}setSendAt(e){if(!(typeof e>"u")){if(!Number.isInteger(e))throw new Error("Integer expected for `sendAt`");this.sendAt=e}}setTo(e){typeof e>"u"||(Array.isArray(e)||(e=[e]),this.to=Ri.create(e))}setFrom(e){typeof e>"u"||(this.from=Ri.create(e))}addTo(e){typeof e>"u"||this.to.push(Ri.create(e))}setCc(e){typeof e>"u"||(Array.isArray(e)||(e=[e]),this.cc=Ri.create(e))}addCc(e){typeof e>"u"||this.cc.push(Ri.create(e))}setBcc(e){typeof e>"u"||(Array.isArray(e)||(e=[e]),this.bcc=Ri.create(e))}addBcc(e){typeof e>"u"||this.bcc.push(Ri.create(e))}setHeaders(e){if(!(typeof e>"u")){if(typeof e!="object"||e===null)throw new Error("Object expected for `headers`");this.headers=e}}addHeader(e,n){if(typeof e!="string")throw new Error("String expected for header key");if(typeof n!="string")throw new Error("String expected for header value");this.headers[e]=n}setCustomArgs(e){if(!(typeof e>"u")){if(typeof e!="object"||e===null)throw new Error("Object expected for `customArgs`");this.customArgs=e}}addCustomArg(e,n){if(typeof e!="string")throw new Error("String expected for custom arg key");if(typeof n!="string")throw new Error("String expected for custom arg value");this.customArgs[e]=n}setSubstitutions(e){if(!(typeof e>"u")){if(typeof e!="object")throw new Error("Object expected for `substitutions`");this.substitutions=e}}addSubstitution(e,n){if(typeof e!="string")throw new Error("String expected for substitution key");if(typeof n!="string"&&typeof n!="number")throw new Error("String or Number expected for substitution value");this.substitutions[e]=n}reverseMergeSubstitutions(e){if(!(typeof e>"u"||e===null)){if(typeof e!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},e,this.substitutions)}}setSubstitutionWrappers(e){if(!(typeof e>"u"||e===null)){if(!Array.isArray(e)||e.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=e}}deepMergeDynamicTemplateData(e){if(!(typeof e>"u"||e===null)){if(typeof e!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=IH(e,this.dynamicTemplateData)}}setDynamicTemplateData(e){if(!(typeof e>"u")){if(typeof e!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=e}}toJSON(){const{to:e,from:n,cc:r,bcc:s,subject:i,headers:o,customArgs:a,sendAt:c,substitutions:u,substitutionWrappers:d,dynamicTemplateData:f}=this,m={to:e};if(Array.isArray(r)&&r.length>0&&(m.cc=r),Array.isArray(s)&&s.length>0&&(m.bcc=s),Object.keys(o).length>0&&(m.headers=o),u&&Object.keys(u).length>0){const[p,x]=d;m.substitutions=jH(u,p,x)}return Object.keys(a).length>0&&(m.customArgs=a),f&&Object.keys(f).length>0&&(m.dynamicTemplateData=f),typeof i<"u"&&(m.subject=i),typeof c<"u"&&(m.sendAt=c),typeof n<"u"&&(m.from=n),TH(m,["substitutions","dynamicTemplateData","customArgs","headers"])}};var tI=PH,nI=function(e){return e.map(n=>typeof n=="object"&&n!==null&&typeof n.toJSON=="function"?n.toJSON():n)};const DH=`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;var RH={DYNAMIC_TEMPLATE_CHAR_WARNING:DH};const Oe=(t,e,n,r)=>{if(!(typeof t>"u"||typeof t[n]>"u")&&typeof t[n]!==r)throw new Error(`${r} expected for \`${e}.${n}\``)};var MH={validateMailSettings(t){if(typeof t!="object")throw new Error("Object expected for `mailSettings`");const{bcc:e,bypassListManagement:n,bypassSpamManagement:r,bypassBounceManagement:s,bypassUnsubscribeManagement:i,footer:o,sandboxMode:a,spamCheck:c}=t;Oe(e,"bcc","enable","boolean"),Oe(e,"bcc","email","string"),Oe(n,"bypassListManagement","enable","boolean"),Oe(r,"bypassSpamManagement","enable","boolean"),Oe(s,"bypassBounceManagement","enable","boolean"),Oe(i,"bypassUnsubscribeManagement","enable","boolean"),Oe(o,"footer","enable","boolean"),Oe(o,"footer","text","string"),Oe(o,"footer","html","string"),Oe(a,"sandboxMode","enable","boolean"),Oe(c,"spamCheck","enable","boolean"),Oe(c,"spamCheck","threshold","number"),Oe(c,"spamCheck","postToUrl","string")},validateTrackingSettings(t){if(typeof t!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:e,openTracking:n,subscriptionTracking:r,ganalytics:s}=t;Oe(e,"clickTracking","enable","boolean"),Oe(e,"clickTracking","enableText","boolean"),Oe(n,"openTracking","enable","boolean"),Oe(n,"openTracking","substitutionTag","string"),Oe(r,"subscriptionTracking","enable","boolean"),Oe(r,"subscriptionTracking","text","string"),Oe(r,"subscriptionTracking","html","string"),Oe(r,"subscriptionTracking","substitutionTag","string"),Oe(s,"ganalytics","enable","boolean"),Oe(s,"ganalytics","utm_source","string"),Oe(s,"ganalytics","utm_medium","string"),Oe(s,"ganalytics","utm_term","string"),Oe(s,"ganalytics","utm_content","string"),Oe(s,"ganalytics","utm_campaign","string")}};const QE=e1,Dl=tI,OH=Tu,FH=E0,BH=ku,_p=nI,{DYNAMIC_TEMPLATE_CHAR_WARNING:LH}=RH,{validateMailSettings:VH,validateTrackingSettings:UH}=MH;let zH=class mg{constructor(e){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Mail data");e=BH(e),e=OH(e,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:n,from:r,replyTo:s,cc:i,bcc:o,sendAt:a,subject:c,text:u,html:d,content:f,templateId:m,personalizations:p,attachments:x,ipPoolName:_,batchId:v,sections:S,headers:y,categories:b,category:E,customArgs:T,asm:k,mailSettings:w,trackingSettings:g,substitutions:A,substitutionWrappers:N,dynamicTemplateData:j,isMultiple:D,hideWarnings:P,replyToList:M}=e;this.setFrom(r),this.setReplyTo(s),this.setSubject(c),this.setSendAt(a),this.setTemplateId(m),this.setBatchId(v),this.setIpPoolName(_),this.setAttachments(x),this.setContent(f),this.setSections(S),this.setHeaders(y),this.setCategories(E),this.setCategories(b),this.setCustomArgs(T),this.setAsm(k),this.setMailSettings(w),this.setTrackingSettings(g),this.setHideWarnings(P),this.setReplyToList(M),this.isDynamic?this.setDynamicTemplateData(j):(this.setSubstitutions(A),this.setSubstitutionWrappers(N)),this.addTextContent(u),this.addHtmlContent(d),p?this.setPersonalizations(p):D&&Array.isArray(n)?n.forEach($=>this.addTo($,i,o)):this.addTo(n,i,o)}setFrom(e){if(this._checkProperty("from",e,[this._checkUndefined])){if(typeof e!="string"&&typeof e.email!="string")throw new Error("String or address object expected for `from`");this.from=QE.create(e)}}setReplyTo(e){if(this._checkProperty("replyTo",e,[this._checkUndefined])){if(typeof e!="string"&&typeof e.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=QE.create(e)}}setSubject(e){this._setProperty("subject",e,"string")}setSendAt(e){this._checkProperty("sendAt",e,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=e)}setTemplateId(e){this._setProperty("templateId",e,"string")&&e.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(e){this._setProperty("batchId",e,"string")}setIpPoolName(e){this._setProperty("ipPoolName",e,"string")}setAsm(e){if(this._checkProperty("asm",e,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof e.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(e.groupsToDisplay&&(!Array.isArray(e.groupsToDisplay)||!e.groupsToDisplay.every(n=>typeof n=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=e}}setPersonalizations(e){if(this._doArrayCheck("personalizations",e)){if(!e.every(n=>typeof n=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],e.forEach(n=>this.addPersonalization(n))}}addPersonalization(e){this.isDynamic&&e.substitutions?delete e.substitutions:!this.isDynamic&&e.dynamicTemplateData&&delete e.dynamicTemplateData,e instanceof Dl||(e=new Dl(e)),this.isDynamic?this.applyDynamicTemplateData(e):this.applySubstitutions(e),this.personalizations.push(e)}addTo(e,n,r){if(typeof e>"u"&&typeof n>"u"&&typeof r>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new Dl({to:e,cc:n,bcc:r}))}setSubstitutions(e){this._setProperty("substitutions",e,"object")}setSubstitutionWrappers(e){let n=(r,s)=>{if(!Array.isArray(s)||s.length!==2)throw new Error("Array expected with two elements for `"+r+"`")};this._checkProperty("substitutionWrappers",e,[this._checkUndefined,n])&&(this.substitutionWrappers=e)}applySubstitutions(e){e instanceof Dl&&(e.reverseMergeSubstitutions(this.substitutions),e.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(e){e instanceof Dl&&e.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(e){if(!(typeof e>"u")){if(typeof e!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(e).forEach(n=>{/['"&]/.test(n)&&console.warn(LH)}),this.dynamicTemplateData=e}}setContent(e){if(this._doArrayCheck("content",e)){if(!e.every(n=>typeof n=="object"))throw new Error("Expected each entry in `content` to be an object");if(!e.every(n=>typeof n.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!e.every(n=>typeof n.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=e}}addContent(e){this._checkProperty("content",e,[this._createTypeCheck("object")])&&this.content.push(e)}addTextContent(e){this._checkProperty("text",e,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:e,type:"text/plain"})}addHtmlContent(e){this._checkProperty("html",e,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:e,type:"text/html"})}setAttachments(e){if(this._doArrayCheck("attachments",e)){if(!e.every(n=>typeof n.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!e.every(n=>typeof n.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!e.every(n=>!n.type||typeof n.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!e.every(n=>!n.disposition||typeof n.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=e}}addAttachment(e){this._checkProperty("attachment",e,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(e)}setCategories(e){let n=(r,s)=>{if(!Array.isArray(s)||!s.every(i=>typeof i=="string"))throw new Error("Array of strings expected for `"+r+"`")};typeof e=="string"&&(e=[e]),this._checkProperty("categories",e,[this._checkUndefined,n])&&(this.categories=e)}addCategory(e){this._checkProperty("category",e,[this._createTypeCheck("string")])&&this.categories.push(e)}setHeaders(e){this._setProperty("headers",e,"object")}addHeader(e,n){this._checkProperty("key",e,[this._createTypeCheck("string")])&&this._checkProperty("value",n,[this._createTypeCheck("string")])&&(this.headers[e]=n)}setSections(e){this._setProperty("sections",e,"object")}setCustomArgs(e){this._setProperty("customArgs",e,"object")}setTrackingSettings(e){typeof e>"u"||(UH(e),this.trackingSettings=e)}setMailSettings(e){typeof e>"u"||(VH(e),this.mailSettings=e)}setHideWarnings(e){if(!(typeof e>"u")){if(typeof e!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=e}}toJSON(){const{from:e,replyTo:n,sendAt:r,subject:s,content:i,templateId:o,personalizations:a,attachments:c,ipPoolName:u,batchId:d,asm:f,sections:m,headers:p,categories:x,customArgs:_,mailSettings:v,trackingSettings:S,replyToList:y}=this,b={from:e,subject:s,personalizations:_p(a)};return Array.isArray(c)&&c.length>0&&(b.attachments=_p(c)),Array.isArray(x)&&x.length>0&&(b.categories=x.filter(E=>E!=="")),Array.isArray(i)&&i.length>0&&(b.content=_p(i)),Object.keys(p).length>0&&(b.headers=p),Object.keys(v).length>0&&(b.mailSettings=v),Object.keys(S).length>0&&(b.trackingSettings=S),Object.keys(_).length>0&&(b.customArgs=_),Object.keys(m).length>0&&(b.sections=m),Object.keys(f).length>0&&(b.asm=f),typeof n<"u"&&(b.replyTo=n),typeof r<"u"&&(b.sendAt=r),typeof d<"u"&&(b.batchId=d),typeof o<"u"&&(b.templateId=o),typeof u<"u"&&(b.ipPoolName=u),typeof y<"u"&&(b.replyToList=y),FH(b,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(e){return Array.isArray(e)?e.filter(n=>!!n).map(n=>this.create(n)):e instanceof mg?e:new mg(e)}_checkProperty(e,n,r){return!r.some(s=>s(e,n))}_setProperty(e,n,r){let s=this._checkProperty(e,n,[this._checkUndefined,this._createTypeCheck(r)]);return s&&(this[e]=n),s}_checkUndefined(e,n){return typeof n>"u"}_createTypeCheck(e){return(n,r)=>{if(typeof r!==e)throw new Error(e+" expected for `"+n+"`")}}_createCheckThatThrows(e,n){return(r,s)=>{if(!e(s))throw new Error(n)}}_setArrayProperty(e,n){this._doArrayCheck(e,n)&&(this[e]=n)}_doArrayCheck(e,n){return this._checkProperty(e,n,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+e+"`")])}setReplyToList(e){if(this._doArrayCheck("replyToList",e)&&e.length){if(!e.every(n=>n&&typeof n.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=e}}};var $H=zH;let HH=class{constructor(e,n,r){this.statusCode=e,this.body=n,this.headers=r}toString(){return"HTTP "+this.statusCode+" "+this.body}};var WH=HH;let qH=class extends Error{constructor(e){super();const{headers:n,status:r,statusText:s,data:i}=e;this.code=r,this.message=s,this.response={headers:n,body:i},this.stack||Error.captureStackTrace(this,this.constructor);const o=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(o,"")}toString(){const{body:e}=this.response;let n=`${this.message} (${this.code})`;return e&&Array.isArray(e.errors)&&e.errors.forEach(r=>{const s=r.message,i=r.field,o=r.help;n+=`
  ${s}
    ${i}
    ${o}`}),n}toJSON(){const{message:e,code:n,response:r}=this;return{message:e,code:n,response:r}}};var GH=qH;const KH=Tu,YH=ku,QH=["day","week","month"],XH=["us","ca"],Dd=["desc","asc"];let JH=class{constructor(e){this.startDate=null,this.endDate=null,this.aggregatedBy=null,e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Statistics data");e=YH(e),e=KH(e,["substitutions","customArgs"]);const{startDate:n,endDate:r,aggregatedBy:s}=e;this.setStartDate(n),this.setEndDate(r),this.setAggregatedBy(s)}setStartDate(e){if(typeof e>"u")throw new Error("Date expected for `startDate`");if(new Date(e)==="Invalid Date"||isNaN(new Date(e)))throw new Error("Date expected for `startDate`");console.log(e),this.startDate=new Date(e).toISOString().slice(0,10)}setEndDate(e){if(typeof e>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(e)==="Invalid Date"||isNaN(new Date(e)))throw new Error("Date expected for `endDate`");this.endDate=new Date(e).toISOString().slice(0,10)}setAggregatedBy(e){if(!(typeof e>"u"))if(typeof e=="string"&&QH.includes(e.toLowerCase()))this.aggregatedBy=e;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:e,endDate:n,aggregatedBy:r}=this;return{startDate:e,endDate:n,aggregatedBy:r}}getAdvanced(e){const n=this.getGlobal();return typeof e>"u"||typeof e=="string"&&XH.includes(e.toLowerCase())&&(n.country=e),n}getAdvancedMailboxProviders(e){const n=this.getGlobal();if(typeof e>"u")return n;if(Array.isArray(e)&&e.some(r=>typeof r!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return n.mailBoxProviders=e,n}getAdvancedBrowsers(e){const n=this.getGlobal();if(typeof e>"u")return n;if(Array.isArray(e)&&e.some(r=>typeof r!="string"))throw new Error("Array of strings expected for `browsers`");return n.browsers=e,n}getCategories(e){if(typeof e>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(e))throw new Error("Array of strings expected for `categories`");const n=this.getGlobal();return n.categories=e,n}getSubuser(e){if(typeof e>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(e))throw new Error("Array of strings expected for `subusers`");const n=this.getGlobal();return n.subusers=e,n}getSubuserSum(e="delivered",n=Dd[0],r=5,s=0){if(typeof e!="string")throw new Error("string expected for `sortByMetric`");if(!Dd.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof r!="number")throw new Error("number expected for `limit`");if(typeof s!="number")throw new Error("number expected for `offset`");const i=this.getGlobal();return i.sortByMetric=e,i.sortByDirection=n,i.limit=r,i.offset=s,i}getSubuserMonthly(e="delivered",n=Dd[0],r=5,s=0){if(typeof e!="string")throw new Error("string expected for `sortByMetric`");if(!Dd.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof r!="number")throw new Error("number expected for `limit`");if(typeof s!="number")throw new Error("number expected for `offset`");const i=this.getGlobal();return i.sortByMetric=e,i.sortByDirection=n,i.limit=r,i.offset=s,i}_isValidArrayOfStrings(e){return!(!Array.isArray(e)||e.length<1||e.some(n=>typeof n!="string"))}};var ZH=JH;const eW=uH,tW=e1,nW=$H,rW=tI,sW=WH,iW=GH,oW=ZH;var aW={Attachment:eW,EmailAddress:tW,Mail:nW,Personalization:rW,Response:sW,ResponseError:iW,Statistics:oW},lW=function(e,n){if(typeof e!="object"||e===null)throw new Error("Not an object provided for base");if(typeof n!="object"||n===null)throw new Error("Not an object provided for data");const r=Object.assign({},e);for(const s in n)n.hasOwnProperty(s)&&(n[s]&&Array.isArray(n[s])?r[s]=n[s]:n[s]&&typeof n[s]=="object"?r[s]=Object.assign({},n[s]):n[s]&&(r[s]=n[s]));return r};const cW=nI,uW=Zv,dW=ku,hW=lW,fW=Jk,mW=Tu,pW=E0,xW=eI;var gW={arrayToJSON:cW,convertKeys:uW,deepClone:dW,mergeData:hW,splitNameEmail:fW,toCamelCase:mW,toSnakeCase:pW,wrapSubstitutions:xW};const yW=aW,vW=gW;var rI={classes:yW,helpers:vW};const wW=R$,bW=X$,{helpers:{mergeData:XE},classes:{Response:_W,ResponseError:EW}}=rI,JE="SG.",CW="https://api.sendgrid.com/",SW="https://email.twilio.com/",NW="global",Ep={eu:"https://api.eu.sendgrid.com/",global:"https://api.sendgrid.com/"};let AW=class{constructor(){this.auth="",this.impersonateSubuser="",this.sendgrid_region=NW,this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+bW.version+";nodejs"},this.defaultRequest={baseUrl:CW,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(e){this.auth="Bearer "+e,this.setDefaultRequest("baseUrl",Ep[this.sendgrid_region]),this.isValidApiKey(e)||console.warn(`API key does not start with "${JE}".`)}setTwilioEmailAuth(e,n){const r=Buffer.from(e+":"+n).toString("base64");this.auth="Basic "+r,this.setDefaultRequest("baseUrl",SW),this.isValidTwilioAuth(e,n)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(e){return this.isString(e)&&e.trim().startsWith(JE)}isValidTwilioAuth(e,n){return this.isString(e)&&e&&this.isString(n)&&n}isString(e){return typeof e=="string"||e instanceof String}setImpersonateSubuser(e){this.impersonateSubuser=e}setDefaultHeader(e,n){return e!==null&&typeof e=="object"?(Object.assign(this.defaultHeaders,e),this):(this.defaultHeaders[e]=n,this)}setDefaultRequest(e,n){return e!==null&&typeof e=="object"?(Object.assign(this.defaultRequest,e),this):(this.defaultRequest[e]=n,this)}setDataResidency(e){return Ep.hasOwnProperty(e)?(this.sendgrid_region=e,this.setDefaultRequest("baseUrl",Ep[e])):console.warn('Region can only be "global" or "eu".'),this}createHeaders(e){const n=XE(this.defaultHeaders,e);return typeof n.Authorization>"u"&&this.auth&&(n.Authorization=this.auth),this.impersonateSubuser&&(n["On-Behalf-Of"]=this.impersonateSubuser),n}createRequest(e){let n={url:e.uri||e.url,baseUrl:e.baseUrl,method:e.method,data:e.body,params:e.qs,headers:e.headers};return n=XE(this.defaultRequest,n),n.headers=this.createHeaders(n.headers),n.baseURL=n.baseUrl,delete n.baseUrl,n}request(e,n){e=this.createRequest(e);const r=new Promise((s,i)=>{wW(e).then(o=>s([new _W(o.status,o.data,o.headers),o.data])).catch(o=>o.response&&o.response.status>=400?i(new EW(o.response)):i(o))});if(n&&typeof n!="function")throw new Error("Callback passed is not a function.");return n?r.then(s=>n(null,s)).catch(s=>n(s,null)):r}};var sI=AW;const TW=sI;var kW=new TW;const IW=kW,jW=sI;qv.exports=IW;qv.exports.Client=jW;var PW=qv.exports;const{Client:DW}=PW,{classes:{Mail:RW}}=rI;let MW=class{constructor(){this.setClient(new DW),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(e){return this.client=e,this}setApiKey(e){return this.client.setApiKey(e),this}setTwilioEmailAuth(e,n){this.client.setTwilioEmailAuth(e,n)}setTimeout(e){typeof e>"u"||this.client.setDefaultRequest("timeout",e)}setSubstitutionWrappers(e,n){if(typeof e>"u"||typeof n>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=e,this.substitutionWrappers[1]=n,this}setSecretRules(e){e instanceof Array||(e=[e]);const n=e.map(function(r){const s=typeof r;if(s==="string")return{pattern:new RegExp(r)};if(s==="object"){r instanceof RegExp?r={pattern:r}:r.hasOwnProperty("pattern")&&typeof r.pattern=="string"&&(r.pattern=new RegExp(r.pattern));try{return r.pattern.test(""),r}catch{}}});this.secretRules=n.filter(function(r){return r})}filterSecrets(e){if(typeof e=="object"&&!e.hasOwnProperty("content"))return;const n=this;e.content.forEach(function(r){n.secretRules.forEach(function(s){if(s.hasOwnProperty("pattern")&&!s.pattern.test(r.value))return;let i=`The pattern '${s.pattern}'`;throw s.name&&(i+=`identified by '${s.name}'`),i+=" was found in the Mail content!",new Error(i)})})}send(e,n=!1,r){if(typeof n=="function"&&(r=n,n=!1),Array.isArray(e)){const s=Promise.all(e.map(i=>this.send(i,n)));return r&&s.then(i=>r(null,i)).catch(i=>r(i,null)),s}try{typeof e.isMultiple>"u"&&(e.isMultiple=n),typeof e.substitutionWrappers>"u"&&(e.substitutionWrappers=this.substitutionWrappers);const s=RW.create(e),i=s.toJSON();this.filterSecrets(i);const o={method:"POST",url:"/v3/mail/send",headers:s.headers,body:i};return this.client.request(o,r)}catch(s){return r&&r(s,null),Promise.reject(s)}}sendMultiple(e,n){return this.send(e,!0,n)}};var iI=MW;const OW=iI;var FW=new OW;const BW=FW,LW=iI;Wv.exports=BW;Wv.exports.MailService=LW;var VW=Wv.exports;const UW=pg(VW);UW.setApiKey("SG.Cp3i9119R422Gk7zLcViFA.6g18GAsWSgBUU6mBRsO1pfQbIdE2y_EglVfgZ87h8");class zW{constructor(){this.apiBaseUrl={}.VITE_API_BASE_URL||"http://localhost:5001/api"}async sendWelcomeEmail(e,n){try{const s=await(await fetch(`${this.apiBaseUrl}/send-welcome-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:n})})).json();if(!s.success)throw new Error(s.message||"Failed to send welcome email");return s}catch(r){throw console.error("Error sending welcome email:",r),r}}async sendSignInConfirmation(e,n,r,s,i){try{const a=await(await fetch(`${this.apiBaseUrl}/send-signin-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:n,signInTime:r,credentials:s,password:i})})).json();if(!a.success)throw new Error(a.message||"Failed to send sign-in confirmation");return a}catch(o){throw console.error("Error sending sign-in confirmation:",o),o}}async sendGoogleMeetLink(e,n,r,s){try{const o=await(await fetch(`${this.apiBaseUrl}/send-google-meet-link`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:n,consultationDetails:r,meetLink:s})})).json();if(!o.success)throw new Error(o.message||"Failed to send Google Meet link");return o}catch(i){throw console.error("Error sending Google Meet link:",i),i}}async sendConsultationConfirmation(e,n,r){try{const i=await(await fetch(`${this.apiBaseUrl}/send-consultation-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:n,consultationDetails:r})})).json();if(!i.success)throw new Error(i.message||"Failed to send consultation confirmation");return i}catch(s){throw console.error("Error sending consultation confirmation:",s),s}}async sendPasswordResetEmail(e,n){try{const s=await(await fetch(`${this.apiBaseUrl}/send-password-reset-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,resetToken:n})})).json();if(!s.success)throw new Error(s.message||"Failed to send password reset email");return s}catch(r){throw console.error("Error sending password reset email:",r),r}}async sendPasswordResetCode(e,n){try{console.log("📧 Sending password reset code to:",e,"Code:",n);const s=await(await fetch(`${this.apiBaseUrl}/send-password-reset-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,resetCode:n})})).json();if(console.log("📧 Password reset code response:",s),!s.success)throw new Error(s.message||"Failed to send password reset code");return s}catch(r){throw console.error("Error sending password reset code:",r),r}}async sendPasswordChangeConfirmation(e,n){try{const s=await(await fetch(`${this.apiBaseUrl}/send-password-change-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:n})})).json();if(!s.success)throw new Error(s.message||"Failed to send password change confirmation");return s}catch(r){throw console.error("Error sending password change confirmation:",r),r}}generateResetCode(){return Math.floor(1e5+Math.random()*9e5).toString()}}const Kr=new zW,$W=({isOpen:t,onClose:e})=>{const[n,r]=O.useState(1),[s,i]=O.useState(""),[o,a]=O.useState(""),[c,u]=O.useState(""),[d,f]=O.useState(""),[m,p]=O.useState(!1),[x,_]=O.useState(!1),[v,S]=O.useState(!1),[y,b]=O.useState({}),E=async g=>{if(g.preventDefault(),!s.trim()){b({email:"Email is required"});return}if(!/\S+@\S+\.\S+/.test(s)){b({email:"Please enter a valid email"});return}S(!0);try{console.log("🔄 Generating reset code for email:",s);const A=Kr.generateResetCode();console.log("🔢 Generated reset code:",A);let N=null,j=null,D=null;const P=he(ee,"investors"),M=it(P,rn("email","==",s)),$=await $e(M);if(!$.empty)N=$.docs[0],j=N.id,D="investors";else{const H=he(ee,"users"),Q=it(H,rn("email","==",s)),J=await $e(Q);if(!J.empty)N=J.docs[0],j=N.id,D="users";else{b({email:"No account found with this email address."});return}}const G=new Date(Date.now()+10*60*1e3);await Wn(He(ee,D,j),{resetCode:A,resetCodeExpiry:G,updatedAt:new Date});const X=await Kr.sendPasswordResetCode(s,A);console.log("📧 Email service result:",X),X.success?(r(2),b({})):b({general:X.message})}catch(A){console.error("❌ Error in handleSendCode:",A),b({general:"Failed to send code. Please try again."})}finally{S(!1)}},T=async g=>{if(g.preventDefault(),!o.trim()){b({code:"Verification code is required"});return}if(o.length!==6){b({code:"Code must be 6 digits"});return}S(!0);try{let A=null,N=null,j=null;const D=he(ee,"investors"),P=it(D,rn("email","==",s)),M=await $e(P);if(!M.empty)A=M.docs[0],N=A.data(),j="investors";else{const $=he(ee,"users"),G=it($,rn("email","==",s)),X=await $e(G);if(!X.empty)A=X.docs[0],N=A.data(),j="users";else{b({code:"Invalid code. Please try again."});return}}if(N.resetCode!==o){b({code:"Invalid code. Please try again."});return}if(N.resetCodeExpiry&&new Date>N.resetCodeExpiry.toDate()){b({code:"Code has expired. Please request a new code."});return}r(3),b({})}catch(A){console.error("Error verifying code:",A),b({code:"Invalid code. Please try again."})}finally{S(!1)}},k=async g=>{if(g.preventDefault(),!c){b({newPassword:"New password is required"});return}if(c.length<6){b({newPassword:"Password must be at least 6 characters"});return}if(c!==d){b({confirmPassword:"Passwords do not match"});return}S(!0);try{let A=null,N=null,j=null;const D=he(ee,"investors"),P=it(D,rn("email","==",s)),M=await $e(P);if(!M.empty)A=M.docs[0],N=A.data(),j="investors";else{const G=he(ee,"users"),X=it(G,rn("email","==",s)),H=await $e(X);if(!H.empty)A=H.docs[0],N=A.data(),j="users";else{b({general:"User not found. Please try again."});return}}const $=await bv(c);await Wn(He(ee,j,A.id),{password:$,resetCode:null,resetCodeExpiry:null,updatedAt:new Date}),pa.currentUser&&pa.currentUser.email===s&&await DA(pa.currentUser,c),await Kr.sendPasswordChangeConfirmation(s,N.name||N.username),r(4),b({})}catch(A){console.error("Error resetting password:",A),b({general:"Failed to reset password. Please try again."})}finally{S(!1)}},w=()=>{r(1),i(""),a(""),u(""),f(""),b({}),e()};return t?l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reset Password"}),l.jsx("button",{onClick:w,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ui,{className:"h-6 w-6"})})]}),n===1&&l.jsxs("form",{onSubmit:E,className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600",children:"Enter your email address to receive a verification code."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-medium mb-2",children:"Email Address"}),l.jsxs("div",{className:"relative",children:[l.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"email",id:"email",value:s,onChange:g=>i(g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${y.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter your email"})]}),y.email&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.email})]}),l.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50",children:v?"Sending Code...":"Send Verification Code"})]}),n===2&&l.jsxs("form",{onSubmit:T,className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-600",children:["We've sent a 6-digit code to ",l.jsx("strong",{children:s})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"code",className:"block text-gray-700 font-medium mb-2",children:"Verification Code"}),l.jsx("input",{type:"text",id:"code",value:o,onChange:g=>a(g.target.value.replace(/\D/g,"").slice(0,6)),className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl font-mono ${y.code?"border-red-500":"border-gray-300"}`,placeholder:"000000",maxLength:6}),y.code&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.code})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>r(1),className:"flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Back"}),l.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50",children:v?"Verifying...":"Verify Code"})]})]}),n===3&&l.jsxs("form",{onSubmit:k,className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600",children:"Create a new password for your account."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-gray-700 font-medium mb-2",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:m?"text":"password",id:"newPassword",value:c,onChange:g=>u(g.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${y.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter new password"}),l.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?l.jsx(ho,{className:"h-5 w-5"}):l.jsx(li,{className:"h-5 w-5"})})]}),y.newPassword&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.newPassword})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-gray-700 font-medium mb-2",children:"Confirm New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:x?"text":"password",id:"confirmPassword",value:d,onChange:g=>f(g.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${y.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirm new password"}),l.jsx("button",{type:"button",onClick:()=>_(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?l.jsx(ho,{className:"h-5 w-5"}):l.jsx(li,{className:"h-5 w-5"})})]}),y.confirmPassword&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.confirmPassword})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>r(2),className:"flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Back"}),l.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50",children:v?"Resetting...":"Reset Password"})]})]}),n===4&&l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Ls,{className:"h-8 w-8 text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Password Reset Successful!"}),l.jsx("p",{className:"text-gray-600",children:"Your password has been updated successfully."}),l.jsx("button",{onClick:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Close"})]}),y.general&&l.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:y.general})]})})}):null},HW=()=>{const{isInvestor:t,getCurrentInvestorId:e}=ls(),{investors:n,calculateInvestorPerformance:r,updateInvestor:s}=Xa(),[i,o]=O.useState(!1),[a,c]=O.useState(!1),[u,d]=O.useState({name:"",email:"",phone:"",profilePicture:""}),[f,m]=O.useState(!1),p=e();console.log("InvestorDashboard Debug:",{currentInvestorId:p,investorsCount:n.length,investors:n.map(N=>({id:N.id,name:N.name,type:typeof N.id}))});const x=n.find(N=>{var P;const j=(P=N.id)==null?void 0:P.toString(),D=p==null?void 0:p.toString();return j===D});console.log("Found investor:",x);const _=r(p);if(!t()||!x)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),l.jsx("p",{className:"text-gray-600",children:"You don't have permission to view this page."})]})});const v=N=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(N),S=N=>`${N.toFixed(2)}%`,y=N=>N>=0?"text-success-600":"text-danger-600",b=N=>N>=0?l.jsx(IT,{className:"h-5 w-5 text-success-600"}):l.jsx(TT,{className:"h-5 w-5 text-danger-600"});O.useEffect(()=>{x&&d({name:x.name||"",email:x.email||"",phone:x.phone||"",profilePicture:x.profilePicture||""})},[x]);const E=()=>{o(!0)},T=()=>{o(!1)},k=(N,j)=>{d(D=>({...D,[N]:j}))},w=async N=>{if(N.preventDefault(),!!x){m(!0);try{await s(x.id,u),o(!1),console.log("Profile updated successfully")}catch(j){console.error("Error updating profile:",j)}finally{m(!1)}}},g=N=>{try{const j=N.target.files[0];if(j){if(j.size>5*1024*1024){alert("File size too large. Please select an image smaller than 5MB.");return}if(!j.type.startsWith("image/")){alert("Please select a valid image file.");return}const D=new FileReader;D.onload=P=>{d(M=>({...M,profilePicture:P.target.result}))},D.onerror=()=>{alert("Error reading file. Please try again.")},D.readAsDataURL(j)}}catch(j){console.error("Error handling profile picture change:",j),alert("Error uploading image. Please try again.")}},A=O.useMemo(()=>{if(!x.performance||x.performance.length===0)return[];let N=x.investmentAmount;const j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return[...x.performance].sort((P,M)=>P.year!==M.year?P.year-M.year:P.month-M.month).map(P=>(N+=(P.growthAmount||0)+(P.deposit||0)-(P.withdrawal||0),{date:`${j[P.month-1]} ${P.year}`,balance:N,growth:P.growthAmount||0,growthPercentage:P.growthPercentage||0,deposit:P.deposit||0,withdrawal:P.withdrawal||0}))},[x.performance,x.investmentAmount]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100 border-4 border-gray-200 flex-shrink-0",children:x.profilePicture?l.jsx("img",{src:x.profilePicture,alt:`${x.name}'s profile`,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(ci,{className:"h-8 w-8 text-gray-400"})})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",x.name]}),l.jsx("p",{className:"text-gray-600",children:"Your investment performance overview"})]})]}),l.jsx("button",{onClick:E,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Settings",children:l.jsx(gF,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:l.jsx(Ma,{className:"h-5 w-5 text-primary-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Initial Investment"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(x.investmentAmount)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center",children:l.jsx(gt,{className:"h-5 w-5 text-success-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Growth"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(_?_.totalGrowthAmount:0)}),_&&l.jsxs("div",{className:"flex items-center mt-1",children:[b(_.totalNetPercentage),l.jsx("span",{className:`text-sm font-medium ml-1 ${y(_.totalNetPercentage)}`,children:S(_.totalNetPercentage)})]})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center",children:l.jsx(gt,{className:"h-5 w-5 text-success-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Deposits"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(_?_.totalDeposits:0)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 bg-danger-100 rounded-lg flex items-center justify-center",children:l.jsx(gt,{className:"h-5 w-5 text-danger-600"})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Withdrawals"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(_?_.totalWithdrawals:0)})]})]})})]}),_&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Performance Summary"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Current Amount"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:v(_.currentAmount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Net Profit"}),l.jsx("p",{className:`text-xl font-bold ${y(_.totalNetPercentage)}`,children:v(_.totalGrowthAmount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Net Percentage"}),l.jsx("p",{className:`text-xl font-bold ${y(_.totalNetPercentage)}`,children:S(_.totalNetPercentage)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Performance Entries"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:x.performance.length})]})]})]}),l.jsx(Ak,{data:A,title:"Your Performance Over Time",height:400}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Recent Performance Entries"})}),x.performance.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth %"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deposit"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Withdrawal"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:[...x.performance].sort((N,j)=>N.year!==j.year?N.year-j.year:N.month-j.month).slice(-5).reverse().map(N=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(N.year,N.month-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v(N.growthAmount)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(N.growthPercentage)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.deposit>0?v(N.deposit):"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.withdrawal>0?v(N.withdrawal):"-"})]},N.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No performance entries yet."})]}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Settings"}),l.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ui,{className:"h-6 w-6"})})]}),l.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[l.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 border-4 border-gray-200",children:u.profilePicture?l.jsx("img",{src:u.profilePicture,alt:"Profile",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(ci,{className:"h-12 w-12 text-gray-400"})})}),l.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:[l.jsx(oF,{className:"h-4 w-4"}),l.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden"})]})]}),l.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Click the camera icon to upload a profile picture"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),l.jsx("input",{type:"text",value:u.name,onChange:N=>k("name",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",value:u.email,onChange:N=>k("email",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your email address",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),l.jsx("input",{type:"tel",value:u.phone,onChange:N=>k("phone",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your phone number",required:!0})]}),l.jsx("div",{className:"pt-4 border-t border-gray-200",children:l.jsxs("button",{type:"button",onClick:()=>c(!0),className:"w-full flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx(Oa,{className:"h-4 w-4"}),l.jsx("span",{children:"Reset Password"})]})}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:T,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Updating...":"Update Profile"})]})]})]})}),l.jsx($W,{isOpen:a,onClose:()=>c(!1)})]})},WW=()=>{const{getUserRole:t}=ls(),[e,n]=O.useState([]),[r,s]=O.useState(null),[i,o]=O.useState({name:"",description:"",url:"",icon:"newspaper",imageUrl:"",author:"",date:new Date().toISOString().split("T")[0]}),[a,c]=O.useState(!0),[u,d]=O.useState(!1);O.useState(!1);const[f,m]=O.useState(null),[p,x]=O.useState(null),_=t()==="admin";O.useEffect(()=>{(async()=>{try{const g=await _s.getNewsSources();n(g)}catch(g){console.error("Error loading news sources:",g),n([])}finally{c(!1)}})()},[]),O.useEffect(()=>{const w=_s.onNewsSourcesChange(g=>{n(g)});return window.newsSourcesUnsubscribe=w,()=>w()},[]);const v=w=>{s(w.id),o({name:w.name,description:w.description,url:w.url,icon:w.icon||"newspaper",imageUrl:w.imageUrl||"",author:w.author||"",date:w.date||new Date().toISOString().split("T")[0]}),x(w.imageUrl||null)},S=async()=>{d(!0);try{r==="new"?await _s.addNewsSource(i):await _s.updateNewsSource(r,i),s(null),o({name:"",description:"",url:"",icon:"newspaper",imageUrl:"",author:"",date:new Date().toISOString().split("T")[0]}),x(null)}catch(w){console.error("Error saving news source:",w),alert("Failed to save news source. Please try again.")}finally{d(!1)}},y=()=>{s(null),o({name:"",description:"",url:"",icon:"newspaper",imageUrl:"",author:"",date:new Date().toISOString().split("T")[0]}),x(null)},b=()=>{o({name:"",description:"",url:"",icon:"newspaper",imageUrl:"",author:"",date:new Date().toISOString().split("T")[0]}),x(null),s("new")},E=async w=>{if(_&&window.confirm("Are you sure you want to delete this news source?")){m(w);try{await _s.deleteNewsSource(w),console.log("News source deleted")}catch(g){console.error("Error deleting news source:",g),alert("Failed to delete news source. Please try again.")}finally{m(null)}}},T=async()=>{if(_&&window.confirm("Are you sure you want to delete ALL news sources? This action cannot be undone."))try{console.log("Current sources before clearing:",e.length);const w=window.newsSourcesUnsubscribe;w&&w(),await _s.clearAllNewsSources(),console.log("All news sources cleared"),setTimeout(async()=>{const g=await _s.getNewsSources();if(console.log("Sources after clearing:",g.length),n(g),w){const A=_s.onNewsSourcesChange(N=>{n(N)});window.newsSourcesUnsubscribe=A}},1e3)}catch(w){console.error("Error clearing news sources:",w)}},k=w=>{const g=w.target.files[0];if(g){const A=new FileReader;A.onload=N=>{x(N.target.result),o({...i,imageUrl:N.target.result})},A.readAsDataURL(g)}};return O.useEffect(()=>{const g=setTimeout(()=>{const A=document.createElement("script");A.src="https://s3.tradingview.com/tv.js",A.async=!0,A.onload=()=>{if(window.TradingView)try{new window.TradingView.widget({container_id:"tradingview-market-news-widget",symbol:"USOIL",interval:"60",timezone:"Etc/UTC",theme:"light",style:"1",locale:"en",enable_publishing:!1,allow_symbol_change:!1,hide_side_toolbar:!0,hide_top_toolbar:!0,hide_legend:!0,save_image:!1,backgroundColor:"rgba(255, 255, 255, 1)",gridColor:"rgba(240, 243, 250, 0)",width:"100%",height:"500",studies:[],disabled_features:["use_localstorage_for_settings","volume_force_overlay","create_volume_indicator_by_default","header_symbol_search","header_compare","header_settings","header_fullscreen_button","header_screenshot","timeframes_toolbar","edit_buttons_in_legend","context_menus","border_around_the_chart","header_saveload","control_bar","countdown","display_market_status","chart_property_page_background","compare_symbol","high_density_bars","study_templates","side_toolbar_in_fullscreen_mode","tracking","analytics","snowplow_tracking"],enabled_features:["hide_left_toolbar_by_default"],overrides:{"paneProperties.background":"rgba(255, 255, 255, 1)","paneProperties.vertGridProperties.color":"rgba(240, 243, 250, 0.5)","paneProperties.horzGridProperties.color":"rgba(240, 243, 250, 0.5)"}})}catch(N){console.warn("TradingView widget failed to load:",N)}},document.head.appendChild(A)},100);return()=>{clearTimeout(g);const A=document.querySelector('script[src="https://s3.tradingview.com/tv.js"]');A&&document.head.removeChild(A)}},[]),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Market News"}),l.jsx("p",{className:"text-gray-600",children:"Real-time USOIL chart and oil market news sources"})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"card-header",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"USOIL Real-Time Chart"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Live 1-hour interval chart for US Oil"})]}),l.jsx("div",{className:"h-[500px]",children:l.jsx("div",{id:"tradingview-market-news-widget",className:"w-full h-full"})})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"card-header",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Oil Market News Sources"}),l.jsx("p",{className:"text-sm text-gray-500",children:_?"Click edit icon to modify sources":"Click any source to open in a new tab"})]}),_&&l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:T,className:"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"Clear all news sources",children:"Clear All"}),l.jsx("button",{onClick:b,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors w-8 h-8 flex items-center justify-center",title:"Add new news source",children:l.jsx(l0,{className:"h-4 w-4"})})]})]})}),a?l.jsx("div",{className:"p-6 text-center",children:l.jsx("p",{className:"text-gray-500",children:"Loading news sources..."})}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r==="new"&&l.jsx("div",{className:"p-6 border border-primary-300 rounded-lg bg-primary-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),l.jsx("input",{type:"text",value:i.name,onChange:w=>o({...i,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Employee Visas and Sponsorship in Dubai"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),l.jsx("input",{type:"text",value:i.author,onChange:w=>o({...i,author:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Anish Rajan"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("input",{type:"date",value:i.date,onChange:w=>o({...i,date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL"}),l.jsx("input",{type:"url",value:i.url,onChange:w=>o({...i,url:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://www.example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",id:"image-upload"}),l.jsx("label",{htmlFor:"image-upload",className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-primary-400 transition-colors",children:p?l.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):l.jsxs("div",{className:"text-center",children:[l.jsx(x2,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Click to upload image"})]})})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:S,className:"flex-1 px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center",disabled:u,children:u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-1"}),"Adding..."]}):l.jsxs(l.Fragment,{children:[l.jsx(p2,{className:"h-4 w-4 mr-1"}),"Add Source"]})}),l.jsxs("button",{onClick:y,className:"flex-1 px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center",disabled:u,children:[l.jsx(ui,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})}),e.map(w=>l.jsx("div",{className:"relative",children:r===w.id?l.jsx("div",{className:"p-6 border border-primary-300 rounded-lg bg-primary-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),l.jsx("input",{type:"text",value:i.name,onChange:g=>o({...i,name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),l.jsx("input",{type:"text",value:i.author,onChange:g=>o({...i,author:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("input",{type:"date",value:i.date,onChange:g=>o({...i,date:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL"}),l.jsx("input",{type:"url",value:i.url,onChange:g=>o({...i,url:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",id:`image-upload-${w.id}`}),l.jsx("label",{htmlFor:`image-upload-${w.id}`,className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-primary-400 transition-colors",children:p?l.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):l.jsxs("div",{className:"text-center",children:[l.jsx(x2,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Click to upload image"})]})})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:S,className:"flex-1 px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center",disabled:u,children:u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-1"}),"Saving..."]}):l.jsxs(l.Fragment,{children:[l.jsx(p2,{className:"h-4 w-4 mr-1"}),"Save"]})}),l.jsxs("button",{onClick:y,className:"flex-1 px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center",disabled:u,children:[l.jsx(ui,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})}):l.jsxs("div",{className:"relative",children:[l.jsxs("a",{href:w.url,target:"_blank",rel:"noreferrer",className:"block bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden group",children:[l.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:w.imageUrl?l.jsx("img",{src:w.imageUrl,alt:w.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-green-500",children:l.jsx(jT,{className:"h-12 w-12 text-white"})})}),l.jsxs("div",{className:"p-4",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:w.name}),l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:w.author||"Anonymous"}),l.jsx("p",{className:"text-xs text-gray-500",children:w.date?new Date(w.date).toLocaleDateString():"No date"})]})]}),_&&l.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[l.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),v(w)},className:"p-2 text-gray-400 hover:text-primary-600 transition-colors bg-white rounded-lg shadow-sm hover:shadow-md",title:"Edit news source",children:l.jsx(Cv,{className:"h-4 w-4"})}),l.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),E(w.id)},className:"p-2 text-gray-400 hover:text-red-600 transition-colors bg-white rounded-lg shadow-sm hover:shadow-md",title:"Delete news source",disabled:f===w.id,children:f===w.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(Hc,{className:"h-4 w-4"})})]})]})},w.id))]})]})]})},oI=6048e5,qW=864e5,Rd=43200,ZE=1440,eC=Symbol.for("constructDateFrom");function os(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&eC in t?t[eC](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ct(t,e){return os(e||t,t)}let GW={};function Iu(){return GW}function eu(t,e){var a,c,u,d;const n=Iu(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ct(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function yf(t,e){return eu(t,{...e,weekStartsOn:1})}function aI(t,e){const n=Ct(t,e==null?void 0:e.in),r=n.getFullYear(),s=os(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=yf(s),o=os(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=yf(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function vf(t){const e=Ct(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function C0(t,...e){const n=os.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function tC(t,e){const n=Ct(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function KW(t,e,n){const[r,s]=C0(n==null?void 0:n.in,t,e),i=tC(r),o=tC(s),a=+i-vf(i),c=+o-vf(o);return Math.round((a-c)/qW)}function YW(t,e){const n=aI(t,e),r=os((e==null?void 0:e.in)||t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),yf(r)}function dh(t,e){const n=+Ct(t)-+Ct(e);return n<0?-1:n>0?1:n}function QW(t){return os(t,Date.now())}function XW(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function JW(t){return!(!XW(t)&&typeof t!="number"||isNaN(+Ct(t)))}function ZW(t,e,n){const[r,s]=C0(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function eq(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function tq(t,e){return+Ct(t)-+Ct(e)}function nq(t,e){const n=Ct(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function rq(t,e){const n=Ct(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function sq(t,e){const n=Ct(t,e==null?void 0:e.in);return+nq(n,e)==+rq(n,e)}function iq(t,e,n){const[r,s,i]=C0(n==null?void 0:n.in,t,t,e),o=dh(s,i),a=Math.abs(ZW(s,i));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let c=dh(s,i)===-o;sq(r)&&a===1&&dh(r,i)===1&&(c=!1);const u=o*(a-+c);return u===0?0:u}function oq(t,e,n){const r=tq(t,e)/1e3;return eq(n==null?void 0:n.roundingMethod)(r)}function aq(t,e){const n=Ct(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const lq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cq=(t,e,n)=>{let r;const s=lq[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const uq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fq={date:Cp({formats:uq,defaultWidth:"full"}),time:Cp({formats:dq,defaultWidth:"full"}),dateTime:Cp({formats:hq,defaultWidth:"full"})},mq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pq=(t,e,n,r)=>mq[t];function Rl(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const xq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_q=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Eq={ordinalNumber:_q,era:Rl({values:xq,defaultWidth:"wide"}),quarter:Rl({values:gq,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rl({values:yq,defaultWidth:"wide"}),day:Rl({values:vq,defaultWidth:"wide"}),dayPeriod:Rl({values:wq,defaultWidth:"wide",formattingValues:bq,defaultFormattingWidth:"wide"})};function Ml(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?Sq(a,f=>f.test(o)):Cq(a,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Cq(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Sq(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Nq(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Aq=/^(\d+)(th|st|nd|rd)?/i,Tq=/\d+/i,kq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Iq={any:[/^b/i,/^(a|c)/i]},jq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Pq={any:[/1/i,/2/i,/3/i,/4/i]},Dq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lq={ordinalNumber:Nq({matchPattern:Aq,parsePattern:Tq,valueCallback:t=>parseInt(t,10)}),era:Ml({matchPatterns:kq,defaultMatchWidth:"wide",parsePatterns:Iq,defaultParseWidth:"any"}),quarter:Ml({matchPatterns:jq,defaultMatchWidth:"wide",parsePatterns:Pq,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ml({matchPatterns:Dq,defaultMatchWidth:"wide",parsePatterns:Rq,defaultParseWidth:"any"}),day:Ml({matchPatterns:Mq,defaultMatchWidth:"wide",parsePatterns:Oq,defaultParseWidth:"any"}),dayPeriod:Ml({matchPatterns:Fq,defaultMatchWidth:"any",parsePatterns:Bq,defaultParseWidth:"any"})},lI={code:"en-US",formatDistance:cq,formatLong:fq,formatRelative:pq,localize:Eq,match:Lq,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vq(t,e){const n=Ct(t,e==null?void 0:e.in);return KW(n,aq(n))+1}function Uq(t,e){const n=Ct(t,e==null?void 0:e.in),r=+yf(n)-+YW(n);return Math.round(r/oI)+1}function cI(t,e){var d,f,m,p;const n=Ct(t,e==null?void 0:e.in),r=n.getFullYear(),s=Iu(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=os((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=eu(o,e),c=os((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=eu(c,e);return+n>=+a?r+1:+n>=+u?r:r-1}function zq(t,e){var a,c,u,d;const n=Iu(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=cI(t,e),i=os((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),eu(i,e)}function $q(t,e){const n=Ct(t,e==null?void 0:e.in),r=+eu(n,e)-+zq(n,e);return Math.round(r/oI)+1}function Ie(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Cs={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ie(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ie(n+1,2)},d(t,e){return Ie(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ie(t.getHours()%12||12,e.length)},H(t,e){return Ie(t.getHours(),e.length)},m(t,e){return Ie(t.getMinutes(),e.length)},s(t,e){return Ie(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ie(s,e.length)}},Vo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nC={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Cs.y(t,e)},Y:function(t,e,n,r){const s=cI(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Ie(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ie(i,e.length)},R:function(t,e){const n=aI(t);return Ie(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ie(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ie(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ie(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Cs.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ie(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=$q(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Ie(s,e.length)},I:function(t,e,n){const r=Uq(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ie(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Cs.d(t,e)},D:function(t,e,n){const r=Vq(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ie(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ie(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ie(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ie(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Vo.noon:r===0?s=Vo.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Vo.evening:r>=12?s=Vo.afternoon:r>=4?s=Vo.morning:s=Vo.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Cs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Cs.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ie(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ie(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Cs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Cs.s(t,e)},S:function(t,e){return Cs.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return sC(r);case"XXXX":case"XX":return Vi(r);case"XXXXX":case"XXX":default:return Vi(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return sC(r);case"xxxx":case"xx":return Vi(r);case"xxxxx":case"xxx":default:return Vi(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+rC(r,":");case"OOOO":default:return"GMT"+Vi(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+rC(r,":");case"zzzz":default:return"GMT"+Vi(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ie(r,e.length)},T:function(t,e,n){return Ie(+t,e.length)}};function rC(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Ie(i,2)}function sC(t,e){return t%60===0?(t>0?"-":"+")+Ie(Math.abs(t)/60,2):Vi(t,e)}function Vi(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ie(Math.trunc(r/60),2),i=Ie(r%60,2);return n+s+e+i}const iC=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uI=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Hq=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return iC(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",iC(r,e)).replace("{{time}}",uI(s,e))},Wq={p:uI,P:Hq},qq=/^D+$/,Gq=/^Y+$/,Kq=["D","DD","YY","YYYY"];function Yq(t){return qq.test(t)}function Qq(t){return Gq.test(t)}function Xq(t,e,n){const r=Jq(t,e,n);if(console.warn(r),Kq.includes(t))throw new RangeError(r)}function Jq(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Zq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tG=/^'([^]*?)'?$/,nG=/''/g,rG=/[a-zA-Z]/;function oC(t,e,n){var d,f,m,p,x,_,v,S;const r=Iu(),s=(n==null?void 0:n.locale)??r.locale??lI,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((_=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((S=(v=r.locale)==null?void 0:v.options)==null?void 0:S.weekStartsOn)??0,a=Ct(t,n==null?void 0:n.in);if(!JW(a))throw new RangeError("Invalid time value");let c=e.match(eG).map(y=>{const b=y[0];if(b==="p"||b==="P"){const E=Wq[b];return E(y,s.formatLong)}return y}).join("").match(Zq).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:sG(y)};if(nC[b])return{isToken:!0,value:y};if(b.match(rG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(a,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Qq(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Yq(b))&&Xq(b,e,String(t));const E=nC[b[0]];return E(a,b,s.localize,u)}).join("")}function sG(t){const e=t.match(tG);return e?e[1].replace(nG,"'"):t}function iG(t,e,n){const r=Iu(),s=(n==null?void 0:n.locale)??r.locale??lI,i=2520,o=dh(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[c,u]=C0(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),d=oq(u,c),f=(vf(u)-vf(c))/1e3,m=Math.round((d-f)/60);let p;if(m<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):m===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",m,a);if(m<45)return s.formatDistance("xMinutes",m,a);if(m<90)return s.formatDistance("aboutXHours",1,a);if(m<ZE){const x=Math.round(m/60);return s.formatDistance("aboutXHours",x,a)}else{if(m<i)return s.formatDistance("xDays",1,a);if(m<Rd){const x=Math.round(m/ZE);return s.formatDistance("xDays",x,a)}else if(m<Rd*2)return p=Math.round(m/Rd),s.formatDistance("aboutXMonths",p,a)}if(p=iq(u,c),p<12){const x=Math.round(m/Rd);return s.formatDistance("xMonths",x,a)}else{const x=p%12,_=Math.trunc(p/12);return x<3?s.formatDistance("aboutXYears",_,a):x<9?s.formatDistance("overXYears",_,a):s.formatDistance("almostXYears",_+1,a)}}function oG(t,e){return iG(t,QW(t),e)}const aG=()=>{const{getUserRole:t,getCurrentInvestorId:e}=ls(),{investors:n}=Xa(),r=t();if(!r)return l.jsx("div",{className:"flex h-full bg-gray-50 items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx(nn,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Authentication Required"}),l.jsx("p",{children:"Please log in to access the chat."})]})});let s;try{s=AT()}catch(F){return console.error("Error loading chat context:",F),l.jsx("div",{className:"flex h-full bg-gray-50 items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx(nn,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Chat Error"}),l.jsx("p",{children:"Unable to load chat functionality. Please refresh the page."})]})})}const{conversations:i,currentConversation:o,messages:a,getConversations:c,getConversationMessages:u,createConversation:d,sendMessage:f,markMessagesAsRead:m,deleteConversation:p,getUnreadCount:x,getOrCreateInvestorConversation:_,setCurrentConversation:v}=s;console.log("Chat component rendered:",{userRole:t(),currentInvestorId:e(),conversationsCount:(i==null?void 0:i.length)||0,messagesCount:(a==null?void 0:a.length)||0,investorsCount:(n==null?void 0:n.length)||0});const[S,y]=O.useState(""),[b,E]=O.useState(""),[T,k]=O.useState(null),[w,g]=O.useState(!1),A=O.useRef(null),N=e(),j=()=>{var F;(F=A.current)==null||F.scrollIntoView({behavior:"smooth"})};O.useEffect(()=>{j()},[a,T]),O.useEffect(()=>{r==="investor"&&(async()=>{const L=await _();L&&(k(L),v(L))})()},[r,N]),O.useEffect(()=>{T&&m(T.id)},[T]);const D=F=>{if(F.preventDefault(),!S.trim()||!T)return;const L=r==="admin"?"admin":"investor";f(T.id,S.trim(),L),y("")},P=F=>{k(F),v(F)},M=async(F,L)=>{F.stopPropagation(),window.confirm("Are you sure you want to delete this conversation? This action cannot be undone.")&&await p(L)&&(T==null?void 0:T.id)===L&&(k(null),v(null))},$=async()=>{if(!(!T||w)){g(!0);try{await f(T.id,"I would like to make a deposit request.","investor"),setTimeout(async()=>{await f(T.id,"Thank you for your deposit request. Our support team will review and respond within 10 hours to process your deposit.","admin"),g(!1)},1e3)}catch(F){console.error("Error processing deposit request:",F),g(!1)}}},G=async()=>{if(!(!T||w)){g(!0);try{await f(T.id,"I would like to make a withdrawal request.","investor"),setTimeout(async()=>{await f(T.id,"Thank you for your withdrawal request. Our support team will review and respond within 10 hours to process your withdrawal.","admin"),g(!1)},1e3)}catch(F){console.error("Error processing withdrawal request:",F),g(!1)}}},X=F=>{if(F&&F.includes("@"))return F;const L=n.find(W=>W.id===F);return L?L.name:"Unknown Investor"},H=(c()||[]).filter(F=>b?X(F.investorId).toLowerCase().includes(b.toLowerCase()):!0),Q=T?u(T.id)||[]:[],J=F=>{try{if(!F)return"";let L;if(F&&typeof F=="object"&&F.toDate)L=F.toDate();else if(F)L=new Date(F);else return"";if(isNaN(L.getTime()))return"";const oe=(new Date-L)/(1e3*60*60);return oe<24?oC(L,"HH:mm"):oe<48?"Yesterday":oC(L,"MMM dd")}catch(L){return console.error("Error formatting message time:",L,F),""}},V=F=>{try{if(!F)return"No messages";let L;if(F&&typeof F=="object"&&F.toDate)L=F.toDate();else if(F)L=new Date(F);else return"No messages";return isNaN(L.getTime())?"No messages":oG(L,{addSuffix:!0})}catch(L){return console.error("Error formatting timestamp:",L,F),"No messages"}};return!i&&!a?l.jsx("div",{className:"flex h-full bg-gray-50 items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx(nn,{className:"h-16 w-16 mx-auto mb-4 text-gray-300 animate-pulse"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loading chat..."}),l.jsx("p",{children:"Please wait while we load your conversations"})]})}):!c||!u?l.jsx("div",{className:"flex h-full bg-gray-50 items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx(nn,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Chat Error"}),l.jsx("p",{children:"Unable to load chat functionality. Please refresh the page."})]})}):l.jsxs("div",{className:"flex h-full bg-gray-50",children:[l.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Messages"}),l.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:l.jsx(pF,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"relative",children:[l.jsx(xF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search conversations...",value:b,onChange:F=>E(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:r==="admin"?H.length>0?H.map(F=>{const L=x(F.id),W=u(F.id).slice(-1)[0];return l.jsx("div",{onClick:()=>P(F),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${(T==null?void 0:T.id)===F.id?"bg-primary-50 border-primary-200":""}`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 border-2 border-gray-200",children:(()=>{if(F.isLiveChat)return l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-r from-blue-500 to-purple-500",children:l.jsx(nn,{className:"h-5 w-5 text-white"})});const oe=n.find(le=>le.id===F.investorId);return oe!=null&&oe.profilePicture?l.jsx("img",{src:oe.profilePicture,alt:`${X(F.investorId)}'s profile`,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(ci,{className:"h-5 w-5 text-gray-400"})})})()})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:F.isLiveChat?"Live Chat":X(F.investorId)}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:V(F.lastMessageAt)}),l.jsx("button",{onClick:oe=>M(oe,F.id),className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"Delete conversation",children:l.jsx(Hc,{className:"h-4 w-4"})})]})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:W?W.content:"No messages yet"})]}),L>0&&l.jsx(Qx,{className:"ml-2 h-4 w-4 text-green-500 flex-shrink-0"})]})},F.id)}):l.jsxs("div",{className:"p-4 text-center text-gray-500",children:[l.jsx(nn,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),l.jsx("p",{children:"No conversations yet"})]}):T&&l.jsx("div",{onClick:()=>P(T),className:"p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors bg-primary-50 border-primary-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opessocius Support Chat"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:V(T.lastMessageAt)}),l.jsx("button",{onClick:F=>M(F,T.id),className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"Delete conversation",children:l.jsx(Hc,{className:"h-4 w-4"})})]})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:"Matthew"})]}),x(T.id)>0&&l.jsx(Qx,{className:"ml-2 h-4 w-4 text-green-500 flex-shrink-0"})]})})})]}),l.jsx("div",{className:"flex-1 flex flex-col",children:T?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-primary-600 flex items-center justify-center",children:[r==="admin"?(()=>{const F=n.find(L=>L.id===T.investorId);return F!=null&&F.profilePicture?l.jsx("img",{src:F.profilePicture,alt:`${X(T.investorId)}'s profile`,className:"w-full h-full object-cover"}):l.jsx(fo,{className:"h-5 w-5 text-white"})})():l.jsx("img",{src:"/images/advisor-marcos.jpg",alt:"Matthew",className:"w-full h-full object-cover",onError:F=>{F.target.style.display="none",F.target.nextSibling.style.display="flex"}}),r!=="admin"&&l.jsx("div",{className:"w-full h-full bg-primary-600 rounded-full flex items-center justify-center",style:{display:"none"},children:l.jsx(fo,{className:"h-5 w-5 text-white"})})]}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r==="admin"?X(T.investorId):"Opessocius Support Chat"}),l.jsx("p",{className:"text-sm text-gray-500 flex items-center",children:r==="admin"?"Investor":l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Matthew"]})})]})]})})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Q.length>0?Q.map(F=>{const L=r==="admin"&&F.senderType==="admin"||r==="investor"&&F.senderType==="investor";return l.jsx("div",{className:`flex ${L?"justify-end":"justify-start"}`,children:l.jsx("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${L?"bg-primary-600 text-white":"bg-gray-200 text-gray-900"}`,children:l.jsxs("div",{className:"flex items-end space-x-2",children:[l.jsx("p",{className:"text-sm",children:F.content}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("span",{className:"text-xs opacity-70",children:J(F.timestamp)}),L&&l.jsx(aF,{className:"h-3 w-3"})]})]})})},F.id)}):l.jsxs("div",{className:"text-center text-gray-500 py-8",children:[l.jsx(nn,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),l.jsx("p",{children:"No messages yet. Start the conversation!"})]}),l.jsx("div",{ref:A})]}),r==="investor"&&l.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-3",children:l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:$,disabled:!T||w,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l.jsx(l0,{className:`h-4 w-4 ${w?"animate-spin":""}`}),l.jsx("span",{className:"text-sm font-medium",children:w?"Processing...":"Deposit"})]}),l.jsxs("button",{onClick:G,disabled:!T||w,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l.jsx(mF,{className:`h-4 w-4 ${w?"animate-spin":""}`}),l.jsx("span",{className:"text-sm font-medium",children:w?"Processing...":"Withdraw"})]})]})}),l.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:l.jsxs("form",{onSubmit:D,className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:S,onChange:F=>y(F.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:!T}),l.jsx("button",{type:"submit",disabled:!S.trim()||!T,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:l.jsx(c0,{className:"h-4 w-4"})})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx(nn,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a conversation"}),l.jsx("p",{children:"Choose a conversation from the sidebar to start messaging"})]})})})]})},lG=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),[s,i]=O.useState(null),[o,a]=O.useState("all"),[c,u]=O.useState({email:"",meetLink:"",consultationId:""}),[d,f]=O.useState(!1);O.useEffect(()=>{const E=it(he(ee,"consultations"),oA("createdAt","desc")),T=ti(E,k=>{const w=k.docs.map(g=>({id:g.id,...g.data()}));e(w),r(!1)});return()=>T()},[]);const m=async(E,T)=>{try{const k=t.find(w=>w.id===E);if(await Wn(He(ee,"consultations",E),{status:T,updatedAt:Se()}),T==="confirmed"&&k)try{const w={type:v[k.consultationType]||k.consultationType,date:y(k.date),time:b(k.time)};await Kr.sendConsultationConfirmation(k.email,k.name,w)}catch(w){console.error("Failed to send consultation confirmation email:",w)}}catch(k){console.error("Error updating consultation status:",k)}},p=async()=>{if(!c.email||!c.meetLink||!c.consultationId){alert("Please fill in all fields");return}f(!0);try{const E=t.find(k=>k.id===c.consultationId);if(!E)throw new Error("Consultation not found");const T={type:v[E.consultationType]||E.consultationType,date:y(E.date),time:b(E.time)};await Kr.sendGoogleMeetLink(c.email,E.name,T,c.meetLink),alert("Google Meet link sent successfully!"),u({email:"",meetLink:"",consultationId:""})}catch(E){console.error("Error sending Google Meet link:",E),alert("Failed to send Google Meet link: "+E.message)}finally{f(!1)}},x=E=>{switch(E){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},_=E=>{switch(E){case"pending":return l.jsx(Hr,{className:"h-4 w-4"});case"confirmed":return l.jsx(Ls,{className:"h-4 w-4"});case"cancelled":return l.jsx(nf,{className:"h-4 w-4"});case"completed":return l.jsx(Ls,{className:"h-4 w-4"});default:return l.jsx(Hr,{className:"h-4 w-4"})}},v={general:"General Consultation",portfolio:"Portfolio Review",strategy:"Investment Strategy",planning:"Financial Planning"},S=t.filter(E=>o==="all"?!0:E.status===o),y=E=>E!=null&&E.toDate?E.toDate().toLocaleDateString():E instanceof Date?E.toLocaleDateString():"N/A",b=E=>E||"N/A";return n?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultations"}),l.jsx("p",{className:"text-gray-600",children:"Manage consultation bookings"})]})}),l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((E,T)=>l.jsx("div",{className:"h-20 bg-gray-200 rounded"},T))})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultations"}),l.jsx("p",{className:"text-gray-600",children:"Manage consultation bookings and schedules"})]}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("select",{value:o,onChange:E=>a(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All Consultations"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"confirmed",children:"Confirmed"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(Ji,{className:"h-6 w-6 text-blue-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:l.jsx(Hr,{className:"h-6 w-6 text-yellow-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(E=>E.status==="pending").length})]})]})}),l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:l.jsx(Ls,{className:"h-6 w-6 text-green-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Confirmed"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(E=>E.status==="confirmed").length})]})]})}),l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(Ls,{className:"h-6 w-6 text-blue-600"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(E=>E.status==="completed").length})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Send Google Meet Link"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Send meeting link 5 minutes before consultation"})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Consultation"}),l.jsxs("select",{value:c.consultationId,onChange:E=>{const T=t.find(k=>k.id===E.target.value);u(k=>({...k,consultationId:E.target.value,email:T?T.email:""}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select a consultation..."}),t.filter(E=>E.status==="confirmed").map(E=>l.jsxs("option",{value:E.id,children:[E.name," - ",y(E.date)," ",b(E.time)]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:c.email,onChange:E=>u(T=>({...T,email:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"user@example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Meet Link"}),l.jsx("input",{type:"url",value:c.meetLink,onChange:E=>u(T=>({...T,meetLink:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"https://meet.google.com/..."})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{onClick:p,disabled:d||!c.email||!c.meetLink||!c.consultationId,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(c0,{className:"h-4 w-4 mr-2"}),"Send Google Meet Link"]})})})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Bookings"})}),l.jsx("div",{className:"divide-y divide-gray-200",children:S.length===0?l.jsxs("div",{className:"px-6 py-12 text-center",children:[l.jsx(Ji,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No consultations found"}),l.jsx("p",{className:"text-gray-600",children:"No consultation bookings match your current filter."})]}):S.map(E=>l.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center",children:l.jsx(ci,{className:"h-5 w-5 text-slate-600"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:E.name}),l.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(E.status)}`,children:[_(E.status),l.jsx("span",{className:"ml-1 capitalize",children:E.status})]})]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(ss,{className:"h-4 w-4 mr-1"}),E.email]}),E.phone&&l.jsxs("span",{className:"flex items-center",children:[l.jsx(_u,{className:"h-4 w-4 mr-1"}),E.phone]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx(Ji,{className:"h-4 w-4 mr-1"}),y(E.date)]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx(Hr,{className:"h-4 w-4 mr-1"}),b(E.time)]})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v[E.consultationType]||E.consultationType})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>i(E),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(li,{className:"h-5 w-5"})}),E.status==="pending"&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>m(E.id,"confirmed"),className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200 transition-colors",children:"Confirm"}),l.jsx("button",{onClick:()=>m(E.id,"cancelled"),className:"px-3 py-1 text-xs bg-red-100 text-red-800 rounded-full hover:bg-red-200 transition-colors",children:"Cancel"})]}),E.status==="confirmed"&&l.jsx("button",{onClick:()=>m(E.id,"completed"),className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200 transition-colors",children:"Mark Complete"})]})]})},E.id))})]}),s&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Consultation Details"}),l.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(ui,{className:"h-6 w-6 text-gray-500"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("p",{className:"text-gray-900",children:s.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsx("p",{className:"text-gray-900",children:s.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),l.jsx("p",{className:"text-gray-900",children:s.phone||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consultation Type"}),l.jsx("p",{className:"text-gray-900",children:v[s.consultationType]||s.consultationType})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("p",{className:"text-gray-900",children:y(s.date)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),l.jsx("p",{className:"text-gray-900",children:b(s.time)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(s.status)}`,children:[_(s.status),l.jsx("span",{className:"ml-1 capitalize",children:s.status})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booked On"}),l.jsx("p",{className:"text-gray-900",children:y(s.createdAt)})]})]}),s.message&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Information"}),l.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:s.message})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[l.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),s.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{m(s.id,"confirmed"),i(null)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Confirm"}),l.jsx("button",{onClick:()=>{m(s.id,"cancelled"),i(null)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]}),s.status==="confirmed"&&l.jsx("button",{onClick:()=>{m(s.id,"completed"),i(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark Complete"})]})]})]})})]})},cG=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,i]=O.useState(!1),[o,a]=O.useState(""),[c,u]=O.useState(!1),{login:d}=ls(),f=async m=>{m.preventDefault(),a(""),u(!0);try{const p=await d(t,n);if(p.success)try{const x=new Date().toLocaleString(),_={username:t,email:p.user.email||t};await Kr.sendSignInConfirmation(p.user.email||t,p.user.name||t,x,_,n)}catch(x){console.error("Failed to send sign-in confirmation email:",x)}else a(p.error)}catch{a("Login failed. Please try again.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{className:"text-center",children:l.jsxs(se,{to:"/",className:"inline-flex items-center space-x-2 text-white/80 hover:text-white transition-colors",children:[l.jsx(Ev,{className:"h-4 w-4"}),l.jsx("span",{children:"Return to Main Page"})]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-center text-3xl font-extrabold text-white",children:"Opessocius"}),l.jsx("p",{className:"mt-2 text-center text-sm text-white/70",children:"Sign in to access your investment dashboard"})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-white",children:"Username"}),l.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t,onChange:m=>e(m.target.value),className:"mt-1 block w-full px-3 py-2 border border-white/20 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your username"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:"Password"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,value:n,onChange:m=>r(m.target.value),className:"block w-full px-3 py-2 border border-white/20 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10",placeholder:"Enter your password"}),l.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s?l.jsx(ho,{className:"h-5 w-5 text-gray-400"}):l.jsx(li,{className:"h-5 w-5 text-gray-400"})})]})]})]}),o&&l.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-md",children:o}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign In"})}),l.jsx("div",{className:"text-center",children:l.jsx(se,{to:"/forgot-password",className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:"Forgot your password?"})})]})]})})},t1=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(""),[s,i]=O.useState({name:"",email:"",phone:"",message:"",consultationType:"general"}),[o,a]=O.useState(!1),[c,u]=O.useState(!1),[d,f]=O.useState(new Date),[m,p]=O.useState(!1),x=[{id:"general",label:"General Consultation",duration:30},{id:"portfolio",label:"Portfolio Review",duration:45},{id:"strategy",label:"Investment Strategy",duration:60},{id:"planning",label:"Financial Planning",duration:90}],_=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],v=A=>{const N=A.getFullYear(),j=A.getMonth(),D=new Date(N,j,1),M=new Date(N,j+1,0).getDate(),$=D.getDay(),G=[];for(let X=0;X<$;X++)G.push(null);for(let X=1;X<=M;X++){const H=new Date(N,j,X),Q=new Date().toDateString()===H.toDateString(),J=H<new Date(new Date().setHours(0,0,0,0)),V=H.getDay()===0||H.getDay()===6;G.push({date:H,day:X,isToday:Q,isPast:J,isWeekend:V,isAvailable:!J&&!V})}return G},S=A=>{A&&A.isAvailable&&(e(A.date),r(""),p(!1))},y=A=>{r(A),p(!0)},b=async A=>{if(A.preventDefault(),!(!t||!n||!s.name||!s.email)){a(!0);try{const N={...s,date:t,time:n,status:"pending",createdAt:Se(),updatedAt:Se()};await tr(he(ee,"consultations"),N),u(!0),setTimeout(()=>{u(!1),i({name:"",email:"",phone:"",message:"",consultationType:"general"}),e(null),r(""),p(!1)},3e3)}catch(N){console.error("Error booking consultation:",N)}finally{a(!1)}}},E=A=>{i({...s,[A.target.name]:A.target.value})},T=()=>{f(new Date(d.getFullYear(),d.getMonth()+1,1))},k=()=>{f(new Date(d.getFullYear(),d.getMonth()-1,1))},w=v(d),g=["January","February","March","April","May","June","July","August","September","October","November","December"];return c?l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),l.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Booking Confirmed!"}),l.jsx("p",{className:"text-white/70",children:"Your consultation has been successfully booked. We'll send you a confirmation email shortly."})]}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-auto",children:[l.jsxs("div",{className:"text-center py-6 border-b border-gray-200",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"BOOK AN APPOINTMENT"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:["Schedule Your",l.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent",children:" Appointment Now"})]}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Reserve your slot and receive an email confirmation shortly"})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-0",children:[l.jsxs("div",{className:"p-6 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsxs("div",{className:"w-10 h-10 rounded-full relative overflow-hidden bg-green-500 flex items-center justify-center",children:[l.jsx("img",{src:"/images/advisor-marcos.jpg",alt:"Advisor Marcos",className:"w-full h-full object-cover",onError:A=>{A.target.style.display="none",A.target.nextSibling.style.display="flex"}}),l.jsx("div",{className:"w-full h-full bg-green-500 rounded-full flex items-center justify-center",style:{display:"none"},children:l.jsx("span",{className:"text-white font-bold text-sm",children:"A"})})]}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Investment Specialist"}),l.jsxs("p",{className:"text-xs text-gray-600 flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Live"]})]})]}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Speak to an advisor"}),l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(Hr,{className:"h-4 w-4 text-gray-600 mr-2"}),l.jsx("span",{className:"text-sm text-gray-700",children:"30 min"})]}),l.jsx("div",{className:"space-y-2 mb-6 text-sm text-gray-700",children:l.jsx("p",{children:"Our advisory services are designed to meet your needs at every stage of your financial journey. Whether you're looking for a general consultation to answer specific questions, a portfolio review to evaluate and optimize your current investments, an investment strategy tailored to your goals and risk profile, or a comprehensive financial planning session to structure your long-term future, our experts provide clear, actionable guidance to help you make confident decisions."})})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Select a Date & Time"}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:k,className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center hover:bg-blue-200 transition-colors",children:l.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:[g[d.getMonth()]," ",d.getFullYear()]}),l.jsx("button",{onClick:T,className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center hover:bg-blue-200 transition-colors",children:l.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["SUN","MON","TUE","WED","THU","FRI","SAT"].map(A=>l.jsx("div",{className:"p-1 text-center text-xs font-medium text-gray-500 uppercase",children:A},A)),w.map((A,N)=>l.jsx("div",{className:"p-0.5",children:A?l.jsxs("button",{onClick:()=>S(A),disabled:!A.isAvailable,className:`w-8 h-8 rounded-full text-xs font-medium transition-all relative ${A.isToday?"bg-blue-500 text-white":t&&t.toDateString()===A.date.toDateString()?"bg-blue-600 text-white":A.isAvailable?"hover:bg-blue-100 text-gray-900":"text-gray-300 cursor-not-allowed"}`,children:[A.day,t&&t.toDateString()===A.date.toDateString()&&l.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-blue-600 rounded-full"})]}):l.jsx("div",{className:"w-8 h-8"})},N))]}),l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[l.jsx(cF,{className:"h-3 w-3 text-gray-500 mr-2"}),l.jsx("span",{children:"Central European Summer Time (CEST)"})]})})]}),t&&l.jsxs("div",{className:"w-32",children:[l.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),l.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:_.map(A=>l.jsx("button",{onClick:()=>y(A),className:`w-full p-2 rounded text-xs font-medium transition-all ${n===A?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:A},A))})]})]}),m&&n&&l.jsxs("form",{onSubmit:b,className:"mt-4 space-y-3 border-t border-gray-200 pt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Consultation Type"}),l.jsx("select",{name:"consultationType",value:s.consultationType,onChange:E,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:x.map(A=>l.jsxs("option",{value:A.id,children:[A.label," (",A.duration," min)"]},A.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Full Name *"}),l.jsxs("div",{className:"relative",children:[l.jsx(ci,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),l.jsx("input",{type:"text",name:"name",value:s.name,onChange:E,required:!0,className:"w-full pl-6 pr-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email Address *"}),l.jsxs("div",{className:"relative",children:[l.jsx(ss,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),l.jsx("input",{type:"email",name:"email",value:s.email,onChange:E,required:!0,className:"w-full pl-6 pr-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email address"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone Number"}),l.jsxs("div",{className:"relative",children:[l.jsx(_u,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),l.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:E,className:"w-full pl-6 pr-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Additional Information"}),l.jsxs("div",{className:"relative",children:[l.jsx(fF,{className:"absolute left-2 top-2 h-3 w-3 text-gray-400"}),l.jsx("textarea",{name:"message",value:s.message,onChange:E,rows:2,className:"w-full pl-6 pr-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Tell us about your investment goals..."})]})]}),l.jsx("button",{type:"submit",disabled:!t||!n||!s.name||!s.email||o,className:"w-full bg-blue-600 text-white py-2 px-4 rounded text-sm font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),l.jsx("span",{children:"Booking..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ji,{className:"h-3 w-3"}),l.jsx("span",{children:"Book Appointment"})]})})]})]})]})]})},ju=()=>{const[t,e]=O.useState(!1),[n,r]=O.useState(!1),[s,i]=O.useState([]),[o,a]=O.useState(""),[c,u]=O.useState(!1),[d,f]=O.useState({name:"",email:""}),[m,p]=O.useState(!0),[x,_]=O.useState(null),[v,S]=O.useState(!1),y=async k=>{try{const w=`live-chat-${Date.now()}`;return await Zd(He(ee,"chatConversations",w),{id:w,investorId:k.email,investorName:k.name,isLiveChat:!0,createdAt:Se(),lastMessageAt:Se(),isActive:!0,userInfo:k}),await tr(he(ee,"chatMessages"),{conversationId:w,content:`New live chat started by ${k.name} (${k.email})`,senderId:k.email,senderName:k.name,senderType:"user",timestamp:Se(),isRead:!1,userInfo:k}),setTimeout(async()=>{await tr(he(ee,"chatMessages"),{conversationId:w,content:`Hello ${k.name}! Thank you for reaching out to Opessocius. An advisor will be with you shortly to assist you with your investment inquiries. In the meantime, feel free to ask any questions you may have.`,senderId:"admin",senderName:"Admin",senderType:"admin",timestamp:Se(),isRead:!1}),await Zd(He(ee,"chatConversations",w),{lastMessageAt:Se()},{merge:!0})},1e3),w}catch(w){throw console.error("Error creating live chat conversation:",w),w}};O.useEffect(()=>{if(!x)return;const k=it(he(ee,"chatMessages"),oA("timestamp","asc")),w=ti(k,g=>{const A=[];g.forEach(N=>{const j={id:N.id,...N.data()};j.conversationId===x&&A.push(j)}),i(A)});return()=>w()},[x]);const b=async k=>{if(k.preventDefault(),d.name&&d.email){S(!0);try{const w=await y(d);_(w),p(!1)}catch(w){console.error("Error starting chat:",w),alert("Failed to start chat. Please try again.")}finally{S(!1)}}},E=async k=>{if(k.preventDefault(),!o.trim()||!x)return;const w={conversationId:x,content:o,senderId:d.email,senderName:d.name,senderType:"user",timestamp:Se(),isRead:!1,userInfo:d};try{await tr(he(ee,"chatMessages"),w),await Zd(He(ee,"chatConversations",x),{lastMessageAt:Se()},{merge:!0}),a("")}catch(g){console.error("Error sending message:",g)}},T=k=>k?(k.toDate?k.toDate():new Date(k)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"";return t?l.jsx("div",{className:"fixed bottom-8 right-6 z-50",children:l.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-gray-200 transition-all duration-300 ${n?"w-80 h-12":"w-80 h-96"}`,children:[l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-t-2xl p-4 text-white flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nn,{className:"h-5 w-5"}),l.jsx("span",{className:"font-semibold",children:"Live Chat"})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:l.jsx(ui,{className:"h-4 w-4"})})})]}),!n&&l.jsx(l.Fragment,{children:m?l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Start a Conversation"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Please provide your details to begin chatting"})]}),l.jsxs("form",{onSubmit:b,className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),l.jsx("input",{type:"text",value:d.name,onChange:k=>f({...d,name:k.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent text-sm",placeholder:"Your name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),l.jsx("input",{type:"email",value:d.email,onChange:k=>f({...d,email:k.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent text-sm",placeholder:"your@email.com"})]}),l.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-slate-800 to-slate-700 text-white py-2 px-4 rounded-lg font-semibold hover:from-slate-700 hover:to-slate-600 transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed border border-slate-600",children:v?"Starting Chat...":"Start Chat"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 p-4 h-64 overflow-y-auto",children:s.length===0?l.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[l.jsx(nn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No messages yet. Start the conversation!"})]}):l.jsxs("div",{className:"space-y-3",children:[s.map((k,w)=>l.jsx("div",{className:`flex ${k.senderType==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg text-sm ${k.senderType==="user"?"bg-gradient-to-r from-slate-800 to-slate-700 text-white":"bg-gray-100 text-gray-800"}`,children:[l.jsx("p",{children:k.content}),l.jsx("p",{className:`text-xs mt-1 ${k.senderType==="user"?"text-slate-200":"text-gray-500"}`,children:T(k.timestamp)})]})},k.id||w)),c&&l.jsx("div",{className:"flex justify-start",children:l.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]})}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("form",{onSubmit:E,className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:o,onChange:k=>a(k.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent text-sm"}),l.jsx("button",{type:"submit",disabled:!o.trim(),className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-2 rounded-lg hover:from-slate-700 hover:to-slate-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-600",children:l.jsx(c0,{className:"h-4 w-4"})})]})})]})})]})}):l.jsx("div",{className:"fixed bottom-8 right-6 z-50",children:l.jsx("button",{onClick:()=>e(!0),className:"w-14 h-14 bg-gradient-to-r from-slate-800 to-slate-700 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center text-white hover:scale-110 border border-slate-600",children:l.jsx(nn,{className:"h-6 w-6"})})})},Md=(t=.1)=>{const e=O.useRef(null);return O.useEffect(()=>{const n=new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting&&i.target.classList.add("animate")})},{threshold:t,rootMargin:"0px 0px -50px 0px"}),r=e.current;return r&&n.observe(r),()=>{r&&n.unobserve(r)}},[t]),e},uG=()=>(Md(),Md(),Md(),Md(),O.useEffect(()=>{const t=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&r.target.classList.add("in-view")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"}),e=document.querySelectorAll(".animate-on-scroll");return e.forEach(n=>t.observe(n)),()=>{e.forEach(n=>t.unobserve(n))}},[]),l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white",children:"Opessocius"})}),l.jsxs("div",{className:"flex items-center space-x-8",children:[l.jsx(se,{to:"/",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Home"}),l.jsx(se,{to:"/about",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"About"}),l.jsx(se,{to:"/calculator",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Calculator"}),l.jsx(se,{to:"/contact",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Contact"}),l.jsxs(se,{to:"/login",className:"bg-white text-black px-6 py-2 rounded-full font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",onClick:()=>window.scrollTo(0,0),children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-4 w-4"})]})]})]})})}),l.jsx("section",{className:"pt-32 pb-24 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-10 leading-relaxed",style:{lineHeight:"1.3"},children:["Opessocius is redefining",l.jsx("span",{className:"block bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent",children:"portfolio management"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-white/80 mb-12 max-w-4xl mx-auto leading-relaxed",children:"Opessocius is redefining portfolio management with live performance tracking and transparent monthly reporting — giving investors clarity and control like never before."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(se,{to:"/register",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all text-lg border border-blue-400",children:[l.jsx("span",{children:"Get Started Today"}),l.jsx(dt,{className:"h-5 w-5"})]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-100 transition-all text-lg border border-slate-200",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-5 w-5"})]})]})]})}),l.jsx("section",{className:"py-1 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white text-center mb-8 mt-8",children:"Why Choose Opessocius"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(gt,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Real-Time & Monthly Insights"}),l.jsx("p",{className:"text-white/70",children:"Track your portfolio with live performance data, advanced charts, and comprehensive analytics — monthly updates."})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(DT,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Secure, Transparent & Certified"}),l.jsx("p",{className:"text-white/70",children:"Your capital is safeguarded with enterprise-grade security. All transactions, and payments are fully transparent and handled by certified Trading 212 ®."})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(fo,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Dedicated Advisor Support"}),l.jsx("p",{className:"text-white/70",children:"Every investor is provided with a personal advisor for tailored investment and direct communication through our integrated chat system."})]})]})]})}),l.jsx("section",{className:"py-4 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 animate-on-scroll",children:[l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"€350k+"}),l.jsx("div",{className:"text-white/70",children:"Assets Under Management"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 animate-on-scroll",children:[l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"23+"}),l.jsx("div",{className:"text-white/70",children:"Active Investors"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 animate-on-scroll",children:[l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"70.2%"}),l.jsx("div",{className:"text-white/70",children:"Annual Return Record"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 animate-on-scroll",children:[l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"24/7"}),l.jsx("div",{className:"text-white/70",children:"Support Available"})]})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Book a Free Consultation"}),l.jsx("p",{className:"text-lg text-white/80",children:"Schedule a personalized consultation with our investment experts to discuss your financial goals and explore our services."})]}),l.jsx(t1,{})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Start Your Investment Journey?"}),l.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Join thousands of successful investors who trust Opessocius with their portfolios."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(se,{to:"/register",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all text-lg border border-blue-400",children:[l.jsx("span",{children:"Get Started Today"}),l.jsx(dt,{className:"h-5 w-5"})]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-100 transition-all text-lg border border-slate-200",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-5 w-5"})]})]})]})}),l.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 border-t border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto text-center",children:l.jsx("p",{className:"text-white/50",children:"© 2025 Opessocius. All rights reserved. Investment services provided under applicable regulatory licenses."})})}),l.jsx(ju,{})]})),dG=()=>{const[t,e]=O.useState(0),n=[{id:1,name:"Sarah Jansen",role:"Retirement Investor",rating:5,text:"Opessocius has transformed my retirement planning. The transparency and consistent returns have given me confidence in my financial future. I've seen my portfolio grow steadily month after month.",avatar:"SJ",image:"/images/InvestorSara.jpg"},{id:2,name:"Jaime Garcia",role:"Tech Entrepreneur",rating:5,text:"As someone who's always been skeptical of investment platforms, Opessocius has completely changed my perspective. The real-time tracking and professional approach make all the difference.",avatar:"JG",image:"/images/InvestorJaime.jpg"},{id:3,name:"Manuel Lopez",role:"Small Business Owner",rating:5,text:"I was looking for a reliable investment partner for my business profits. Opessocius delivered beyond my expectations. The monthly reports are detailed and the growth has been impressive.",avatar:"ML",image:"/images/InvestorManuel.jpg"},{id:4,name:"Ali Khan",role:"Real Estate Investor",rating:5,text:"After trying several investment platforms, Opessocius stands out for its transparency and performance. The compound interest strategy has significantly boosted my returns.",avatar:"AK",image:"/images/InvestorToby.jpg"},{id:5,name:"Elias Mulder",role:"Healthcare Professional",rating:5,text:"The passive investment option with Opessocius has been perfect for my busy schedule. I can focus on my career while knowing my money is working hard for me.",avatar:"EM",image:"/images/Investorelias.jpg"},{id:6,name:"Elmira Ortez",role:"Retired Teacher",rating:5,text:"I was worried about investing at my age, but Opessocius made it simple and secure. The regular updates and professional support have given me peace of mind.",avatar:"EO",image:"/images/InvestorElmira.jpg"}];O.useEffect(()=>{const o=setInterval(()=>{e(a=>(a+1)%n.length)},3e3);return()=>clearInterval(o)},[n.length]),O.useEffect(()=>{const o=new IntersectionObserver(a=>{a.forEach(c=>{c.isIntersecting&&(console.log("Section in view:",c.target),c.target.querySelectorAll(".animate-on-scroll").forEach((d,f)=>{setTimeout(()=>{console.log("Animating element:",d),d.classList.add("in-view")},f*200)}))})},{threshold:.2,rootMargin:"0px 0px -100px 0px"});return s.current&&(console.log("Observing Core Values section"),o.observe(s.current)),i.current&&(console.log("Observing Expertise section"),o.observe(i.current)),()=>{s.current&&o.unobserve(s.current),i.current&&o.unobserve(i.current)}},[]);const r=n[t],s=O.useRef(null),i=O.useRef(null);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white",children:"Opessocius"})}),l.jsxs("div",{className:"flex items-center space-x-8",children:[l.jsx(se,{to:"/",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Home"}),l.jsx(se,{to:"/about",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"About"}),l.jsx(se,{to:"/calculator",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Calculator"}),l.jsx(se,{to:"/contact",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Contact"}),l.jsxs(se,{to:"/login",className:"bg-white text-black px-6 py-2 rounded-full font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",onClick:()=>window.scrollTo(0,0),children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-4 w-4"})]})]})]})})}),l.jsx("section",{className:"pt-32 pb-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["About",l.jsx("span",{className:"block bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent",children:"Opessocius"})]}),l.jsx("p",{className:"text-2xl md:text-3xl text-white/80 mb-12 max-w-4xl mx-auto leading-relaxed",children:"We are a leading investment management platform dedicated to providing transparent, data-driven investment strategies for discerning investors worldwide."})]})}),l.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white text-center mb-16",children:"What Our Investors Say"}),l.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10 relative overflow-hidden",children:[l.jsxs("div",{className:"text-center relative z-10",children:[l.jsx("div",{className:"flex justify-center mb-6",children:[...Array(r.rating)].map((o,a)=>l.jsx(yF,{className:"h-6 w-6 text-yellow-400 fill-current"},a))}),l.jsxs("blockquote",{className:"text-lg md:text-xl text-white/90 mb-8 leading-relaxed italic",children:['"',r.text,'"']}),l.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[l.jsxs("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center",children:[r.image?l.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}):null,l.jsx("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center",style:{display:r.image?"none":"flex"},children:l.jsx("span",{className:"text-white font-bold text-sm",children:r.avatar})})]}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-white font-semibold",children:r.name}),l.jsx("div",{className:"text-white/70 text-sm",children:r.role})]})]})]}),l.jsx("div",{className:"flex justify-center mt-8 space-x-2",children:n.map((o,a)=>l.jsx("button",{onClick:()=>e(a),className:`w-3 h-3 rounded-full transition-all ${a===t?"bg-white":"bg-white/30 hover:bg-white/50"}`},a))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[l.jsxs("div",{className:"text-center p-6 rounded-xl bg-white/5 border border-white/10",children:[l.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"4.9/5"}),l.jsx("div",{className:"text-white/70 text-sm",children:"Average Rating"})]}),l.jsxs("div",{className:"text-center p-6 rounded-xl bg-white/5 border border-white/10",children:[l.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"23+"}),l.jsx("div",{className:"text-white/70 text-sm",children:"Happy Investors"})]}),l.jsxs("div",{className:"text-center p-6 rounded-xl bg-white/5 border border-white/10",children:[l.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"98%"}),l.jsx("div",{className:"text-white/70 text-sm",children:"Satisfaction Rate"})]})]})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-8",children:"Our Mission"}),l.jsx("p",{className:"text-xl text-white/80 leading-relaxed",children:"To redefine individual investing by delivering the precision, transparency, and strategic insight once reserved for institutions, enabling clients to navigate markets with clarity and achieve lasting success."})]})}),l.jsx("section",{ref:s,className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white text-center mb-16",children:"Our Core Values"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow animate-on-scroll",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(iF,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Excellence"}),l.jsx("p",{className:"text-white/70",children:"We pursue excellence in every aspect — from our investment strategies to customer service and platform development — outperforming industry standards."})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow animate-on-scroll",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(DT,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Transparency"}),l.jsx("p",{className:"text-white/70",children:"We maintain complete transparency in our operations, performance metrics, and investment decisions, supported by active social media engagement."})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow animate-on-scroll",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(vF,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Innovation"}),l.jsx("p",{className:"text-white/70",children:"We continually advance our platform and strategies, integrating AI-powered trading bots to deliver cutting-edge solutions that keep our investors ahead in the market."})]})]})]})}),l.jsx("section",{ref:i,className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white text-center mb-16",children:"Our Expertise"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow animate-on-scroll",children:[l.jsx("div",{className:"text-4xl font-bold text-slate-300 mb-4",children:"7+"}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Years Experience"}),l.jsx("p",{className:"text-white/70",children:"In investment management"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow animate-on-scroll",children:[l.jsx("div",{className:"text-4xl font-bold text-slate-300 mb-4",children:"5+"}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Investment Experts"}),l.jsx("p",{className:"text-white/70",children:"Certified professionals"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow animate-on-scroll",children:[l.jsx("div",{className:"text-4xl font-bold text-slate-300 mb-4",children:"95%"}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Investor Retention Rate"}),l.jsx("p",{className:"text-white/70",children:"Clients who continue investing with us"})]})]})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Start Your Investment Journey?"}),l.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Join thousands of successful investors who trust Opessocius with their portfolios."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(se,{to:"/register",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all text-lg border border-blue-400",children:[l.jsx("span",{children:"Get Started Today"}),l.jsx(dt,{className:"h-5 w-5"})]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-100 transition-all text-lg border border-slate-200",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-5 w-5"})]})]})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Book a Free Consultation"}),l.jsx("p",{className:"text-lg text-white/80",children:"Schedule a personalized consultation with our investment experts to discuss your financial goals and explore our services."})]}),l.jsx(t1,{})]})}),l.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 border-t border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto text-center",children:l.jsx("p",{className:"text-white/50",children:"© 2024 Opessocius. All rights reserved. Professional investment management services."})})}),l.jsx(ju,{})]})};Ja.register(Yc,Qc,ya,xr,zv,$v,Uv,Vv);const hG=()=>{const t=O.useMemo(()=>({labels:[2018,2019,2020,2021,2022,2023,2024,2025],datasets:[{label:"Total Investments (€)",data:[25e3,45e3,75e3,12e4,18e4,24e4,28e4,31e4],borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgb(99, 102, 241)",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(99, 102, 241)",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:3}]}),[]),e=O.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"rgba(99, 102, 241, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(n){return`€${n.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:"#6b7280",font:{size:12,weight:"500"}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12,weight:"500"},callback:function(n){return"€"+n/1e3+"K"}}}},interaction:{intersect:!1,mode:"index"},elements:{point:{hoverRadius:8}}}),[]);return l.jsxs("div",{className:"w-full h-96 bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Investment Growth"}),l.jsx("p",{className:"text-white/70",children:"Total investments from 2018 to 2025"})]}),l.jsx("div",{className:"h-80",children:l.jsx(Hv,{data:t,options:e})}),l.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg border border-white/10",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:"€25K"}),l.jsx("div",{className:"text-white/70 text-sm",children:"Starting 2018"})]}),l.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg border border-white/10",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"€310K"}),l.jsx("div",{className:"text-white/70 text-sm",children:"Projected 2025"})]})]})]})},fG=()=>{const t=[{year:2020,return:22.5,benchmark:18.2},{year:2021,return:38.7,benchmark:21.1},{year:2022,return:45.3,benchmark:26.8},{year:2023,return:42.1,benchmark:32.4},{year:2024,return:75.2,benchmark:45.7}];return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white",children:"Opessocius"})}),l.jsxs("div",{className:"flex items-center space-x-8",children:[l.jsx(se,{to:"/",className:"text-white/80 hover:text-white transition-colors",children:"Home"}),l.jsx(se,{to:"/about",className:"text-white/80 hover:text-white transition-colors",children:"About"}),l.jsx(se,{to:"/calculator",className:"text-white/80 hover:text-white transition-colors",children:"Calculator"}),l.jsx(se,{to:"/contact",className:"text-white/80 hover:text-white transition-colors",children:"Contact"}),l.jsxs(se,{to:"/login",className:"bg-white text-black px-6 py-2 rounded-full font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-4 w-4"})]})]})]})})}),l.jsx("section",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["Investment",l.jsx("span",{className:"block bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent",children:"Performance"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-white/80 mb-12 max-w-4xl mx-auto leading-relaxed",children:"Discover our track record of consistent, above-market returns. Transparent performance data that speaks for itself."})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(gt,{className:"h-12 w-12 text-slate-300"})}),l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"41.5%"}),l.jsx("div",{className:"text-white/70",children:"Average Annual Return"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(_v,{className:"h-12 w-12 text-slate-300"})}),l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"+12%"}),l.jsx("div",{className:"text-white/70",children:"vs Market Benchmark"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(lF,{className:"h-12 w-12 text-slate-300"})}),l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"€300k+"}),l.jsx("div",{className:"text-white/70",children:"Assets Under Management"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(Ji,{className:"h-12 w-12 text-slate-300"})}),l.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"3+"}),l.jsx("div",{className:"text-white/70",children:"Years Track Record"})]})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white text-center mb-16",children:"Annual Performance"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[l.jsx("div",{children:l.jsx("div",{className:"space-y-6",children:t.map((e,n)=>l.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold",children:e.year})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-semibold",children:e.year}),l.jsx("div",{className:"text-white/60 text-sm",children:"vs Benchmark"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["+",e.return,"%"]}),l.jsxs("div",{className:"text-white/60 text-sm",children:["Benchmark: +",e.benchmark,"%"]})]})]},e.year))})}),l.jsx("div",{className:"relative",children:l.jsx(hG,{})})]})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-8",children:"Our Investment Strategy"}),l.jsx("p",{className:"text-xl text-white/80 mb-8 leading-relaxed",children:"We employ a diversified, data-driven approach that combines traditional investment principles with advanced AI and machine learning–driven trading systems, real-time market status monitoring, and rigorous market analysis."}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-slate-400 rounded-full"}),l.jsx("span",{className:"text-white/90",children:"Diversified portfolio allocation"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-slate-500 rounded-full"}),l.jsx("span",{className:"text-white/90",children:"Risk-adjusted return optimization"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-slate-600 rounded-full"}),l.jsx("span",{className:"text-white/90",children:"Real-time market monitoring"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-slate-700 rounded-full"}),l.jsx("span",{className:"text-white/90",children:"Dynamic rebalancing strategies"})]})]})]}),l.jsx("div",{className:"relative",children:l.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border border-white/10 flex items-center justify-center",children:l.jsx(RT,{className:"h-24 w-24 text-white/60"})})})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Access Your Personal Dashboard?"}),l.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Get real-time access to your portfolio performance, detailed analytics, and expert insights."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(se,{to:"/register",className:"inline-flex items-center space-x-2 bg-slate-800 text-white px-8 py-4 rounded-full font-semibold hover:bg-slate-700 transition-all text-lg border border-slate-600",children:[l.jsx("span",{children:"Get Started Today"}),l.jsx(dt,{className:"h-5 w-5"})]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-100 transition-all text-lg border border-slate-200",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-5 w-5"})]})]})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsx(t1,{})})}),l.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 border-t border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto text-center",children:l.jsx("p",{className:"text-white/50",children:"© 2024 Opessocius. All rights reserved. Professional investment management services."})})}),l.jsx(ju,{})]})};Ja.register(Yc,Qc,ya,xr,zv,$v,Uv,Vv);const mG=()=>{var w;const[t,e]=O.useState("passive"),[n,r]=O.useState(1e5),[s,i]=O.useState(1e4),[o,a]=O.useState(1e3),[c,u]=O.useState(3);O.useState(!1);const d=[{id:"passive",name:"Passive",growth:2,description:"Fixed growth: 2% monthly",icon:gt,color:"bg-green-500"},{id:"active",name:"Active",growth:4,description:"Fixed growth: 4% monthly",icon:_v,color:"bg-blue-500"}],f=[{value:1,label:"1 Year"},{value:3,label:"3 Years"},{value:5,label:"5 Years"}],m=O.useMemo(()=>{const A=d.find(P=>P.id===t).growth/100,N=c*12,j=[];let D=s;for(let P=0;P<=N;P++)P>0&&(D=D*(1+A),D+=o),j.push({month:P,balance:D,year:Math.floor(P/12),monthOfYear:P%12});return j},[t,s,o,c]),p=O.useMemo(()=>{const g=c*12,A=[];for(let N=0;N<=g;N++){const j=s+o*N,D=s*.02*N,P=j+D;A.push({month:N,balance:P,year:Math.floor(N/12),monthOfYear:N%12})}return A},[s,o,c]),x=O.useMemo(()=>{const g=m.map((j,D)=>{if(D===0)return"Start";const P=Math.floor(j.month/12);return`${j.month%12+1}/${P+1}`}),A=m.map(j=>j.balance),N=p.map(j=>j.balance);return{labels:g,datasets:[{label:"With Compound Interest",data:A,borderColor:t==="passive"?"rgb(34, 197, 94)":"rgb(59, 130, 246)",backgroundColor:t==="passive"?"rgba(34, 197, 94, 0.1)":"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,pointRadius:3,pointHoverRadius:6},{label:"Without Compound Interest",data:N,borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",fill:!1,tension:.4,pointRadius:2,pointHoverRadius:4,borderDash:[5,5]}]}},[m,p,t]),_={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0,padding:20}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(g){return`${g.dataset.label}: €${g.parsed.y.toLocaleString("de-DE",{minimumFractionDigits:0,maximumFractionDigits:0})}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Time Period",color:"white"},grid:{display:!1},ticks:{color:"white"}},y:{display:!0,title:{display:!0,text:"Investment Value (€)",color:"white"},ticks:{callback:function(g){return"€"+g.toLocaleString("de-DE")},color:"white"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},v=s+o*c*12,S=((w=m[m.length-1])==null?void 0:w.balance)||0,y=S-v,b=(S-v)/v*100,E=S-n,T=S>=n,k=[{icon:fo,value:"78%",label:"of investors choose Passive",color:"text-green-500"},{icon:gt,value:"62%",label:"have recurring investments",color:"text-blue-500"},{icon:Hr,value:"12%",label:"max monthly withdrawals",color:"text-purple-500"}];return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white",children:"Opessocius"})}),l.jsxs("div",{className:"flex items-center space-x-8",children:[l.jsx(se,{to:"/",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Home"}),l.jsx(se,{to:"/about",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"About"}),l.jsx(se,{to:"/calculator",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Calculator"}),l.jsx(se,{to:"/contact",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Contact"}),l.jsxs(se,{to:"/login",className:"bg-white text-black px-6 py-2 rounded-full font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",onClick:()=>window.scrollTo(0,0),children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-4 w-4"})]})]})]})})}),l.jsx("section",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["Investment",l.jsx("span",{className:"block bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent",children:"Calculator"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-white/80 mb-6 max-w-4xl mx-auto leading-relaxed",children:"Calculate your potential returns with our advanced investment simulator. See how your money can grow with different strategies."})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-6xl mx-auto",children:l.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Investment Type"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(g=>{const A=g.icon;return l.jsx("button",{onClick:()=>e(g.id),className:`p-6 rounded-2xl border-2 transition-all ${t===g.id?"border-blue-400 bg-blue-400/10":"border-white/10 bg-white/5 hover:bg-white/10"}`,children:l.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[l.jsx("div",{className:`w-10 h-10 ${g.color} rounded-full flex items-center justify-center`,children:l.jsx(A,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:g.name}),l.jsx("p",{className:"text-white/70 text-sm",children:g.description})]})]})},g.id)})}),l.jsxs("div",{className:"mt-6",children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"What's Your Target Goal? (€)"}),l.jsxs("div",{className:"relative",children:[l.jsx(RT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:"number",value:n,onChange:g=>r(Number(g.target.value)),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"100000"})]})]})]}),l.jsx("div",{children:l.jsxs("div",{className:"mt-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Investment Details"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Initial Investment (€)"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 font-bold",children:"€"}),l.jsx("input",{type:"number",value:s,onChange:g=>i(Number(g.target.value)),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"10000"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Monthly Recurring Investment (€)"}),l.jsxs("div",{className:"relative",children:[l.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:"number",value:o,onChange:g=>a(Number(g.target.value)),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"1000"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Duration"}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:f.map(g=>l.jsx("button",{onClick:()=>u(g.value),className:`p-3 rounded-lg border-2 transition-all ${c===g.value?"border-blue-400 bg-blue-400/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"}`,children:g.label},g.value))})]}),l.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10 mt-25",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center",children:[l.jsx("img",{src:"/images/advisorMarcos.jpg",alt:"Advisor Marcos",className:"w-full h-full object-cover",onError:g=>{g.target.style.display="none",g.target.nextSibling.style.display="flex"}}),l.jsx("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center",style:{display:"none"},children:l.jsx("span",{className:"text-white font-bold text-lg",children:"M"})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Advisor Marcos"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-green-400 text-sm font-medium",children:"● Live"}),l.jsx("span",{className:"text-white/70 text-sm",children:"Investment Specialist"})]})]})]}),l.jsx("p",{className:"text-white/80 text-sm mb-4",children:"Ready to help you start your investment journey today. Create your account and let's build your financial future together."}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(se,{to:"/register",className:"w-full bg-gradient-to-r from-slate-800 to-slate-700 text-white py-2 px-4 rounded-lg font-semibold hover:from-slate-700 hover:to-slate-600 transition-all duration-200 text-sm border border-slate-600 flex items-center justify-center space-x-2",children:[l.jsx("span",{children:"Start Your Investment Today"}),l.jsx(dt,{className:"h-4 w-4"})]}),l.jsx("button",{onClick:()=>window.location.href="/contact",className:"w-full bg-white/10 text-white py-2 px-4 rounded-lg font-semibold hover:bg-white/20 transition-all duration-200 text-sm border border-white/20",children:"Any Questions? Contact Us"})]})]})]})]})})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Growth Projection"}),l.jsx("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:l.jsx("div",{className:"h-96",children:l.jsx(Hv,{data:x,options:_})})})]}),l.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[l.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Goal Progress"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Target Goal:"}),l.jsxs("span",{className:"text-white font-semibold",children:["€",n.toLocaleString("de-DE")]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:T?"Surplus to Goal:":"Deficit to Goal:"}),l.jsxs("span",{className:`font-semibold ${T?"text-green-400":"text-red-400"}`,children:[T?"+":"-","€",Math.abs(E).toLocaleString("de-DE",{maximumFractionDigits:0})]})]}),l.jsx("div",{className:"mt-3 p-3 rounded-lg bg-white/5",children:l.jsx("div",{className:"text-center",children:l.jsx("span",{className:`text-sm font-medium ${T?"text-green-400":"text-red-400"}`,children:T?`🎉 You'll exceed your goal by €${E.toLocaleString("de-DE",{maximumFractionDigits:0})}!`:`📈 You need €${Math.abs(E).toLocaleString("de-DE",{maximumFractionDigits:0})} more to reach your goal`})})})]})]}),l.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Investment Summary"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-white/70",children:"Total Investment:"}),l.jsxs("span",{className:"text-white font-semibold",children:["€",v.toLocaleString("de-DE")]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-white/70",children:"Final Value:"}),l.jsxs("span",{className:"text-white font-semibold",children:["€",S.toLocaleString("de-DE",{maximumFractionDigits:0})]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-white/70",children:"Total Growth:"}),l.jsxs("span",{className:"text-green-400 font-semibold",children:["€",y.toLocaleString("de-DE",{maximumFractionDigits:0})]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-white/70",children:"Growth %:"}),l.jsxs("span",{className:"text-green-400 font-semibold",children:["+",b.toFixed(1),"%"]})]})]})]})]})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Investment Information"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-green-400 font-bold text-lg",children:"€"})}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Deposits"}),l.jsx("p",{className:"text-white/70 text-sm",children:"Supported via any payment method — crypto, all major currencies, and other common methods."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Hr,{className:"h-6 w-6 text-blue-400"})}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Setup Time"}),l.jsx("p",{className:"text-white/70 text-sm",children:"It takes up to 7 days from receiving capital for full setup."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(gt,{className:"h-6 w-6 text-purple-400"})}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Withdrawals"}),l.jsx("p",{className:"text-white/70 text-sm",children:"After the minimum 6-month contract period, investors can withdraw funds monthly with prior notice."})]})]})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-12",children:"Investment Statistics"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:k.map((g,A)=>{const N=g.icon;return l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(N,{className:`h-12 w-12 ${g.color}`})}),l.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:g.value}),l.jsx("div",{className:"text-white/70",children:g.label})]},A)})})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Start Your Investment Journey?"}),l.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Join thousands of successful investors who trust Opessocius with their portfolios."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(se,{to:"/register",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all text-lg border border-blue-400",children:[l.jsx("span",{children:"Get Started Today"}),l.jsx(dt,{className:"h-5 w-5"})]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-100 transition-all text-lg border border-slate-200",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-5 w-5"})]})]})]})}),l.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 border-t border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto text-center",children:l.jsx("p",{className:"text-white/50",children:"© 2024 Opessocius. All rights reserved. Professional investment management services."})})}),l.jsx(ju,{})]})},pG=({isOpen:t,onClose:e})=>{const[n,r]=O.useState([]),[s,i]=O.useState(""),[o,a]=O.useState(!1),[c,u]=O.useState({name:"",email:"",phone:""}),[d,f]=O.useState(!0),[m,p]=O.useState(null),[x,_]=O.useState(!1);O.useEffect(()=>{if(m){(async()=>{try{const E=await pt.getMessages(m);r(E)}catch(E){console.error("Error loading messages:",E)}})();const b=pt.onMessagesChange(m,E=>{r(E)});return()=>{b&&b()}}},[m]);const v=async y=>{if(y.preventDefault(),!(!s.trim()||!m)){_(!0);try{const b={conversationId:m,content:s,senderId:c.email,senderName:c.name,senderType:"live_chat_user",isRead:!1};await pt.sendMessage(b),i("")}catch(b){console.error("Error sending message:",b);const E={id:Date.now(),content:s,sender:"user",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};r(T=>[...T,E]),i("")}finally{_(!1)}}},S=async y=>{if(y.preventDefault(),c.name&&c.email){_(!0);try{const b={id:`live_chat_${Date.now()}`,investorId:c.email,investorName:`${c.name} (Live Chat)`,createdAt:new Date().toISOString(),lastMessageAt:new Date().toISOString(),isActive:!0,isLiveChat:!0};await pt.createConversation(b),p(b.id);const E={conversationId:b.id,content:"Hello! Welcome to Opessocius. How can I help you today?",senderId:"admin",senderName:"Admin",senderType:"admin",isRead:!1};await pt.sendMessage(E),f(!1)}catch(b){console.error("Error creating conversation:",b),f(!1);const E={id:Date.now(),content:`New chat started by ${c.name} (${c.email})`,sender:"system",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};r(T=>[E])}finally{_(!1)}}};return t?l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center",children:l.jsx(nn,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Live Chat"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Opessocius Support"})]})]}),l.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ui,{className:"h-5 w-5"})})]}),d&&l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("form",{onSubmit:S,className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name *"}),l.jsx("input",{type:"text",value:c.name,onChange:y=>u(b=>({...b,name:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your name",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),l.jsx("input",{type:"email",value:c.email,onChange:y=>u(b=>({...b,email:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),l.jsx("input",{type:"tel",value:c.phone,onChange:y=>u(b=>({...b,phone:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number"})]}),l.jsx("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-2 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Starting Chat...":"Start Chat"})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 max-h-96",children:[n.map(y=>{var T;const b=y.senderType==="live_chat_user"||y.senderId===c.email;y.senderType;const E=y.senderType==="system";return l.jsx("div",{className:`flex ${b?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${b?"bg-gradient-to-r from-blue-500 to-green-500 text-white":E?"bg-gray-100 text-gray-600 text-xs":"bg-gray-100 text-gray-900"}`,children:[l.jsx("p",{className:"text-sm",children:y.content}),l.jsxs("div",{className:`flex items-center mt-1 text-xs ${b?"text-white/70":"text-gray-500"}`,children:[l.jsx(Hr,{className:"h-3 w-3 mr-1"}),(T=y.timestamp)!=null&&T.toDate?y.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(y.timestamp||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})},y.id)}),o&&l.jsx("div",{className:"flex justify-start",children:l.jsx("div",{className:"bg-gray-100 text-gray-900 px-4 py-2 rounded-lg",children:l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),l.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"Admin is typing..."})]})})})]}),!d&&l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("form",{onSubmit:v,className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type your message...",disabled:o}),l.jsx("button",{type:"submit",disabled:!s.trim()||x,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-green-500 text-white rounded-lg hover:from-blue-600 hover:to-green-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(c0,{className:"h-4 w-4"})})]})})]})}):null},xG=()=>{O.useState({name:"",email:"",phone:"",message:""}),O.useState(!1);const[t,e]=O.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white",children:"Opessocius"})}),l.jsxs("div",{className:"flex items-center space-x-8",children:[l.jsx(se,{to:"/",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Home"}),l.jsx(se,{to:"/about",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"About"}),l.jsx(se,{to:"/calculator",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Calculator"}),l.jsx(se,{to:"/contact",className:"text-white/80 hover:text-white transition-colors",onClick:()=>window.scrollTo(0,0),children:"Contact"}),l.jsxs(se,{to:"/login",className:"bg-white text-black px-6 py-2 rounded-full font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",onClick:()=>window.scrollTo(0,0),children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-4 w-4"})]})]})]})})}),l.jsx("section",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["Get in",l.jsx("span",{className:"block bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Touch"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-white/80 mb-12 max-w-4xl mx-auto leading-relaxed",children:"Ready to start your investment journey? Our team is here to help you make informed decisions and achieve your financial goals."})]})}),l.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(ss,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Email Us"}),l.jsx("p",{className:"text-white/70 mb-4",children:"Get in touch via email"}),l.jsx("a",{href:"mailto:support@opessocius.com",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"support@opessocius.com"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(_u,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Call Us"}),l.jsx("p",{className:"text-white/70 mb-4",children:"Speak with our experts"}),l.jsx("a",{href:"tel:+9715780714671",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"+971-578-071-4671"})]}),l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10 hover-lift hover-glow",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-6",children:l.jsx(Hr,{className:"h-12 w-12 text-slate-300"})}),l.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Business Hours"}),l.jsx("p",{className:"text-white/70 mb-4",children:"When we're available"}),l.jsx("p",{className:"text-blue-400",children:"Mon-Fri: 9AM-6PM"}),l.jsx("p",{className:"text-blue-400",children:"Sat: 10AM-1PM"})]})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white text-center mb-16",children:"Chat with Us Live"}),l.jsxs("div",{className:"text-center p-12 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("div",{className:"flex items-center justify-center mx-auto mb-8",children:l.jsx(nn,{className:"h-16 w-16 text-slate-300"})}),l.jsx("h3",{className:"text-3xl font-bold text-white mb-6",children:"Get Instant Support"}),l.jsx("p",{className:"text-xl text-white/70 mb-8 leading-relaxed",children:"Have questions about our investment services? Chat directly with our expert team and get immediate answers to all your queries."}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx("span",{className:"text-green-400 text-xl font-bold",children:"⚡"})}),l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Instant Response"}),l.jsx("p",{className:"text-white/60 text-sm",children:"Get answers within seconds"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx("span",{className:"text-blue-400 text-xl font-bold",children:"👨‍💼"})}),l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Expert Support"}),l.jsx("p",{className:"text-white/60 text-sm",children:"Chat with investment professionals"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx("span",{className:"text-purple-400 text-xl font-bold",children:"🔒"})}),l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Secure & Private"}),l.jsx("p",{className:"text-white/60 text-sm",children:"Your conversations are confidential"})]})]}),l.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center space-x-3 bg-slate-800 text-white px-10 py-4 rounded-full font-semibold hover:bg-slate-700 transition-all text-lg shadow-lg hover:shadow-xl border border-slate-600",children:[l.jsx(nn,{className:"h-6 w-6"}),l.jsx("span",{children:"Start Live Chat"})]}),l.jsx("p",{className:"text-white/50 text-sm mt-4",children:"Available Monday - Friday, 9:00 AM - 6:00 PM EST"})]})]})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-8",children:"Our Office"}),l.jsx("p",{className:"text-xl text-white/80 mb-8 leading-relaxed",children:"Located in the heart of Dubais financial district."}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(dF,{className:"h-6 w-6 text-blue-400 flex-shrink-0"}),l.jsx("span",{className:"text-white/90",children:"673C+W8M - Dubai - United Arab Emirates"})]})})]}),l.jsx("div",{className:"relative",children:l.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl backdrop-blur-sm border border-white/10 flex items-center justify-center",children:l.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3608.1234567890123!2d55.290293!3d25.225306!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjXCsDEzJzMxLjEiTiA1NcKwMTcnMjUuMSJF!5e0!3m2!1sen!2sae!4v1234567890123",width:"100%",height:"100%",style:{border:0,borderRadius:"16px"},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Opessocius Office Location"})})})]})})}),l.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Start Your Investment Journey?"}),l.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Join thousands of successful investors who trust Opessocius with their portfolios."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(se,{to:"/register",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all text-lg border border-blue-400",children:[l.jsx("span",{children:"Get Started Today"}),l.jsx(dt,{className:"h-5 w-5"})]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-100 transition-all text-lg border border-slate-200",children:[l.jsx("span",{children:"Login to Dashboard"}),l.jsx(dt,{className:"h-5 w-5"})]})]})]})}),l.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 border-t border-white/10",children:l.jsx("div",{className:"max-w-7xl mx-auto text-center",children:l.jsx("p",{className:"text-white/50",children:"© 2024 Opessocius. All rights reserved. Professional investment management services."})})}),l.jsx(ju,{}),l.jsx(pG,{isOpen:t,onClose:()=>e(!1)})]})},gG=()=>{const t=Ff(),{addInvestor:e}=Xa(),[n,r]=O.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",investmentAmount:""}),[s,i]=O.useState(!1),[o,a]=O.useState(!1),[c,u]=O.useState(!1),[d,f]=O.useState({}),[m,p]=O.useState(!1),x=S=>{const{name:y,value:b}=S.target;r(E=>({...E,[y]:b})),d[y]&&f(E=>({...E,[y]:""}))},_=()=>{const S={};if(n.name.trim()||(S.name="Full name is required"),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(S.email="Please enter a valid email"):S.email="Email is required",n.phone.trim()||(S.phone="Phone number is required"),!n.password)S.password="Password is required";else{const y=ZO(n.password);y.isValid||(S.password=y.feedback.join(", "))}return n.password!==n.confirmPassword&&(S.confirmPassword="Passwords do not match"),n.investmentAmount?(isNaN(n.investmentAmount)||parseFloat(n.investmentAmount)<1e3)&&(S.investmentAmount="Minimum investment amount is €1,000"):S.investmentAmount="Investment amount is required",f(S),Object.keys(S).length===0},v=async S=>{if(S.preventDefault(),!!_()){u(!0);try{const y=await bv(n.password),b={name:n.name,email:n.email,phone:n.phone,username:n.email.split("@")[0],password:y,investmentAmount:parseFloat(n.investmentAmount),initiationDate:new Date().toISOString(),profilePicture:""};await e(b),await Kr.sendWelcomeEmail(n.email,n.name),p(!0),setTimeout(()=>{t("/login")},5e3)}catch(y){console.error("Registration error:",y),f({general:"Registration failed. Please try again."})}finally{u(!1)}}};return m?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center px-4",children:l.jsx("div",{className:"max-w-md w-full",children:l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(ss,{className:"h-8 w-8 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Registration Successful!"}),l.jsx("p",{className:"text-white/70 mb-4",children:"Your account has been created successfully! Please check your email for confirmation."}),l.jsx("p",{className:"text-white/60 text-sm mb-6",children:"You'll be redirected to login in a few seconds..."}),l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-2 bg-white/20 rounded mb-2"}),l.jsx("div",{className:"h-2 bg-white/20 rounded w-3/4"})]})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsxs(se,{to:"/",className:"inline-flex items-center space-x-2 text-white/70 hover:text-white transition-colors mb-4",children:[l.jsx(kT,{className:"h-4 w-4"}),l.jsx("span",{children:"Back to Home"})]}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),l.jsx("p",{className:"text-white/70",children:"Join Opessocius and start your investment journey"})]}),l.jsxs("div",{className:"p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[d.general&&l.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:d.general}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-white font-medium mb-2",children:"Full Name"}),l.jsxs("div",{className:"relative",children:[l.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:x,className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm ${d.name?"border-red-500":"border-white/20"}`,placeholder:"Enter your full name"})]}),d.name&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:d.name})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-white font-medium mb-2",children:"Email Address"}),l.jsxs("div",{className:"relative",children:[l.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:x,className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm ${d.email?"border-red-500":"border-white/20"}`,placeholder:"Enter your email"})]}),d.email&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:d.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-white font-medium mb-2",children:"Phone Number"}),l.jsxs("div",{className:"relative",children:[l.jsx(_u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:x,className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm ${d.phone?"border-red-500":"border-white/20"}`,placeholder:"Enter your phone number"})]}),d.phone&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:d.phone})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"investmentAmount",className:"block text-white font-medium mb-2",children:"Initial Investment Amount (€)"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:"number",id:"investmentAmount",name:"investmentAmount",value:n.investmentAmount,onChange:x,min:"1000",step:"100",className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm ${d.investmentAmount?"border-red-500":"border-white/20"}`,placeholder:"Minimum €1,000"})]}),d.investmentAmount&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:d.investmentAmount})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-white font-medium mb-2",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:s?"text":"password",id:"password",name:"password",value:n.password,onChange:x,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm ${d.password?"border-red-500":"border-white/20"}`,placeholder:"Create a password"}),l.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white",children:s?l.jsx(ho,{className:"h-5 w-5"}):l.jsx(li,{className:"h-5 w-5"})})]}),d.password&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:d.password})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-white font-medium mb-2",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/50"}),l.jsx("input",{type:o?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:x,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm ${d.confirmPassword?"border-red-500":"border-white/20"}`,placeholder:"Confirm your password"}),l.jsx("button",{type:"button",onClick:()=>a(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white",children:o?l.jsx(ho,{className:"h-5 w-5"}):l.jsx(li,{className:"h-5 w-5"})})]}),d.confirmPassword&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:d.confirmPassword})]}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating Account...":"Create Account"})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("p",{className:"text-white/70",children:["Already have an account?"," ",l.jsx(se,{to:"/login",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Sign in here"})]})})]})]})})},yG=()=>{const[t]=d3(),[e,n]=O.useState({password:"",confirmPassword:""}),[r,s]=O.useState(!1),[i,o]=O.useState(!1),[a,c]=O.useState(!1),[u,d]=O.useState(!1),[f,m]=O.useState(""),[p,x]=O.useState({score:0,feedback:[]}),_=t.get("token"),v=_?m2(_):null;O.useEffect(()=>{_?v||m("Invalid or corrupted reset token. Please request a new password reset."):m("Invalid or missing reset token. Please request a new password reset.")},[_,v]);const S=k=>{const w=[];let g=0;return k.length>=8?g+=1:w.push("At least 8 characters"),/[a-z]/.test(k)?g+=1:w.push("At least one lowercase letter"),/[A-Z]/.test(k)?g+=1:w.push("At least one uppercase letter"),/[0-9]/.test(k)?g+=1:w.push("At least one number"),/[^A-Za-z0-9]/.test(k)?g+=1:w.push("At least one special character"),{score:g,feedback:w}},y=k=>{const{name:w,value:g}=k.target;n(A=>({...A,[w]:g})),w==="password"&&x(S(g))},b=async k=>{if(k.preventDefault(),!_||!v){m("Invalid or corrupted reset token");return}if(e.password!==e.confirmPassword){m("Passwords do not match");return}if(p.score<3){m("Password is too weak. Please choose a stronger password.");return}c(!0),m("");try{const w=m2(v);if(!w){m("Invalid reset token. Please request a new password reset.");return}let g=null,A=null,N=null;const j=he(ee,"investors"),D=it(j,rn("resetToken","==",w)),P=await $e(D);if(!P.empty)g=P.docs[0],A=g.data(),N="investors";else{const $=he(ee,"users"),G=it($,rn("resetToken","==",w)),X=await $e(G);if(!X.empty)g=X.docs[0],A=g.data(),N="users";else{m("Invalid or expired reset token. Please request a new password reset.");return}}if(A.resetTokenExpiry&&new Date>A.resetTokenExpiry.toDate()){m("Reset token has expired. Please request a new password reset.");return}const M=await bv(e.password);await Wn(He(ee,N,g.id),{password:M,resetToken:null,updatedAt:new Date}),pa.currentUser&&pa.currentUser.email===A.email&&await DA(pa.currentUser,e.password),await Kr.sendPasswordChangeConfirmation(A.email,A.name||A.username),d(!0)}catch(w){console.error("Error resetting password:",w),m("Failed to reset password. Please try again.")}finally{c(!1)}},E=()=>p.score<=2?"text-red-500":p.score<=3?"text-yellow-500":p.score<=4?"text-blue-500":"text-green-500",T=()=>p.score<=2?"Weak":p.score<=3?"Fair":p.score<=4?"Good":"Strong";return u?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center px-4",children:l.jsx("div",{className:"max-w-md w-full",children:l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Ls,{className:"h-8 w-8 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Password Reset Successful!"}),l.jsx("p",{className:"text-white/70 mb-6",children:"Your password has been successfully updated. You can now log in with your new password."}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all",children:[l.jsx("span",{children:"Go to Login"}),l.jsx(dt,{className:"h-4 w-4"})]})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full",children:[l.jsx("div",{className:"mb-8 text-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white hover:text-blue-400 transition-colors",children:"Opessocius"})}),l.jsxs("div",{className:"p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Oa,{className:"h-8 w-8 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Reset Your Password"}),l.jsx("p",{className:"text-white/70",children:"Enter your new password below"})]}),f&&l.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nf,{className:"h-5 w-5 text-red-400"}),l.jsx("span",{className:"text-red-400",children:f})]})}),l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:r?"text":"password",name:"password",value:e.password,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your new password",required:!0}),l.jsx("button",{type:"button",onClick:()=>s(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80",children:r?l.jsx(ho,{className:"h-5 w-5"}):l.jsx(li,{className:"h-5 w-5"})})]}),e.password&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-white/60",children:"Password strength:"}),l.jsx("span",{className:`font-medium ${E()}`,children:T()})]}),l.jsx("div",{className:"mt-1 w-full bg-white/20 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full transition-all ${p.score<=2?"bg-red-500":p.score<=3?"bg-yellow-500":p.score<=4?"bg-blue-500":"bg-green-500"}`,style:{width:`${p.score/5*100}%`}})}),p.feedback.length>0&&l.jsx("ul",{className:"mt-2 text-xs text-white/60 space-y-1",children:p.feedback.map((k,w)=>l.jsxs("li",{children:["• ",k]},w))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Confirm New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:i?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your new password",required:!0}),l.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80",children:i?l.jsx(ho,{className:"h-5 w-5"}):l.jsx(li,{className:"h-5 w-5"})})]}),e.confirmPassword&&l.jsx("div",{className:"mt-2",children:e.password===e.confirmPassword?l.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-sm",children:[l.jsx(Ls,{className:"h-4 w-4"}),l.jsx("span",{children:"Passwords match"})]}):l.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[l.jsx(nf,{className:"h-4 w-4"}),l.jsx("span",{children:"Passwords do not match"})]})})]}),l.jsx("button",{type:"submit",disabled:a||!e.password||!e.confirmPassword||e.password!==e.confirmPassword||p.score<3,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),l.jsx("span",{children:"Resetting Password..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"Reset Password"}),l.jsx(dt,{className:"h-4 w-4"})]})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx(se,{to:"/login",className:"text-blue-400 hover:text-blue-300 transition-colors text-sm",children:"Back to Login"})})]})]})})},vG=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(!1),[s,i]=O.useState(!1),[o,a]=O.useState(""),c=async u=>{if(u.preventDefault(),!t){a("Please enter your email address");return}r(!0),a("");try{let d=null,f=null,m=null;const p=he(ee,"investors"),x=it(p,rn("email","==",t)),_=await $e(x);if(!_.empty)d=_.docs[0],f=d.id,m="investors";else{const y=he(ee,"users"),b=it(y,rn("email","==",t)),E=await $e(b);if(!E.empty)d=E.docs[0],f=d.id,m="users";else{a("No account found with this email address.");return}}const v=JO(32),S=XO(v);await Wn(He(ee,m,f),{resetToken:v,resetTokenExpiry:new Date(Date.now()+60*60*1e3)}),await Kr.sendPasswordResetEmail(t,S),i(!0)}catch(d){console.error("Error sending password reset email:",d),a("Failed to send password reset email. Please try again.")}finally{r(!1)}};return s?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center px-4",children:l.jsx("div",{className:"max-w-md w-full",children:l.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Ls,{className:"h-8 w-8 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Check Your Email!"}),l.jsxs("p",{className:"text-white/70 mb-6",children:["We've sent a password reset link to ",l.jsx("strong",{children:t}),". Please check your email and click the link to reset your password."]}),l.jsxs(se,{to:"/login",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-full font-semibold hover:from-blue-600 hover:to-blue-700 transition-all",children:[l.jsx(kT,{className:"h-4 w-4"}),l.jsx("span",{children:"Back to Login"})]})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full",children:[l.jsx("div",{className:"mb-8 text-center",children:l.jsx(se,{to:"/",className:"text-2xl font-bold text-white hover:text-blue-400 transition-colors",children:"Opessocius"})}),l.jsxs("div",{className:"p-8 rounded-2xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ss,{className:"h-8 w-8 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Forgot Your Password?"}),l.jsx("p",{className:"text-white/70",children:"Enter your email address and we'll send you a link to reset your password."})]}),o&&l.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nf,{className:"h-5 w-5 text-red-400"}),l.jsx("span",{className:"text-red-400",children:o})]})}),l.jsxs("form",{onSubmit:c,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",value:t,onChange:u=>e(u.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email address",required:!0})]}),l.jsx("button",{type:"submit",disabled:n||!t,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:n?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),l.jsx("span",{children:"Sending Reset Link..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"Send Reset Link"}),l.jsx(ss,{className:"h-4 w-4"})]})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx(se,{to:"/login",className:"text-blue-400 hover:text-blue-300 transition-colors text-sm",children:"Back to Login"})})]})]})})};class wG extends nu.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:l.jsxs("div",{className:"text-center p-8",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"We're sorry, but something unexpected happened."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}function bG(){const{isAuthenticated:t,isInvestor:e}=ls(),[n,r]=O.useState(!0);return l.jsxs(Z6,{children:[l.jsx(kt,{path:"/",element:l.jsx(uG,{})}),l.jsx(kt,{path:"/about",element:l.jsx(dG,{})}),l.jsx(kt,{path:"/performance-public",element:l.jsx(fG,{})}),l.jsx(kt,{path:"/calculator",element:l.jsx(mG,{})}),l.jsx(kt,{path:"/contact",element:l.jsx(xG,{})}),l.jsx(kt,{path:"/login",element:t?l.jsx(jr,{to:"/dashboard",replace:!0}):l.jsx(cG,{})}),l.jsx(kt,{path:"/register",element:t?l.jsx(jr,{to:"/dashboard",replace:!0}):l.jsx(gG,{})}),l.jsx(kt,{path:"/forgot-password",element:l.jsx(vG,{})}),l.jsx(kt,{path:"/reset-password",element:l.jsx(yG,{})}),l.jsx(kt,{path:"/dashboard",element:t?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(Bo,{isOpen:n,setIsOpen:r}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:e()?l.jsx(HW,{}):l.jsx(JU,{})})})]}):l.jsx(jr,{to:"/login",replace:!0})}),l.jsx(kt,{path:"/performance",element:t?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(Bo,{isOpen:n,setIsOpen:r}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:l.jsx(ZU,{})})})]}):l.jsx(jr,{to:"/login",replace:!0})}),l.jsx(kt,{path:"/investors",element:t?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(Bo,{isOpen:n,setIsOpen:r}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:l.jsx(ez,{})})})]}):l.jsx(jr,{to:"/login",replace:!0})}),l.jsx(kt,{path:"/market-news",element:t?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(Bo,{isOpen:n,setIsOpen:r}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:l.jsx(WW,{})})})]}):l.jsx(jr,{to:"/login",replace:!0})}),l.jsx(kt,{path:"/consultations",element:t?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(Bo,{isOpen:n,setIsOpen:r}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:l.jsx(lG,{})})})]}):l.jsx(jr,{to:"/login",replace:!0})}),l.jsx(kt,{path:"/chat",element:t?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(Bo,{isOpen:n,setIsOpen:r}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:l.jsx(aG,{})})})]}):l.jsx(jr,{to:"/login",replace:!0})}),l.jsx(kt,{path:"*",element:l.jsx(jr,{to:"/",replace:!0})})]})}function _G(){return l.jsx(wG,{children:l.jsx(a3,{children:l.jsx(eF,{children:l.jsx(bF,{children:l.jsx(tF,{children:l.jsx(bG,{})})})})})})}Sp.createRoot(document.getElementById("root")).render(l.jsx(nu.StrictMode,{children:l.jsx(_G,{})}));
